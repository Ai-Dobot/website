<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>AiDoBot — Healthcare That Comes to You</title>
<link rel="preconnect" href="https://fonts.googleapis.com"/>
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;0,900;1,400&family=DM+Sans:wght@300;400;500;600&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet"/>
<style>
  /* ── DESIGN TOKENS ─────────────────────────────── */
  :root {
    --wood-50:  #fdf8f2;
    --wood-100: #f5e9d5;
    --wood-200: #e8d0a8;
    --wood-300: #d4b07a;
    --wood-400: #c49555;
    --wood-500: #b07c3a;
    --wood-600: #8f6028;
    --wood-700: #6b4518;
    --wood-dark: #3d2408;
    --white:    #ffffff;
    --off-white: #fdf9f5;
    --text-dark: #1a1008;
    --text-mid:  #5a3e22;
    --text-light: #9b7b55;
    --accent:   #c49555;
    --accent-glow: rgba(196,149,85,0.25);
    --radius:   18px;
    --shadow-soft: 0 8px 40px rgba(61,36,8,0.10);
    --shadow-card: 0 4px 24px rgba(61,36,8,0.12);
    --transition: 0.35s cubic-bezier(0.4,0,0.2,1);
    --API: 'http://localhost:5000';
  }

  /* ── RESET ─────────────────────────────────────── */
  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
  html { scroll-behavior: smooth; }
  body {
    font-family: 'DM Sans', sans-serif;
    background: var(--off-white);
    color: var(--text-dark);
    overflow-x: hidden;
    cursor: default;
  }
  img, video { max-width: 100%; border-radius: var(--radius); display: block; }
  a { text-decoration: none; color: inherit; }
  section { position: relative; }

  /* ── GRAIN OVERLAY ─────────────────────────────── */
  body::before {
    content: '';
    position: fixed; inset: 0; z-index: 1; pointer-events: none;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.03'/%3E%3C/svg%3E");
    opacity: 0.4;
  }

  /* ── PLACEHOLDER / SKELETON ────────────────────────── */
  @keyframes shimmer {
    0%   { background-position: -600px 0; }
    100% { background-position: 600px 0; }
  }
  .ph-box {
    width:100%;height:100%;
    display:flex;flex-direction:column;align-items:center;justify-content:center;
    gap:10px;border-radius:inherit;overflow:hidden;position:relative;
    background:linear-gradient(135deg,var(--wood-200) 0%,var(--wood-100) 100%);
  }
  .ph-box::after {
    content:'';position:absolute;inset:0;
    background:linear-gradient(90deg,transparent 0%,rgba(255,255,255,0.4) 50%,transparent 100%);
    background-size:200% 100%;
    animation:shimmer 2s infinite linear;
  }
  .ph-icon { font-size:2.2rem;opacity:0.6;z-index:1; }
  .ph-label {
    font-size:0.72rem;font-family:'Space Mono',monospace;
    color:var(--wood-600);opacity:0.75;z-index:1;
    letter-spacing:0.05em;text-align:center;padding:0 12px;
  }

  /* ── SCROLLBAR ─────────────────────────────────── */
  ::-webkit-scrollbar { width: 6px; }
  ::-webkit-scrollbar-track { background: var(--wood-100); }
  ::-webkit-scrollbar-thumb { background: var(--wood-400); border-radius: 3px; }

  /* ── TYPOGRAPHY ────────────────────────────────── */
  .serif { font-family: 'Playfair Display', serif; }
  .mono  { font-family: 'Space Mono', monospace; }

  h1,h2,h3 { font-family: 'Playfair Display', serif; line-height: 1.15; }
  h1 { font-size: clamp(2.8rem, 7vw, 5.5rem); font-weight: 900; }
  h2 { font-size: clamp(2rem, 4.5vw, 3.5rem); font-weight: 700; }
  h3 { font-size: 1.35rem; font-weight: 700; }

  /* ── BUTTONS ───────────────────────────────────── */
  .btn {
    display: inline-flex; align-items: center; gap: 10px;
    padding: 14px 32px; border-radius: 100px;
    font-family: 'DM Sans', sans-serif; font-weight: 600; font-size: 0.95rem;
    border: none; cursor: pointer; transition: var(--transition);
    position: relative; overflow: hidden;
  }
  .btn-primary {
    background: linear-gradient(135deg, var(--wood-500), var(--wood-300));
    color: white;
    box-shadow: 0 4px 20px var(--accent-glow);
  }
  .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 8px 32px var(--accent-glow); }
  .btn-outline {
    background: transparent;
    border: 2px solid var(--wood-400);
    color: var(--wood-600);
  }
  .btn-outline:hover { background: var(--wood-400); color: white; }

  /* ── NAVBAR ────────────────────────────────────── */
  #navbar {
    position: fixed; top: 0; left: 0; right: 0; z-index: 1000;
    padding: 20px 5%;
    display: flex; align-items: center; justify-content: space-between;
    transition: var(--transition);
  }
  #navbar.scrolled {
    background: rgba(253,249,245,0.92);
    backdrop-filter: blur(20px);
    box-shadow: 0 2px 20px rgba(61,36,8,0.08);
    padding: 14px 5%;
  }
  .nav-logo {
    font-family: 'Playfair Display', serif;
    font-size: 1.6rem; font-weight: 900;
    color: var(--wood-dark);
  }
  .nav-logo span { color: var(--wood-500); }
  .nav-links {
    display: flex; gap: 36px; list-style: none;
  }
  .nav-links a {
    font-size: 0.9rem; font-weight: 500; color: var(--text-mid);
    transition: var(--transition);
  }
  .nav-links a:hover { color: var(--wood-600); }
  .nav-cta { display: flex; gap: 12px; align-items: center; }
  .hamburger { display: none; flex-direction: column; gap: 5px; cursor: pointer; }
  .hamburger span { width: 24px; height: 2px; background: var(--wood-dark); border-radius: 2px; transition: var(--transition); }

  /* ── HERO ──────────────────────────────────────── */
  #hero {
    min-height: 100vh;
    background: linear-gradient(160deg, var(--wood-50) 0%, #fff 40%, var(--wood-100) 100%);
    display: flex; align-items: center;
    padding: 120px 5% 80px;
    overflow: hidden;
  }
  .hero-inner {
    max-width: 1280px; margin: auto; width: 100%;
    display: grid; grid-template-columns: 1fr 1fr; gap: 60px; align-items: center;
  }
  .hero-badge {
    display: inline-flex; align-items: center; gap: 8px;
    background: var(--wood-100); border: 1px solid var(--wood-200);
    padding: 8px 18px; border-radius: 100px;
    font-size: 0.8rem; font-weight: 600; color: var(--wood-600);
    margin-bottom: 24px;
    font-family: 'Space Mono', monospace;
    letter-spacing: 0.05em;
  }
  .hero-badge::before { content: '●'; color: #4ade80; animation: pulse-green 2s infinite; }
  @keyframes pulse-green { 0%,100%{opacity:1}50%{opacity:0.4} }
  .hero-title { margin-bottom: 20px; }
  .hero-title em { font-style: italic; color: var(--wood-500); }
  .hero-sub {
    font-size: 1.1rem; color: var(--text-mid); line-height: 1.7;
    max-width: 480px; margin-bottom: 36px;
  }
  .hero-actions { display: flex; gap: 16px; flex-wrap: wrap; margin-bottom: 48px; }
  .hero-vitals {
    display: grid; grid-template-columns: repeat(2,1fr); gap: 12px;
  }
  .vital-card {
    background: white;
    border: 1px solid var(--wood-200);
    border-radius: 14px; padding: 14px 18px;
    box-shadow: var(--shadow-card);
    transition: var(--transition);
  }
  .vital-card:hover { transform: translateY(-3px); border-color: var(--wood-300); }
  .vital-label { font-size: 0.72rem; font-family: 'Space Mono',monospace; color: var(--text-light); text-transform: uppercase; letter-spacing: 0.08em; }
  .vital-value { font-size: 1.2rem; font-weight: 700; color: var(--wood-700); margin-top: 4px; }
  .vital-icon { font-size: 1.1rem; margin-bottom: 4px; }

  .hero-visual {
    position: relative;
    display: flex; align-items: center; justify-content: center;
  }
  .hero-robot-wrap {
    position: relative;
    width: 100%; max-width: 480px;
    background: radial-gradient(ellipse at center, var(--wood-100) 0%, transparent 70%);
    border-radius: 50%; aspect-ratio: 1;
    display: flex; align-items: center; justify-content: center;
    animation: float 5s ease-in-out infinite;
  }
  @keyframes float { 0%,100%{transform:translateY(0)}50%{transform:translateY(-18px)} }
  .hero-robot-wrap img {
    width: 85%; object-fit: contain; border-radius: 0;
    filter: drop-shadow(0 30px 60px rgba(176,124,58,0.35));
  }
  .hero-robot-placeholder {
    width: 85%; aspect-ratio: 0.75;
    background: linear-gradient(160deg, var(--wood-200), var(--wood-100));
    border-radius: 40% 40% 30% 30%;
    display: flex; flex-direction: column; align-items: center; justify-content: center;
    gap: 12px; color: var(--wood-500);
    font-size: 3rem;
    border: 2px dashed var(--wood-300);
  }
  .hero-robot-placeholder p { font-size: 0.85rem; font-family: 'Space Mono',monospace; color: var(--wood-400); }

  /* ── HERO SLIDER ───────────────────────────────── */
  .hero-slider-wrap {
    position: relative; width: 100%; max-width: 480px;
    background: radial-gradient(ellipse at center, var(--wood-100) 0%, transparent 70%);
    border-radius: 50%; aspect-ratio: 1;
    display: flex; align-items: center; justify-content: center;
    animation: float 5s ease-in-out infinite;
    overflow: visible;
  }
  .hero-slides { width: 100%; height: 100%; position: relative; }
  .hero-slide {
    position: absolute; inset: 0;
    display: flex; align-items: center; justify-content: center;
    opacity: 0; transition: opacity 0.7s ease;
    pointer-events: none;
  }
  .hero-slide.active { opacity: 1; pointer-events: auto; }
  .hero-slide img {
    width: 85%; object-fit: contain; border-radius: 0;
    filter: drop-shadow(0 30px 60px rgba(176,124,58,0.35));
  }
  .hero-dots {
    position: absolute; bottom: -28px; left: 50%; transform: translateX(-50%);
    display: flex; gap: 8px; align-items: center;
  }
  .hero-dot {
    width: 8px; height: 8px; border-radius: 50%;
    background: var(--wood-300); cursor: pointer; transition: var(--transition);
    border: none; padding: 0;
  }
  .hero-dot.active { background: var(--wood-600); width: 22px; border-radius: 4px; }

  .orbit-chip {
    position: absolute;
    background: white; border: 1.5px solid var(--wood-200);
    border-radius: 50px; padding: 8px 14px;
    font-size: 0.78rem; font-weight: 600; color: var(--wood-700);
    box-shadow: var(--shadow-card);
    white-space: nowrap;
  }
  .orbit-chip.c1 { top: 8%; right: -10%; animation: float 4s ease-in-out infinite 0s; }
  .orbit-chip.c2 { bottom: 20%; right: -8%; animation: float 4s ease-in-out infinite 0.8s; }
  .orbit-chip.c3 { bottom: 8%; left: -5%; animation: float 4s ease-in-out infinite 1.6s; }
  .orbit-chip.c4 { top: 25%; left: -10%; animation: float 4s ease-in-out infinite 2.4s; }

  /* ── MARQUEE ────────────────────────────────────── */
  .marquee-section {
    background: var(--wood-dark); padding: 18px 0; overflow: hidden;
  }
  .marquee-track {
    display: flex; width: max-content;
    animation: marquee 30s linear infinite;
  }
  .marquee-track:hover { animation-play-state: paused; }
  @keyframes marquee { 0%{transform:translateX(0)}100%{transform:translateX(-50%)} }
  .marquee-item {
    display: flex; align-items: center; gap: 10px;
    padding: 0 28px;
    font-family: 'Space Mono', monospace;
    font-size: 0.78rem; color: var(--wood-300);
    letter-spacing: 0.05em; white-space: nowrap;
  }
  .marquee-dot { color: var(--wood-500); font-size: 1.2rem; }

  /* ── SECTION BASE ───────────────────────────────── */
  .section-pad { padding: 100px 5%; }
  .container { max-width: 1280px; margin: auto; }
  .section-tag {
    display: inline-block;
    font-family: 'Space Mono', monospace;
    font-size: 0.72rem; letter-spacing: 0.12em; text-transform: uppercase;
    color: var(--wood-500); margin-bottom: 14px;
  }
  .section-tag::before { content: '// '; }
  .section-title { margin-bottom: 16px; }
  .section-sub { color: var(--text-mid); font-size: 1.05rem; line-height: 1.7; max-width: 580px; }

  /* ── REVIEWS (SHORTS) ──────────────────────────── */
  #reviews { background: var(--wood-50); }
  .shorts-grid {
    display: flex; gap: 20px; overflow-x: auto;
    padding-bottom: 20px; scroll-snap-type: x mandatory;
  }
  .shorts-grid::-webkit-scrollbar { height: 4px; }
  .shorts-grid::-webkit-scrollbar-thumb { background: var(--wood-300); border-radius: 2px; }
  .short-card {
    flex: 0 0 220px; scroll-snap-align: start;
    background: var(--wood-dark);
    border-radius: 20px; overflow: hidden;
    aspect-ratio: 9/16; position: relative;
    cursor: pointer;
    transition: var(--transition);
    box-shadow: var(--shadow-card);
  }
  .short-card:hover { transform: scale(1.03); }
  .short-card video, .short-card img {
    width: 100%; height: 100%; object-fit: cover;
    border-radius: 0;
  }
  .short-card iframe {
    position: absolute; inset: 0; width: 100%; height: 100%; border: none; border-radius: 20px;
  }
  .short-card .overlay {
    position: absolute; inset: 0;
    background: linear-gradient(to top, rgba(20,10,2,0.8) 0%, transparent 60%);
    display: flex; flex-direction: column; justify-content: flex-end;
    padding: 18px;
  }
  .short-card .play-btn {
    position: absolute; top: 50%; left: 50%; transform: translate(-50%,-50%);
    width: 52px; height: 52px; border-radius: 50%;
    background: rgba(255,255,255,0.2); backdrop-filter: blur(8px);
    border: 2px solid rgba(255,255,255,0.5);
    display: flex; align-items: center; justify-content: center;
    font-size: 1.4rem; color: white;
    transition: var(--transition);
  }
  .short-card:hover .play-btn { background: var(--wood-500); border-color: var(--wood-500); }
  .short-placeholder {
    width: 100%; height: 100%;
    background: linear-gradient(160deg, var(--wood-700), var(--wood-dark));
    display: flex; flex-direction: column; align-items: center; justify-content: center;
    gap: 12px; color: var(--wood-300); font-size: 2rem;
  }
  .short-placeholder p { font-size: 0.72rem; font-family: 'Space Mono',monospace; text-align: center; padding: 0 12px; }

  /* ── STATS ──────────────────────────────────────── */
  #stats {
    background: linear-gradient(135deg, var(--wood-dark) 0%, var(--wood-700) 100%);
    padding: 80px 5%;
  }
  .stats-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 32px; max-width: 1280px; margin: auto; }
  .stat-item { text-align: center; padding: 32px 20px; }
  .stat-num {
    font-family: 'Playfair Display', serif; font-size: clamp(2.8rem, 5vw, 4.5rem);
    font-weight: 900; color: var(--wood-200);
    display: flex; align-items: baseline; justify-content: center; gap: 4px;
  }
  .stat-num sup { font-size: 0.5em; color: var(--wood-400); }
  .stat-label { font-size: 0.85rem; color: var(--wood-400); margin-top: 8px; font-family: 'Space Mono',monospace; text-transform: uppercase; letter-spacing: 0.08em; }

  /* ── ABOUT ──────────────────────────────────────── */
  #about { background: white; }
  .about-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 80px; align-items: center; }
  .about-images {
    display: grid; grid-template-columns: 1fr 1fr; grid-template-rows: 200px 200px; gap: 16px;
  }
  .about-img-card {
    border-radius: 18px; overflow: hidden; position: relative; cursor: pointer;
    background: var(--wood-100); border: 2px dashed var(--wood-200);
    display: flex; align-items: center; justify-content: center;
    flex-direction: column; gap: 8px; color: var(--wood-400);
    font-size: 2rem;
    transition: var(--transition);
  }
  .about-img-card:hover { border-color: var(--wood-400); }
  .about-img-card img { position: absolute; inset: 0; width: 100%; height: 100%; object-fit: cover; border-radius: 0; }
  .about-img-card.big { grid-row: 1 / 3; }
  .about-img-card p { font-size: 0.72rem; font-family: 'Space Mono',monospace; text-align: center; padding: 0 12px; }
  .features-list { margin-top: 28px; display: flex; flex-direction: column; gap: 14px; }
  .feature-item { display: flex; align-items: flex-start; gap: 14px; }
  .feature-check {
    width: 24px; height: 24px; border-radius: 50%;
    background: var(--wood-100); border: 2px solid var(--wood-300);
    display: flex; align-items: center; justify-content: center;
    font-size: 0.75rem; color: var(--wood-600); flex-shrink: 0; margin-top: 2px;
  }
  .feature-text { font-size: 0.95rem; color: var(--text-mid); line-height: 1.6; }

  /* ── HOW IT WORKS (JOURNEY) ─────────────────────── */
  #journey { background: var(--wood-50); }
  .journey-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 24px; }
  .journey-card {
    background: white; border: 1px solid var(--wood-200);
    border-radius: 20px; padding: 28px; position: relative;
    transition: var(--transition); overflow: hidden;
  }
  .journey-card::before {
    content: '';
    position: absolute; top: 0; left: 0; right: 0; height: 3px;
    background: linear-gradient(90deg, var(--wood-400), var(--wood-200));
    transform: scaleX(0); transform-origin: left; transition: var(--transition);
  }
  .journey-card:hover { transform: translateY(-5px); box-shadow: var(--shadow-soft); }
  .journey-card:hover::before { transform: scaleX(1); }
  .journey-num {
    font-family: 'Playfair Display', serif; font-size: 3.5rem; font-weight: 900;
    color: var(--wood-100); line-height: 1; margin-bottom: 12px;
  }
  .journey-video-wrap {
    aspect-ratio: 16/9; background: var(--wood-100);
    border-radius: 12px; overflow: hidden; margin: 16px 0;
    display: flex; align-items: center; justify-content: center;
    border: 2px dashed var(--wood-200); color: var(--wood-400);
    font-size: 1.5rem; flex-direction: column; gap: 8px; cursor: pointer;
    transition: var(--transition);
  }
  .journey-video-wrap:hover { border-color: var(--wood-400); }
  .journey-video-wrap p { font-size: 0.72rem; font-family: 'Space Mono',monospace; }
  .journey-video-wrap iframe, .journey-video-wrap video {
    width: 100%; height: 100%; border: none; border-radius: 0;
  }

  /* ── USE CASES ──────────────────────────────────── */
  #usecases { background: white; }
  .usecase-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; }
  .usecase-card {
    border-radius: 18px; padding: 28px 24px;
    background: var(--wood-50); border: 1px solid var(--wood-100);
    transition: var(--transition); position: relative; overflow: hidden;
  }
  .usecase-card::after {
    content: attr(data-badge);
    position: absolute; top: 16px; right: 16px;
    font-size: 0.65rem; font-family: 'Space Mono',monospace;
    background: var(--wood-200); color: var(--wood-700);
    padding: 3px 10px; border-radius: 100px; letter-spacing: 0.05em;
  }
  .usecase-card:hover { background: var(--wood-100); transform: translateY(-4px); box-shadow: var(--shadow-card); }
  .usecase-icon { font-size: 2.2rem; margin-bottom: 14px; }
  .usecase-card h3 { font-size: 1.05rem; margin-bottom: 8px; }
  .usecase-card p { font-size: 0.88rem; color: var(--text-mid); line-height: 1.6; }

  /* ── GALLERY ────────────────────────────────────── */
  #gallery { background: var(--wood-dark); }
  #gallery .section-tag { color: var(--wood-300); }
  #gallery h2 { color: var(--wood-100); }
  .gallery-grid {
    display: grid;
    grid-template-columns: repeat(12, 1fr); grid-template-rows: 240px 240px;
    gap: 16px; margin-top: 48px;
  }
  .gal-item {
    overflow: hidden;
    border-radius: 18px; overflow: hidden; position: relative; cursor: pointer;
    background: var(--wood-700); border: 2px dashed var(--wood-600);
    display: flex; align-items: center; justify-content: center;
    flex-direction: column; gap: 8px; color: var(--wood-400); font-size: 1.8rem;
    transition: var(--transition);
  }
  .gal-item img, .gal-item video { position: absolute; inset: 0; width: 100%; height: 100%; object-fit: cover; border-radius: 0; }
  .gal-item:hover { transform: scale(1.02); }
  .gal-item p { font-size: 0.72rem; font-family: 'Space Mono',monospace; color: var(--wood-400); }
  .gal-item.g1 { grid-column: 1/6; grid-row: 1/2; }
  .gal-item.g2 { grid-column: 6/9; grid-row: 1/2; }
  .gal-item.g3 { grid-column: 9/13; grid-row: 1/3; }
  .gal-item.g4 { grid-column: 1/4; grid-row: 2/3; }
  .gal-item.g5 { grid-column: 4/9; grid-row: 2/3; }
  .gal-label {
    position: absolute; bottom: 14px; left: 14px;
    background: rgba(20,10,2,0.75); backdrop-filter: blur(8px);
    color: var(--wood-200); padding: 6px 14px; border-radius: 100px;
    font-size: 0.75rem; font-family: 'Space Mono',monospace;
  }

  /* ── VIDEO REVIEWS ──────────────────────────────── */
  #video-reviews { background: var(--wood-50); }
  .video-reviews-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 28px; }
  .order-filter-btn {
    padding: 5px 14px; border-radius: 20px;
    border: 1px solid var(--wood-200); background: transparent;
    color: var(--wood-500); font-size: 0.75rem; cursor: pointer;
    font-family: 'DM Sans', sans-serif; transition: all 0.2s;
  }
  .order-filter-btn.active, .order-filter-btn:hover {
    background: var(--wood-500); color: white; border-color: var(--wood-500);
  }
  .order-card {
    background: var(--wood-100); border: 1px solid var(--wood-200);
    border-radius: 14px; padding: 16px 18px;
  }
  .order-card-header {
    display: flex; justify-content: space-between; align-items: flex-start;
    margin-bottom: 12px; flex-wrap: wrap; gap: 8px;
  }
  .order-status-badge {
    font-size: 0.65rem; font-family: 'Space Mono', monospace;
    padding: 3px 10px; border-radius: 20px; font-weight: 600;
  }
  .status-New      { background: #fef3c7; color: #92400e; }
  .status-Confirmed{ background: #d1fae5; color: #065f46; }
  .status-Shipped  { background: #dbeafe; color: #1e40af; }
  .status-Delivered{ background: #f3f4f6; color: #374151; }

  .vreview-card {
    border-radius: 20px; overflow: hidden;
    background: white; box-shadow: var(--shadow-card);
    transition: var(--transition);
  }
  .vreview-card:hover { transform: translateY(-6px); box-shadow: var(--shadow-soft); }
  .vreview-video {
    aspect-ratio: 16/9; background: var(--wood-100);
    display: flex; align-items: center; justify-content: center;
    flex-direction: column; gap: 10px; color: var(--wood-400);
    font-size: 2rem; cursor: pointer; position: relative; overflow: hidden;
    border-bottom: 2px dashed var(--wood-200);
  }
  .vreview-video iframe, .vreview-video video { position: absolute; inset: 0; width: 100%; height: 100%; border: none; }
  .vreview-video p { font-size: 0.75rem; font-family: 'Space Mono',monospace; }
  .vreview-body { padding: 22px; }
  .vreview-body h3 { font-size: 1rem; margin-bottom: 6px; }
  .vreview-role { font-size: 0.8rem; color: var(--wood-500); font-style: italic; margin-bottom: 12px; }
  .vreview-quote { font-size: 0.9rem; color: var(--text-mid); line-height: 1.6; }
  .vreview-quote::before { content: '"'; font-family: 'Playfair Display',serif; font-size: 1.8rem; color: var(--wood-300); line-height: 0; vertical-align: -0.4em; margin-right: 4px; }

  /* ── TEAM ───────────────────────────────────────── */
  #team { background: white; }
  .team-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 28px; }
  .team-card {
    border-radius: 20px; padding: 32px 24px; text-align: center;
    background: var(--wood-50); border: 1px solid var(--wood-100);
    transition: var(--transition);
  }
  .team-card:hover { transform: translateY(-6px); box-shadow: var(--shadow-soft); border-color: var(--wood-300); }
  .team-avatar {
    width: 96px; height: 96px; border-radius: 50%;
    margin: 0 auto 18px;
    background: linear-gradient(135deg, var(--wood-200), var(--wood-100));
    border: 3px solid var(--wood-300);
    display: flex; align-items: center; justify-content: center;
    font-size: 2.5rem; overflow: hidden; position: relative;
    cursor: pointer;
  }
  .team-avatar img { position: absolute; inset: 0; width: 100%; height: 100%; object-fit: cover; border-radius: 50%; }
  .team-card h3 { font-size: 1.05rem; margin-bottom: 4px; }
  .team-role { font-size: 0.8rem; color: var(--wood-500); font-family: 'Space Mono',monospace; margin-bottom: 12px; }
  .team-bio { font-size: 0.85rem; color: var(--text-mid); line-height: 1.6; }

  /* ── EVENTS ─────────────────────────────────────── */
  #events { background: var(--wood-50); }
  .events-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 24px; }
  .event-card {
    border-radius: 18px; overflow: hidden;
    background: white; border: 1px solid var(--wood-200);
    transition: var(--transition);
  }
  .event-card:hover { transform: translateY(-4px); box-shadow: var(--shadow-card); }
  .event-img {
    height: 180px; background: linear-gradient(135deg, var(--wood-200), var(--wood-100));
    display: flex; align-items: center; justify-content: center;
    font-size: 2.5rem; overflow: hidden; position: relative;
  }
  .event-img img { position: absolute; inset: 0; width: 100%; height: 100%; object-fit: cover; border-radius: 0; }
  .event-body { padding: 22px; }
  .event-date { font-family: 'Space Mono',monospace; font-size: 0.75rem; color: var(--wood-500); margin-bottom: 8px; }
  .event-body h3 { font-size: 1rem; margin-bottom: 6px; }
  .event-loc { font-size: 0.82rem; color: var(--text-light); }

  /* ── ANNOUNCEMENTS ──────────────────────────────── */
  #announcements { background: white; }
  .announce-list { display: flex; flex-direction: column; gap: 20px; }
  .announce-item {
    display: flex; gap: 20px; align-items: flex-start;
    padding: 24px; border-radius: 16px; background: var(--wood-50);
    border: 1px solid var(--wood-100); transition: var(--transition);
  }
  .announce-item:hover { border-color: var(--wood-300); background: var(--wood-100); }
  .announce-icon { font-size: 1.8rem; width: 52px; height: 52px; display: flex; align-items: center; justify-content: center; flex-shrink: 0; }
  .announce-date { font-family: 'Space Mono',monospace; font-size: 0.72rem; color: var(--wood-400); margin-bottom: 6px; }
  .announce-item h3 { font-size: 1rem; margin-bottom: 6px; }
  .announce-item p { font-size: 0.88rem; color: var(--text-mid); line-height: 1.6; }

  /* ── PARTNERS ───────────────────────────────────── */
  #partners { background: var(--wood-dark); padding: 80px 5%; }
  #partners .section-tag { color: var(--wood-300); }
  #partners h2 { color: var(--wood-100); margin-bottom: 48px; }
  .partners-grid { display: flex; flex-wrap: wrap; gap: 20px; justify-content: center; max-width: 1280px; margin: auto; }
  .partner-chip {
    background: rgba(255,255,255,0.07);
    border: 1px solid rgba(196,149,85,0.25);
    border-radius: 14px; padding: 18px 24px;
    display: flex; align-items: center; gap: 16px;
    color: var(--wood-200); transition: var(--transition);
    cursor: default;
  }
  .partner-chip:hover { background: rgba(196,149,85,0.12); border-color: var(--wood-400); }
  .partner-chip .icon { font-size: 1.6rem; flex-shrink:0; }
  .partner-chip .partner-logo { width:48px;height:48px;object-fit:contain;border-radius:8px;flex-shrink:0;background:rgba(255,255,255,0.08);padding:4px; }
  .partner-chip .pname { font-weight: 600; font-size: 0.95rem; }
  .partner-chip .ptype { font-size: 0.72rem; font-family: 'Space Mono',monospace; color: var(--wood-400); }
  .partner-chip .pdesc { font-size: 0.78rem; color:var(--text-light); margin-top:3px; line-height:1.4; }

  /* ── SOCIAL / YOUTUBE ───────────────────────────── */
  #social { background: var(--wood-50); }
  .social-inner { display: grid; grid-template-columns: 1fr 1fr; gap: 60px; align-items: center; }
  .social-links { display: flex; flex-wrap: wrap; gap: 16px; margin-top: 28px; }
  .social-btn {
    display: flex; align-items: center; gap: 10px;
    padding: 14px 22px; border-radius: 14px;
    border: 1.5px solid var(--wood-200);
    background: white; font-weight: 500; font-size: 0.9rem;
    color: var(--text-dark); transition: var(--transition); cursor: pointer;
  }
  .social-btn:hover { border-color: var(--wood-400); background: var(--wood-100); }
  .yt-embed { aspect-ratio: 16/9; border-radius: 18px; overflow: hidden; background: var(--wood-200); border: 2px dashed var(--wood-300); display: flex; align-items: center; justify-content: center; flex-direction: column; gap: 10px; color: var(--wood-500); font-size: 2.5rem; }
  .yt-embed iframe { width: 100%; height: 100%; border: none; }
  .yt-embed p { font-size: 0.8rem; font-family: 'Space Mono',monospace; color: var(--wood-400); }

  /* ── CONTACT ────────────────────────────────────── */
  #contact {
    background: linear-gradient(160deg, var(--wood-dark) 0%, var(--wood-700) 100%);
    padding: 100px 5%;
  }
  #contact .section-tag { color: var(--wood-300); }
  #contact h2 { color: white; margin-bottom: 16px; }
  .contact-inner { display: grid; grid-template-columns: 1fr 1fr; gap: 80px; align-items: start; }
  .contact-info { display: flex; flex-direction: column; gap: 24px; margin-top: 32px; }
  .contact-item { display: flex; align-items: flex-start; gap: 16px; }
  .contact-item-icon {
    width: 44px; height: 44px; border-radius: 12px;
    background: rgba(255,255,255,0.1); border: 1px solid rgba(196,149,85,0.3);
    display: flex; align-items: center; justify-content: center; font-size: 1.1rem; flex-shrink: 0;
  }
  .contact-item-label { font-size: 0.75rem; font-family: 'Space Mono',monospace; color: var(--wood-400); margin-bottom: 4px; }
  .contact-item-val { color: var(--wood-200); font-size: 0.95rem; }
  .contact-form { background: rgba(255,255,255,0.06); backdrop-filter: blur(12px); border: 1px solid rgba(196,149,85,0.2); border-radius: 24px; padding: 36px; }
  .form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; }
  .form-group { display: flex; flex-direction: column; gap: 8px; margin-bottom: 18px; }
  .form-group label { font-size: 0.8rem; font-family: 'Space Mono',monospace; color: var(--wood-300); }
  .form-group input, .form-group textarea {
    background: rgba(255,255,255,0.08); border: 1.5px solid rgba(196,149,85,0.25);
    border-radius: 12px; padding: 13px 16px;
    color: white; font-family: 'DM Sans',sans-serif; font-size: 0.92rem;
    outline: none; resize: vertical; transition: var(--transition);
  }
  .form-group input::placeholder, .form-group textarea::placeholder { color: rgba(255,255,255,0.3); }
  .form-group input:focus, .form-group textarea:focus { border-color: var(--wood-400); background: rgba(255,255,255,0.12); }
  .form-success { display: none; text-align: center; padding: 20px; color: #4ade80; font-weight: 600; }

  /* ── FOOTER ─────────────────────────────────────── */
  footer {
    background: var(--wood-dark); border-top: 1px solid rgba(196,149,85,0.15);
    padding: 48px 5% 28px;
  }
  .footer-inner { max-width: 1280px; margin: auto; }
  .footer-top { display: grid; grid-template-columns: 2fr 1fr 1fr 1fr; gap: 48px; margin-bottom: 40px; }
  .footer-logo { font-family: 'Playfair Display',serif; font-size: 1.5rem; font-weight: 900; color: var(--wood-200); margin-bottom: 14px; }
  .footer-logo span { color: var(--wood-400); }
  .footer-desc { font-size: 0.87rem; color: var(--wood-400); line-height: 1.7; }
  .footer-col h4 { font-family: 'Space Mono',monospace; font-size: 0.72rem; text-transform: uppercase; letter-spacing: 0.1em; color: var(--wood-400); margin-bottom: 16px; }
  .footer-col a { display: block; color: var(--wood-300); font-size: 0.88rem; margin-bottom: 10px; transition: var(--transition); }
  .footer-col a:hover { color: var(--wood-200); padding-left: 4px; }
  .footer-bottom { border-top: 1px solid rgba(196,149,85,0.1); padding-top: 24px; display: flex; justify-content: space-between; align-items: center; }
  .footer-copy { font-size: 0.82rem; color: var(--wood-500); font-family: 'Space Mono',monospace; }

  /* ── ADMIN TOGGLE ───────────────────────────────── */
  #admin-trigger {
    position: fixed; bottom: 18px; left: 18px; z-index: 10000;
    width: 34px; height: 34px; border-radius: 50%;
    background: transparent; border: 1px solid rgba(180,140,100,0.18);
    color: rgba(180,140,100,0.25); font-size: 0.85rem;
    display: flex; align-items: center; justify-content: center;
    cursor: pointer; box-shadow: none;
    transition: all 0.3s ease;
    opacity: 0.35;
  }
  #admin-trigger:hover {
    background: var(--wood-dark); border-color: var(--wood-500);
    color: var(--wood-300); opacity: 1;
    box-shadow: 0 4px 16px rgba(0,0,0,0.4);
    transform: rotate(20deg);
  }

  /* ── ADMIN PANEL ────────────────────────────────── */
  #admin-overlay {
    display: none; position: fixed; inset: 0; z-index: 9995;
    background: rgba(20,10,2,0.85); backdrop-filter: blur(8px);
    align-items: center; justify-content: center;
  }
  #admin-overlay.open { display: flex; }
  .admin-modal {
    background: #fff9f2; border-radius: 24px;
    width: min(900px, 95vw); max-height: 90vh;
    overflow: hidden; display: flex; flex-direction: column;
    box-shadow: 0 32px 80px rgba(0,0,0,0.5);
    border: 1px solid var(--wood-200);
  }
  .admin-header {
    background: var(--wood-dark); padding: 20px 28px;
    display: flex; align-items: center; justify-content: space-between;
  }
  .admin-header h2 { color: var(--wood-200); font-size: 1.3rem; }
  .admin-close { background: none; border: none; color: var(--wood-400); font-size: 1.4rem; cursor: pointer; transition: var(--transition); }
  .admin-close:hover { color: white; }
  .admin-login { padding: 48px; display: flex; flex-direction: column; align-items: center; gap: 20px; }
  .admin-login h3 { font-size: 1.4rem; color: var(--wood-700); }
  .admin-login input {
    width: 280px; padding: 13px 18px; border-radius: 12px;
    border: 1.5px solid var(--wood-300); background: white;
    font-size: 1rem; outline: none; transition: var(--transition);
  }
  .admin-login input:focus { border-color: var(--wood-500); }
  .admin-login .err { color: #e53e3e; font-size: 0.85rem; }
  .admin-body { display: none; flex: 1; overflow: hidden; }
  .admin-body.visible { display: flex; }
  .admin-sidebar {
    width: 200px; background: var(--wood-50); border-right: 1px solid var(--wood-200);
    padding: 20px 0; flex-shrink: 0;
  }
  .admin-tab {
    display: block; padding: 12px 22px; font-size: 0.88rem;
    color: var(--text-mid); cursor: pointer; transition: var(--transition);
    border-left: 3px solid transparent;
  }
  .admin-tab:hover, .admin-tab.active { background: var(--wood-100); color: var(--wood-700); border-left-color: var(--wood-500); font-weight: 600; }
  .admin-content { flex: 1; overflow-y: auto; padding: 28px; }
  .admin-section { display: none; }
  .admin-section.active { display: block; }
  .admin-section h3 { font-size: 1.1rem; margin-bottom: 20px; color: var(--wood-700); }
  .upload-zone {
    border: 2px dashed var(--wood-300); border-radius: 14px;
    padding: 28px; text-align: center; cursor: pointer;
    background: var(--wood-50); transition: var(--transition); position: relative;
  }
  .upload-zone:hover { border-color: var(--wood-500); background: var(--wood-100); }
  .upload-zone input[type=file] { position: absolute; inset: 0; opacity: 0; cursor: pointer; }
  .upload-zone .upload-icon { font-size: 2.2rem; margin-bottom: 8px; }
  .upload-zone p { font-size: 0.85rem; color: var(--text-mid); }
  .admin-input {
    width: 100%; padding: 11px 14px; border-radius: 10px;
    border: 1.5px solid var(--wood-300); background: white;
    font-size: 0.9rem; outline: none; margin-bottom: 12px;
    transition: var(--transition); font-family: 'DM Sans',sans-serif;
  }
  .admin-input:focus { border-color: var(--wood-500); }
  .admin-label { font-size: 0.78rem; font-family: 'Space Mono',monospace; color: var(--text-mid); margin-bottom: 6px; display: block; }
  .admin-save {
    background: var(--wood-600); color: white;
    border: none; border-radius: 10px; padding: 11px 24px;
    font-size: 0.9rem; font-weight: 600; cursor: pointer; transition: var(--transition);
  }
  .admin-save:hover { background: var(--wood-500); }
  .admin-msg { font-size: 0.82rem; color: #38a169; margin-top: 8px; display: none; }
  .media-grid { display: grid; grid-template-columns: repeat(3,1fr); gap: 12px; margin-top: 16px; }
  .media-thumb {
    border-radius: 10px; overflow: hidden; aspect-ratio: 4/3;
    background: var(--wood-100); position: relative;
  }
  .media-thumb img, .media-thumb video { width: 100%; height: 100%; object-fit: cover; }
  .media-thumb .del-btn {
    position: absolute; top: 6px; right: 6px;
    background: rgba(0,0,0,0.6); color: white; border: none;
    width: 24px; height: 24px; border-radius: 50%; cursor: pointer; font-size: 0.75rem;
  }
  .progress-bar {
    height: 4px; background: var(--wood-200); border-radius: 2px; margin-top: 10px; display: none;
  }
  .progress-bar .fill { height: 100%; background: var(--wood-500); border-radius: 2px; width: 0; transition: width 0.3s; }

  /* ── LIGHTBOX ───────────────────────────────────── */
  #lightbox {
    display: none; position: fixed; inset: 0; z-index: 9997;
    background: rgba(0,0,0,0.92); align-items: center; justify-content: center;
  }
  #lightbox.open { display: flex; }
  #lightbox img, #lightbox video { max-width: 90vw; max-height: 85vh; border-radius: 12px; }
  #lightbox-close { position: absolute; top: 20px; right: 24px; font-size: 2rem; color: white; cursor: pointer; }

  /* ── MOBILE ─────────────────────────────────────── */
  @media(max-width:900px){
    .nav-links { display: none; }
    .hamburger { display: flex; }
    .hero-inner { grid-template-columns: 1fr; }
    .hero-visual { display: none; }
    .stats-grid { grid-template-columns: repeat(2,1fr); }
    .about-grid,.contact-inner,.social-inner { grid-template-columns: 1fr; }
    .about-images { display: none; }
    .journey-grid,.usecase-grid,.video-reviews-grid,.team-grid,.events-grid { grid-template-columns: 1fr; }
    .gallery-grid { grid-template-columns: 1fr 1fr; grid-template-rows: auto; }
    .gal-item { grid-column: auto!important; grid-row: auto!important; }
    .footer-top { grid-template-columns: 1fr 1fr; }
    .form-row { grid-template-columns: 1fr; }
    .admin-sidebar { display: none; }
  }

  /* ── SCROLL ANIMATIONS ──────────────────────────── */
  .reveal { opacity: 1; transform: none; }
  .reveal.visible { opacity: 1; transform: none; }

  /* ── PAGE LOADER ────────────────────────────────── */
  #loader {
    position: fixed; inset: 0; z-index: 10002;
    background: var(--wood-dark);
    display: flex; flex-direction: column; align-items: center; justify-content: center;
    /* Self-destructs after 2.3s purely via CSS — no JS required */
    animation: loaderExit 0.5s ease 2.2s forwards;
    pointer-events: all;
  }
  @keyframes loaderExit {
    0%   { opacity: 1; pointer-events: all; }
    99%  { opacity: 0; pointer-events: none; display: flex; }
    100% { opacity: 0; pointer-events: none; display: none; visibility: hidden; }
  }
  #loader.done {
    animation: loaderExit 0.3s ease forwards !important;
  }
  .loader-logo { font-family: 'Playfair Display',serif; font-size: 2.5rem; color: var(--wood-200); font-weight: 900; margin-bottom: 24px; }
  .loader-logo span { color: var(--wood-400); }
  .loader-bar { width: 200px; height: 3px; background: rgba(255,255,255,0.1); border-radius: 2px; overflow: hidden; }
  .loader-fill { height: 100%; background: var(--wood-400); border-radius: 2px; animation: load 1.8s ease forwards; }
  @keyframes load { 0%{width:0}100%{width:100%} }

  /* ── PRICING SECTION ────────────────────────────────── */
  #pricing {
    background: linear-gradient(160deg, var(--wood-dark) 0%, #1e0d04 60%, var(--wood-700) 100%);
    padding: 110px 5%;
    position: relative;
    overflow: hidden;
  }
  #pricing::before {
    content: '';
    position: absolute;
    top: -40%;
    left: -20%;
    width: 80%;
    height: 160%;
    background: radial-gradient(ellipse, rgba(196,149,85,0.07) 0%, transparent 70%);
    pointer-events: none;
  }
  #pricing .section-tag { color: var(--wood-300); }
  #pricing h2 { color: var(--wood-100); }
  #pricing .section-sub { color: var(--wood-300); }

  /* Currency switcher */
  .currency-switcher {
    display: flex;
    gap: 8px;
    justify-content: center;
    margin: 36px 0 56px;
    background: rgba(255,255,255,0.05);
    border: 1px solid rgba(196,149,85,0.2);
    border-radius: 50px;
    padding: 5px;
    width: fit-content;
    margin-left: auto;
    margin-right: auto;
  }
  .currency-btn {
    padding: 8px 20px;
    border-radius: 40px;
    border: none;
    background: transparent;
    color: var(--wood-400);
    font-family: 'Space Mono', monospace;
    font-size: 0.78rem;
    cursor: pointer;
    transition: all 0.25s ease;
    letter-spacing: 0.04em;
  }
  .currency-btn.active {
    background: linear-gradient(135deg, var(--wood-500), var(--wood-400));
    color: white;
    box-shadow: 0 4px 16px rgba(176,124,58,0.4);
  }
  .currency-btn:hover:not(.active) { color: var(--wood-200); background: rgba(255,255,255,0.06); }

  /* Pricing grid */
  .pricing-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 20px;
    max-width: 1320px;
    margin: 0 auto 80px;
    align-items: start;
  }
  @media(max-width:1100px) { .pricing-grid { grid-template-columns: repeat(2,1fr); } }
  @media(max-width:640px)  { .pricing-grid { grid-template-columns: 1fr; } }

  .pricing-card {
    background: rgba(255,255,255,0.04);
    border: 1px solid rgba(196,149,85,0.18);
    border-radius: 24px;
    padding: 32px 28px;
    position: relative;
    transition: transform 0.3s ease, box-shadow 0.3s ease, border-color 0.3s ease;
    display: flex;
    flex-direction: column;
  }
  .pricing-card:hover {
    transform: translateY(-8px);
    box-shadow: 0 24px 60px rgba(0,0,0,0.4);
    border-color: rgba(196,149,85,0.45);
  }
  .pricing-card.featured {
    background: linear-gradient(160deg, rgba(176,124,58,0.18) 0%, rgba(196,149,85,0.08) 100%);
    border-color: rgba(196,149,85,0.5);
    box-shadow: 0 16px 50px rgba(0,0,0,0.35);
  }
  .pricing-card.future {
    background: rgba(255,255,255,0.02);
    border-style: dashed;
    border-color: rgba(196,149,85,0.2);
    opacity: 0.75;
  }
  .pricing-badge {
    position: absolute;
    top: -13px;
    left: 50%;
    transform: translateX(-50%);
    background: linear-gradient(135deg, var(--wood-500), var(--wood-300));
    color: white;
    font-size: 0.65rem;
    font-family: 'Space Mono', monospace;
    letter-spacing: 0.1em;
    padding: 4px 14px;
    border-radius: 20px;
    white-space: nowrap;
    box-shadow: 0 4px 16px rgba(176,124,58,0.5);
  }
  .pricing-img-wrap {
    width: 100%;
    aspect-ratio: 4/3;
    border-radius: 14px;
    overflow: hidden;
    background: linear-gradient(135deg, rgba(255,255,255,0.04), rgba(255,255,255,0.02));
    border: 1px solid rgba(196,149,85,0.15);
    margin-bottom: 18px;
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  .pricing-img-wrap img {
    width: 100%; height: 100%;
    object-fit: cover;
    border-radius: 14px;
    transition: transform 0.4s ease;
  }
  .pricing-card:hover .pricing-img-wrap img { transform: scale(1.04); }
  .pricing-img-ph {
    display: flex; flex-direction: column; align-items: center;
    justify-content: center; gap: 8px; width: 100%; height: 100%;
  }
  .pricing-icon {
    font-size: 2.4rem;
    margin-bottom: 10px;
    display: block;
  }
  .pricing-tier {
    font-family: 'Space Mono', monospace;
    font-size: 0.65rem;
    color: var(--wood-400);
    letter-spacing: 0.12em;
    text-transform: uppercase;
    margin-bottom: 6px;
  }
  .pricing-name {
    font-family: 'Playfair Display', serif;
    font-size: 1.3rem;
    color: var(--wood-100);
    margin-bottom: 4px;
    line-height: 1.2;
  }
  .pricing-tagline {
    font-size: 0.8rem;
    color: var(--wood-400);
    margin-bottom: 20px;
    line-height: 1.4;
  }
  .pricing-price {
    margin-bottom: 24px;
  }
  .pricing-amount {
    font-family: 'Playfair Display', serif;
    font-size: 2.4rem;
    color: var(--wood-200);
    font-weight: 700;
    line-height: 1;
    display: flex;
    align-items: baseline;
    gap: 4px;
  }
  .pricing-amount .currency-sym {
    font-size: 1.1rem;
    color: var(--wood-400);
    font-family: 'DM Sans', sans-serif;
  }
  .pricing-amount .price-val { color: var(--wood-100); }
  .pricing-future-tag {
    font-family: 'Space Mono', monospace;
    font-size: 0.78rem;
    color: var(--wood-500);
    letter-spacing: 0.05em;
    padding: 6px 0;
  }
  .pricing-divider {
    height: 1px;
    background: rgba(196,149,85,0.15);
    margin: 0 0 20px;
  }
  .pricing-features {
    list-style: none;
    padding: 0;
    margin: 0 0 28px;
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 10px;
  }
  .pricing-features li {
    font-size: 0.82rem;
    color: var(--wood-300);
    display: flex;
    align-items: flex-start;
    gap: 9px;
    line-height: 1.4;
  }
  .pricing-features li .feat-icon {
    flex-shrink: 0;
    font-size: 0.9rem;
    margin-top: 1px;
  }
  .pricing-specs {
    background: rgba(255,255,255,0.04);
    border-radius: 10px;
    padding: 10px 14px;
    margin-bottom: 22px;
    font-size: 0.74rem;
    color: var(--wood-400);
    font-family: 'Space Mono', monospace;
    line-height: 1.7;
  }
  .pricing-order-btn {
    width: 100%;
    padding: 13px;
    border-radius: 12px;
    border: none;
    font-family: 'DM Sans', sans-serif;
    font-size: 0.9rem;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.25s ease;
  }
  .pricing-order-btn.primary {
    background: linear-gradient(135deg, var(--wood-500), var(--wood-300));
    color: white;
    box-shadow: 0 6px 20px rgba(176,124,58,0.35);
  }
  .pricing-order-btn.primary:hover {
    transform: translateY(-2px);
    box-shadow: 0 10px 28px rgba(176,124,58,0.5);
  }
  .pricing-order-btn.secondary {
    background: rgba(255,255,255,0.07);
    color: var(--wood-300);
    border: 1px solid rgba(196,149,85,0.3);
  }
  .pricing-order-btn.secondary:hover { background: rgba(255,255,255,0.11); color: var(--wood-200); }
  .pricing-order-btn.disabled {
    background: rgba(255,255,255,0.04);
    color: var(--wood-600);
    border: 1px dashed rgba(196,149,85,0.2);
    cursor: default;
  }

  /* Order modal */
  #order-modal-overlay {
    display: none;
    position: fixed;
    inset: 0;
    z-index: 9993;
    background: rgba(0,0,0,0.75);
    backdrop-filter: blur(6px);
    align-items: center;
    justify-content: center;
    padding: 20px;
  }
  #order-modal-overlay.open { display: flex; }
  #order-modal {
    background: var(--wood-dark);
    border: 1.5px solid rgba(196,149,85,0.35);
    border-radius: 24px;
    padding: 36px 40px;
    width: 100%;
    max-width: 520px;
    max-height: 90vh;
    overflow-y: auto;
    position: relative;
    box-shadow: 0 40px 100px rgba(0,0,0,0.7);
  }
  #order-modal h3 {
    font-family: 'Playfair Display', serif;
    color: var(--wood-100);
    font-size: 1.4rem;
    margin-bottom: 6px;
  }
  #order-modal .order-product-info {
    font-size: 0.78rem;
    color: var(--wood-400);
    font-family: 'Space Mono', monospace;
    margin-bottom: 24px;
    padding-bottom: 16px;
    border-bottom: 1px solid rgba(196,149,85,0.15);
  }
  #order-modal .form-group { margin-bottom: 14px; }
  #order-modal .form-group label {
    display: block;
    font-size: 0.75rem;
    font-family: 'Space Mono', monospace;
    color: var(--wood-400);
    margin-bottom: 5px;
    letter-spacing: 0.05em;
  }
  #order-modal .form-group input,
  #order-modal .form-group textarea,
  #order-modal .form-group select {
    width: 100%;
    padding: 11px 14px;
    border-radius: 10px;
    border: 1.5px solid rgba(196,149,85,0.2);
    background: rgba(255,255,255,0.05);
    color: var(--wood-100);
    font-family: 'DM Sans', sans-serif;
    font-size: 0.88rem;
    outline: none;
    transition: border-color 0.2s;
    box-sizing: border-box;
  }
  #order-modal .form-group input:focus,
  #order-modal .form-group textarea:focus { border-color: var(--wood-400); }
  #order-modal .form-group select option { background: var(--wood-dark); }
  #order-modal .order-submit-btn {
    width: 100%;
    padding: 14px;
    margin-top: 8px;
    border-radius: 12px;
    border: none;
    background: linear-gradient(135deg, var(--wood-500), var(--wood-300));
    color: white;
    font-family: 'DM Sans', sans-serif;
    font-weight: 700;
    font-size: 0.95rem;
    cursor: pointer;
    transition: all 0.25s ease;
    box-shadow: 0 6px 20px rgba(176,124,58,0.35);
  }
  #order-modal .order-submit-btn:hover { transform: translateY(-2px); box-shadow: 0 10px 28px rgba(176,124,58,0.5); }
  #order-modal .order-close-btn {
    position: absolute;
    top: 14px;
    right: 16px;
    background: rgba(255,255,255,0.07);
    border: none;
    color: var(--wood-400);
    width: 32px;
    height: 32px;
    border-radius: 50%;
    cursor: pointer;
    font-size: 1rem;
    transition: all 0.2s;
  }
  #order-modal .order-close-btn:hover { background: rgba(200,50,50,0.3); color: white; }
  .order-success {
    display: none;
    text-align: center;
    padding: 20px 0;
    color: var(--wood-200);
  }
  .order-success .success-icon { font-size: 3rem; margin-bottom: 12px; }
  .order-success h4 { font-family: 'Playfair Display', serif; font-size: 1.3rem; margin-bottom: 8px; }
  .order-success p { font-size: 0.85rem; color: var(--wood-400); line-height: 1.6; }
</style>
</head>
<body>

<!-- ── PAGE LOADER ────────────────────────────────── -->
<div id="loader">
  <div class="loader-logo">Ai<span>Do</span>Bot</div>
  <div class="loader-bar"><div class="loader-fill"></div></div>
</div>

<!-- ── LIGHTBOX ───────────────────────────────────── -->
<div id="lightbox">
  <span id="lightbox-close">✕</span>
  <div id="lightbox-content"></div>
</div>

<!-- ── NAVBAR ─────────────────────────────────────── -->
<nav id="navbar">
  <div class="nav-logo">Ai<span>Do</span>Bot</div>
  <ul class="nav-links">
    <li><a href="#about">About</a></li>
    <li><a href="#journey">How It Works</a></li>
    <li><a href="#usecases">Use Cases</a></li>
    <li><a href="#gallery">Gallery</a></li>
    <li><a href="#video-reviews">Reviews</a></li>
    <li><a href="#team">Team</a></li>
    <li><a href="#pricing">Pricing</a></li>
    <li><a href="#contact">Contact</a></li>
  </ul>
  <div class="nav-cta">
    <button class="btn btn-primary" onclick="document.getElementById('contact').scrollIntoView({behavior:'smooth'})">Request a Demo</button>
  </div>
  <div class="hamburger" onclick="toggleMenu()">
    <span></span><span></span><span></span>
  </div>
</nav>

<!-- ── HERO ───────────────────────────────────────── -->
<section id="hero">
  <div class="hero-inner container">
    <div class="hero-left reveal">
      <div class="hero-badge">AI-Powered Medical Robot • Next-Gen Healthcare</div>
      <h1 class="hero-title">Healthcare that <em>comes to you.</em></h1>
      <p class="hero-sub">AiDoBot checks your vitals, speaks your language, connects you with a doctor, and arranges your medicine — anywhere in the world.</p>
      <div class="hero-actions">
        <button class="btn btn-primary" onclick="document.getElementById('journey').scrollIntoView({behavior:'smooth'})">See How It Works →</button>
        <button class="btn btn-outline" onclick="document.getElementById('contact').scrollIntoView({behavior:'smooth'})">Request a Demo</button>
      </div>
      <div class="hero-vitals" id="hero-vitals">
        <div class="vital-card"><div class="vital-icon">❤️</div><div class="vital-label">Heart Rate</div><div class="vital-value">72 bpm</div></div>
        <div class="vital-card"><div class="vital-icon">🫁</div><div class="vital-label">SpO₂</div><div class="vital-value">98%</div></div>
        <div class="vital-card"><div class="vital-icon">🌡️</div><div class="vital-label">Temperature</div><div class="vital-value">36.7°C</div></div>
        <div class="vital-card"><div class="vital-icon">💓</div><div class="vital-label">Blood Pressure</div><div class="vital-value">118/76</div></div>
      </div>
    </div>
    <div class="hero-visual reveal">
      <div class="hero-slider-wrap" id="hero-robot-wrap">
        <div class="hero-slides" id="hero-slides">
          <div class="hero-slide active">
            <div class="ph-box hero-robot-placeholder" id="robot-placeholder"><div class="ph-icon">🤖</div><div class="ph-label">Coming soon</div></div>
          </div>
        </div>
        <div class="hero-dots" id="hero-dots"><button class="hero-dot active"></button></div>
      </div>
      <div class="orbit-chip c1">🔬 Face Analysis AI</div>
      <div class="orbit-chip c2">📡 Live Doctor Call</div>
      <div class="orbit-chip c3">💊 Medicine Delivery</div>
      <div class="orbit-chip c4">🌐 24/7 Anywhere</div>
    </div>
  </div>
</section>

<!-- ── SHORTS REVIEWS ──────────────────────────────── -->
<section id="reviews" class="section-pad">
  <div class="container">
    <div class="reveal">
      <div class="section-tag">Reviews</div>
      <h2 class="section-title">What People Say</h2>
      <p class="section-sub">Real people. Real reactions.</p>
    </div>
    <div class="shorts-grid reveal" id="shorts-container" style="margin-top:36px">
      <!-- Populated by JS -->
    </div>
  </div>
</section>

<!-- ── MARQUEE ─────────────────────────────────────── -->
<div class="marquee-section">
  <div class="marquee-track" id="marquee-track"></div>
</div>

<!-- ── STATS ───────────────────────────────────────── -->
<section id="stats">
  <div class="stats-grid">
    <div class="stat-item reveal"><div class="stat-num" id="stat-accuracy">0<sup>%</sup></div><div class="stat-label">Accuracy Rate</div></div>
    <div class="stat-item reveal"><div class="stat-num" style="color:var(--wood-200)">24<sup>/7</sup></div><div class="stat-label">Availability</div></div>
    <div class="stat-item reveal"><div class="stat-num" id="stat-timesaved">0<sup>%</sup></div><div class="stat-label">Time Saved per Patient</div></div>
    <div class="stat-item reveal"><div class="stat-num" id="stat-screenings">0<sup>+</sup></div><div class="stat-label">Daily Screenings</div></div>
  </div>
</section>

<!-- ── ABOUT ───────────────────────────────────────── -->
<section id="about" class="section-pad">
  <div class="container">
    <div class="about-grid">
      <div class="about-images reveal" id="about-images">
        <div class="about-img-card big" data-slot="0"><div class="ph-box"><div class="ph-icon">🤖</div><div class="ph-label">AiDoBot in action</div></div></div>
        <div class="about-img-card" data-slot="1"><div class="ph-box"><div class="ph-icon">🌡️</div><div class="ph-label">Temperature check</div></div></div>
        <div class="about-img-card" data-slot="2"><div class="ph-box"><div class="ph-icon">⚖️</div><div class="ph-label">Weight measurement</div></div></div>
      </div>
      <div class="reveal">
        <div class="section-tag">About AiDoBot</div>
        <h2 class="section-title">Revolutionising Healthcare Access</h2>
        <p class="section-sub">AiDoBot is a modular, AI-powered medical robot designed to automate patient screening, reduce workload on medical professionals, and bring quality healthcare to everyone — in hospitals, clinics, homes, and communities worldwide.</p>
        <div class="features-list">
          <div class="feature-item"><div class="feature-check">✓</div><div class="feature-text">Real-time vitals — heart rate, oxygen, temperature, blood pressure, weight & height</div></div>
          <div class="feature-item"><div class="feature-check">✓</div><div class="feature-text">Speaks multiple languages including local and regional languages</div></div>
          <div class="feature-item"><div class="feature-check">✓</div><div class="feature-text">AI face analysis — emotion, pallor, fatigue detection</div></div>
          <div class="feature-item"><div class="feature-check">✓</div><div class="feature-text">Live video consultation with verified doctors worldwide</div></div>
          <div class="feature-item"><div class="feature-check">✓</div><div class="feature-text">Digital prescriptions and medicine home delivery</div></div>
        </div>
        <div style="margin-top:28px">
          <button class="btn btn-primary" onclick="document.getElementById('contact').scrollIntoView({behavior:'smooth'})">Request a Demo →</button>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- ── JOURNEY ─────────────────────────────────────── -->
<section id="journey" class="section-pad">
  <div class="container">
    <div class="reveal" style="text-align:center;margin-bottom:48px">
      <div class="section-tag">How It Works</div>
      <h2 class="section-title">From Greeting to Recovery</h2>
      <p class="section-sub" style="margin:0 auto">Watch AiDoBot in action at every stage of the patient journey.</p>
    </div>
    <div class="journey-grid" id="journey-grid">
      <!-- Populated by JS -->
    </div>
  </div>
</section>

<!-- ── USE CASES ───────────────────────────────────── -->
<section id="usecases" class="section-pad">
  <div class="container">
    <div class="reveal" style="margin-bottom:48px">
      <div class="section-tag">Use Cases</div>
      <h2 class="section-title">Anywhere People Need Care</h2>
      <p class="section-sub">AiDoBot is built for multi-sector deployment — from busy hospitals to remote communities worldwide.</p>
    </div>
    <div class="usecase-grid reveal">
      <div class="usecase-card" data-badge="High Impact"><div class="usecase-icon">🏥</div><h3>Hospitals & Clinics</h3><p>Automated triage. Doctors receive a full patient report before the consultation — cutting waiting times dramatically.</p></div>
      <div class="usecase-card" data-badge="Underserved Areas"><div class="usecase-icon">🏘️</div><h3>Remote Communities</h3><p>No health post nearby? One robot in a community centre gives an entire area access to screening and live doctor consultations.</p></div>
      <div class="usecase-card" data-badge="24/7 Care"><div class="usecase-icon">🏠</div><h3>Homes & Families</h3><p>Checks vitals daily, speaks your language, calls a doctor at 2am when an elder has chest pain — from the comfort of home.</p></div>
      <div class="usecase-card" data-badge="Prevention"><div class="usecase-icon">🏫</div><h3>Schools & Universities</h3><p>Quick student health checks. Fever, low oxygen, or heart irregularities are caught immediately — before they become serious.</p></div>
      <div class="usecase-card" data-badge="Safe Dispensing"><div class="usecase-icon">💊</div><h3>Pharmacies</h3><p>Customers screen before buying medicine. If a concern is detected, connected to a doctor instantly — preventing dangerous self-medication.</p></div>
      <div class="usecase-card" data-badge="Workforce Health"><div class="usecase-icon">🏛️</div><h3>Government & Offices</h3><p>Employee health monitoring at work. Early detection of conditions, reduced sick days — all from one device.</p></div>
      <div class="usecase-card" data-badge="Community"><div class="usecase-icon">🛒</div><h3>Markets & Public Spaces</h3><p>Free screening points in busy markets, stations, and public gatherings — healthcare where the people already are.</p></div>
      <div class="usecase-card" data-badge="Global Access"><div class="usecase-icon">🏨</div><h3>Hotels & Tourism</h3><p>Visitors feel unwell? The robot speaks their language and connects them to a doctor — no navigating a foreign health system.</p></div>
      <div class="usecase-card" data-badge="Operational Health"><div class="usecase-icon">🎖️</div><h3>Military & Security</h3><p>Routine health monitoring for officers. Fit-for-duty checks, injury assessment, and stress monitoring.</p></div>
    </div>
  </div>
</section>

<!-- ── GALLERY ─────────────────────────────────────── -->
<section id="gallery" class="section-pad">
  <div class="container">
    <div class="reveal" style="margin-bottom:0">
      <div class="section-tag">Gallery</div>
      <h2 class="section-title">See AiDoBot in Action</h2>
    </div>
    <div class="gallery-grid reveal" id="gallery-grid">
      <div class="gal-item g1"><div class="ph-box"><div class="ph-icon">🏥</div><div class="ph-label">AiDoBot in action</div></div></div>
      <div class="gal-item g2"><div class="ph-box"><div class="ph-icon">🌡️</div><div class="ph-label">Temperature check</div></div></div>
      <div class="gal-item g3"><div class="ph-box"><div class="ph-icon">❤️</div><div class="ph-label">Heart rate scan</div></div></div>
      <div class="gal-item g4"><div class="ph-box"><div class="ph-icon">⚖️</div><div class="ph-label">Weight & height</div></div></div>
      <div class="gal-item g5"><div class="ph-box"><div class="ph-icon">📡</div><div class="ph-label">Doctor consultation</div></div></div>
    </div>
  </div>
</section>

<!-- ── VIDEO REVIEWS ───────────────────────────────── -->
<section id="video-reviews" class="section-pad">
  <div class="container">
    <div class="reveal" style="text-align:center;margin-bottom:48px">
      <div class="section-tag">Feedback & Reviews</div>
      <h2 class="section-title">What People Are Saying</h2>
      <p class="section-sub" style="margin:0 auto">Real experiences from patients, healthcare professionals, and community members worldwide.</p>
    </div>
    <div class="video-reviews-grid" id="video-reviews-grid">
      <!-- Populated by JS -->
    </div>
  </div>
</section>

<!-- ── TEAM ────────────────────────────────────────── -->
<section id="team" class="section-pad" style="background:white">
  <div class="container">
    <div class="reveal" style="text-align:center;margin-bottom:48px">
      <div class="section-tag">Our Team</div>
      <h2 class="section-title">The Minds Behind AiDoBot</h2>
    </div>
    <div class="team-grid reveal" id="team-grid">
      <!-- Populated by JS -->
    </div>
  </div>
</section>

<!-- ── EVENTS ──────────────────────────────────────── -->
<section id="events" class="section-pad">
  <div class="container">
    <div class="reveal" style="margin-bottom:48px">
      <div class="section-tag">Events</div>
      <h2 class="section-title">Upcoming Events</h2>
      <p class="section-sub">Conferences, demos, community screenings — find AiDoBot near you.</p>
    </div>
    <div class="events-grid reveal" id="events-grid">
      <!-- Populated by JS -->
    </div>
  </div>
</section>

<!-- ── ANNOUNCEMENTS ───────────────────────────────── -->
<section id="announcements" class="section-pad">
  <div class="container">
    <div class="reveal" style="margin-bottom:48px">
      <div class="section-tag">Announcements</div>
      <h2 class="section-title">Latest News</h2>
    </div>
    <div class="announce-list reveal" id="announce-list">
      <!-- Populated by JS -->
    </div>
  </div>
</section>

<!-- ── PRICING ────────────────────────────────────── -->
<section id="pricing">
  <div class="container" style="max-width:1400px;margin:auto">
    <div style="text-align:center" class="reveal">
      <div class="section-tag">Products & Pricing</div>
      <h2 class="section-title" style="color:var(--wood-100)">Choose Your AiDoBot</h2>
      <p class="section-sub" style="color:var(--wood-300)">Hospital-grade AI healthcare for every setting — home, community, or institution.</p>
    </div>

    <!-- Currency Switcher -->
    <div class="currency-switcher reveal" id="currency-switcher">
      <button class="currency-btn active" onclick="setCurrency('USD','$')">$ USD</button>
      <button class="currency-btn" onclick="setCurrency('INR','₹')">₹ INR</button>
      <button class="currency-btn" onclick="setCurrency('GMD','D')">D GMD</button>
      <button class="currency-btn" onclick="setCurrency('GBP','£')">£ GBP</button>
    </div>

    <!-- Pricing Cards -->
    <div class="pricing-grid">

      <!-- HOME -->
      <div class="pricing-card reveal">
        <div class="pricing-img-wrap">
          <div class="ph-box" id="pimg-home-ph"><div class="ph-icon">🏠</div><div class="ph-label">Home Edition</div></div>
          <img id="pimg-home" src="" alt="Home Edition" style="display:none;position:absolute;inset:0"/>
        </div>
        <div class="pricing-tier">Individual</div>
        <div class="pricing-name">Home Edition</div>
        <div class="pricing-tagline">Your personal health companion, always at home.</div>
        <div class="pricing-price">
          <div class="pricing-amount">
            <span class="currency-sym" id="sym-home">$</span>
            <span class="price-val" id="price-home">999</span>
          </div>
        </div>
        <div class="pricing-divider"></div>
        <ul class="pricing-features">
          <li><span class="feat-icon">❤️</span><span>Vital Monitoring — heart rate, SpO2, temperature, weight, height, blood pressure</span></li>
          <li><span class="feat-icon">🧠</span><span>AI Health Assistant — speaks Wolof, English, Hindi & more</span></li>
          <li><span class="feat-icon">😊</span><span>Face Analysis — emotion, fatigue, pallor & age detection</span></li>
          <li><span class="feat-icon">👁️</span><span>Face Tracking — camera always keeps you in frame</span></li>
          <li><span class="feat-icon">🩺</span><span>Live Doctor Calling via video call</span></li>
          <li><span class="feat-icon">📋</span><span>Health Interview with risk level result</span></li>
          <li><span class="feat-icon">💊</span><span>Medicine Delivery to your home</span></li>
          <li><span class="feat-icon">📁</span><span>Lifetime Health Records</span></li>
        </ul>
        <div class="pricing-specs">
          📺 7" touchscreen · 1 camera<br/>
          🌐 Wolof, English, Hindi + more<br/>
          🏠 Compact & lightweight
        </div>
        <button class="pricing-order-btn secondary" onclick="openOrderModal('Home Edition','home')">Order Now →</button>
      </div>

      <!-- COMMUNITY (featured) -->
      <div class="pricing-card featured reveal">
        <div class="pricing-badge">⭐ Most Popular</div>
        <div class="pricing-img-wrap">
          <div class="ph-box" id="pimg-community-ph"><div class="ph-icon">🏘️</div><div class="ph-label">Community Edition</div></div>
          <img id="pimg-community" src="" alt="Community Edition" style="display:none;position:absolute;inset:0"/>
        </div>
        <div class="pricing-tier">Community</div>
        <div class="pricing-name">Shared Edition</div>
        <div class="pricing-tagline">Bringing healthcare to your entire community.</div>
        <div class="pricing-price">
          <div class="pricing-amount">
            <span class="currency-sym" id="sym-community">$</span>
            <span class="price-val" id="price-community">1,999</span>
          </div>
        </div>
        <div class="pricing-divider"></div>
        <ul class="pricing-features">
          <li><span class="feat-icon">❤️</span><span>Full vital check for every person who walks up</span></li>
          <li><span class="feat-icon">🧠</span><span>AI speaks each patient's language automatically</span></li>
          <li><span class="feat-icon">😊</span><span>Face Analysis for every patient</span></li>
          <li><span class="feat-icon">👁️</span><span>Auto face tracking locks onto each new patient</span></li>
          <li><span class="feat-icon">🩺</span><span>Any patient can call a doctor instantly</span></li>
          <li><span class="feat-icon">📋</span><span>Guided voice interview with automatic risk scoring</span></li>
          <li><span class="feat-icon">💊</span><span>Prescriptions delivered to patient's home</span></li>
          <li><span class="feat-icon">📁</span><span>Shared patient records — each person gets their own</span></li>
        </ul>
        <div class="pricing-specs">
          📺 10" touchscreen · 1 camera<br/>
          🌐 Full multilingual support<br/>
          🏘️ Built for heavy daily use
        </div>
        <button class="pricing-order-btn primary" onclick="openOrderModal('Community Shared Edition','community')">Order Now →</button>
      </div>

      <!-- GOVERNMENT -->
      <div class="pricing-card reveal">
        <div class="pricing-img-wrap">
          <div class="ph-box" id="pimg-gov-ph"><div class="ph-icon">🏛️</div><div class="ph-label">Institutional Edition</div></div>
          <img id="pimg-gov" src="" alt="Institutional Edition" style="display:none;position:absolute;inset:0"/>
        </div>
        <div class="pricing-tier">Government</div>
        <div class="pricing-name">Institutional Edition</div>
        <div class="pricing-tagline">Hospital-grade healthcare infrastructure.</div>
        <div class="pricing-price">
          <div class="pricing-amount">
            <span class="currency-sym" id="sym-gov">$</span>
            <span class="price-val" id="price-gov">3,999</span>
          </div>
        </div>
        <div class="pricing-divider"></div>
        <ul class="pricing-features">
          <li><span class="feat-icon">❤️</span><span>Instant real-time readings for hundreds of patients per day</span></li>
          <li><span class="feat-icon">🧠</span><span>Fastest AI responses for high patient volume</span></li>
          <li><span class="feat-icon">😊</span><span>Real-time face analysis with instant results</span></li>
          <li><span class="feat-icon">👁️</span><span>Dual camera precision tracking system</span></li>
          <li><span class="feat-icon">🩺</span><span>Direct connection to hospital doctors</span></li>
          <li><span class="feat-icon">📋</span><span>Fully automated triage before doctor consultation</span></li>
          <li><span class="feat-icon">💊</span><span>Direct hospital pharmacy + home delivery</span></li>
          <li><span class="feat-icon">📁</span><span>Full patient database — searchable across all robots</span></li>
          <li><span class="feat-icon">📊</span><span>Analytics dashboard — volume, risk, doctor response times</span></li>
          <li><span class="feat-icon">🔗</span><span>Multi-robot management from one dashboard</span></li>
        </ul>
        <div class="pricing-specs">
          📺 15" Full HD touchscreen · 2 cameras<br/>
          🏛️ 24/7 non-stop operation<br/>
          🎖️ Priority 24/7 support included
        </div>
        <button class="pricing-order-btn secondary" onclick="openOrderModal('Government Institutional Edition','gov')">Order Now →</button>
      </div>

      <!-- FUTURE -->
      <div class="pricing-card future reveal">
        <div class="pricing-img-wrap">
          <div class="ph-box" id="pimg-future-ph" style="background:linear-gradient(135deg,rgba(255,255,255,0.03),rgba(255,255,255,0.01))"><div class="ph-icon">🚀</div><div class="ph-label">Coming Soon</div></div>
          <img id="pimg-future" src="" alt="Next Generation" style="display:none;position:absolute;inset:0"/>
        </div>
        <div class="pricing-tier">Coming Soon</div>
        <div class="pricing-name">Next Generation</div>
        <div class="pricing-tagline">The future of AiDoBot — currently in development.</div>
        <div class="pricing-price">
          <div class="pricing-future-tag">Pricing available in next version</div>
        </div>
        <div class="pricing-divider"></div>
        <ul class="pricing-features">
          <li><span class="feat-icon">🤖</span><span>Full autonomous mobility & navigation</span></li>
          <li><span class="feat-icon">🧬</span><span>Advanced genetic & lab integration</span></li>
          <li><span class="feat-icon">🌍</span><span>Global telemedicine network access</span></li>
          <li><span class="feat-icon">⚡</span><span>Real-time AI diagnostics engine</span></li>
          <li><span class="feat-icon">🔮</span><span>Predictive health monitoring & alerts</span></li>
          <li><span class="feat-icon">🏥</span><span>Full hospital OS integration</span></li>
        </ul>
        <div class="pricing-specs">
          🔬 Specs to be announced<br/>
          🌐 Available worldwide<br/>
          📧 Join the waitlist below
        </div>
        <button class="pricing-order-btn disabled">Coming Soon</button>
      </div>

    </div>
  </div>
</section>

<!-- ── ORDER MODAL ─────────────────────────────────── -->
<div id="order-modal-overlay" onclick="if(event.target===this)closeOrderModal()">
  <div id="order-modal">
    <button class="order-close-btn" onclick="closeOrderModal()">✕</button>
    <div id="order-form-wrap">
      <h3>Place Your Order</h3>
      <div class="order-product-info" id="order-product-info">Home Edition — $999</div>
      <div class="form-group">
        <label>Full Name *</label>
        <input type="text" id="ord-name" placeholder="Your full name"/>
      </div>
      <div class="form-group">
        <label>Email Address *</label>
        <input type="email" id="ord-email" placeholder="your@email.com"/>
      </div>
      <div class="form-group">
        <label>Phone / WhatsApp *</label>
        <input type="tel" id="ord-phone" placeholder="+1 234 567 8900"/>
      </div>
      <div class="form-group">
        <label>Organisation / Hospital (optional)</label>
        <input type="text" id="ord-org" placeholder="Where are you from?"/>
      </div>
      <div class="form-group">
        <label>Delivery Country *</label>
        <input type="text" id="ord-country" placeholder="Country"/>
      </div>
      <div class="form-group">
        <label>Full Delivery Address *</label>
        <textarea id="ord-address" rows="2" placeholder="Street address, city, postal code…"></textarea>
      </div>
      <div class="form-group">
        <label>Quantity</label>
        <select id="ord-qty">
          <option>1</option><option>2</option><option>3</option>
          <option>5</option><option>10</option><option>Custom — contact us</option>
        </select>
      </div>
      <div class="form-group">
        <label>Notes (optional)</label>
        <textarea id="ord-notes" rows="2" placeholder="Any special requirements or questions…"></textarea>
      </div>
      <button class="order-submit-btn" onclick="submitOrder()">Confirm Order →</button>
    </div>
    <div class="order-success" id="order-success">
      <div class="success-icon">✅</div>
      <h4>Order Received!</h4>
      <p>Thank you. We've received your order and will contact you within 24 hours to confirm details and arrange delivery.</p>
      <p style="margin-top:12px">Questions? WhatsApp us at +91 8800 510 790</p>
    </div>
  </div>
</div>

<!-- ── PARTNERS ────────────────────────────────────── -->
<section id="partners">
  <div class="container">
    <div class="section-tag">Partners</div>
    <h2>Our Network & Supporters</h2>
    <div class="partners-grid reveal" id="partners-grid">
      <!-- Populated by JS -->
    </div>
  </div>
</section>

<!-- ── SOCIAL / YOUTUBE ────────────────────────────── -->
<section id="social" class="section-pad">
  <div class="container">
    <div class="social-inner">
      <div class="reveal">
        <div class="section-tag">Follow Us</div>
        <h2 class="section-title">Stay Connected</h2>
        <p class="section-sub">Follow AiDoBot for updates, patient stories, live demos, and behind-the-scenes footage.</p>
        <div class="social-links" id="social-links">
          <a href="#" class="social-btn" id="yt-link">▶ YouTube</a>
          <a href="#" class="social-btn" id="fb-link">f Facebook</a>
          <a href="#" class="social-btn" id="ig-link">📷 Instagram</a>
          <a href="#" class="social-btn" id="wa-link">💬 WhatsApp</a>
        </div>
      </div>
      <div class="reveal">
        <div class="yt-embed" id="yt-embed"><span>▶</span><p>Latest video will appear here</p></div>
      </div>
    </div>
  </div>
</section>

<!-- ── CONTACT ─────────────────────────────────────── -->
<section id="contact">
  <div class="container">
    <div class="section-tag">Contact</div>
    <h2>Ready to Bring AiDoBot to You?</h2>
    <div class="contact-inner" style="margin-top:48px">
      <div class="reveal">
        <div class="contact-info">
          <div class="contact-item">
            <div class="contact-item-icon">📧</div>
            <div><div class="contact-item-label">Email</div><div class="contact-item-val" id="ci-email1">hello@aidoBot.com</div></div>
          </div>
          <div class="contact-item">
            <div class="contact-item-icon">💬</div>
            <div><div class="contact-item-label">WhatsApp</div><div class="contact-item-val" id="ci-whatsapp">+91 8800 510 790</div></div>
          </div>
          <div class="contact-item">
            <div class="contact-item-icon">🌍</div>
            <div><div class="contact-item-label">Deployment</div><div class="contact-item-val" id="ci-deployment">Available worldwide — hospitals, clinics, communities, homes.</div></div>
          </div>
          <div class="contact-item">
            <div class="contact-item-icon">🤝</div>
            <div><div class="contact-item-label">Partnerships</div><div class="contact-item-val" id="ci-partnerships">Ministries of Health, hospitals, NGOs — let's build together.</div></div>
          </div>
        </div>
      </div>
      <div class="contact-form reveal">
        <div class="form-row">
          <div class="form-group"><label class="admin-label">First Name</label><input class="admin-input" id="cf-first" placeholder="First name"/></div>
          <div class="form-group"><label class="admin-label">Last Name</label><input class="admin-input" id="cf-last" placeholder="Last name"/></div>
        </div>
        <div class="form-group"><label class="admin-label">Email</label><input class="admin-input" id="cf-email" type="email" placeholder="your@email.com"/></div>
        <div class="form-group"><label class="admin-label">Organisation / Hospital / Ministry</label><input class="admin-input" id="cf-org" placeholder="Where are you from?"/></div>
        <div class="form-group"><label class="admin-label">Message</label><textarea class="admin-input" id="cf-msg" rows="4" placeholder="Tell us about your interest in AiDoBot…"></textarea></div>
        <button class="btn btn-primary" onclick="submitContact()">Send Message →</button>
        <div class="form-success" id="cf-success">✓ Message sent! We'll respond within 24 hours.</div>
      </div>
    </div>
  </div>
</section>

<!-- ── FOOTER ──────────────────────────────────────── -->
<footer>
  <div class="footer-inner">
    <div class="footer-top">
      <div>
        <div class="footer-logo">Ai<span>Do</span>Bot</div>
        <p class="footer-desc">AI-powered healthcare that reaches everyone — hospitals, communities, homes, and public spaces. Speaking your language. Saving lives.</p>
      </div>
      <div class="footer-col">
        <h4>Product</h4>
        <a href="#journey">How It Works</a>
        <a href="#pricing">Pricing</a>
        <a href="#usecases">Use Cases</a>
        <a href="#gallery">Gallery</a>
        <a href="#events">Events</a>
      </div>
      <div class="footer-col">
        <h4>Company</h4>
        <a href="#about">About Us</a>
        <a href="#team">Our Team</a>
        <a href="#partners">Partners</a>
        <a href="#video-reviews">Reviews</a>
      </div>
      <div class="footer-col">
        <h4>Contact</h4>
        <a href="mailto:hello@aidoBot.com">hello@aidoBot.com</a>
        <a href="#">Privacy Policy</a>
        <a href="#">Terms of Service</a>
      </div>
    </div>
    <div class="footer-bottom">
      <div class="footer-copy">© 2026 AiDoBot. All rights reserved. — AiDoBot Technologies</div>
      <div class="footer-copy">Designed for the world.</div>
    </div>
  </div>
</footer>

<!-- ── AI ROBOT POPUP ─────────────────────────────── -->
<!-- ── AI AVATAR POPUP (centered modal, voice chat) ──── -->
<div id="ai-popup-overlay" style="display:none;position:fixed;inset:0;z-index:9990;background:rgba(0,0,0,0.6);pointer-events:auto;transition:background 0.4s;backdrop-filter:blur(4px)">
  <div id="ai-popup-card" style="
    position:fixed;top:50%;left:50%;transform:translate(-50%,-50%) scale(0.85);
    background:#0d0a07;border:1.5px solid var(--wood-600);
    border-radius:24px;overflow:hidden;
    width:min(480px,92vw);
    box-shadow:0 32px 100px rgba(0,0,0,0.85);
    opacity:0;transition:transform 0.45s cubic-bezier(0.34,1.4,0.64,1),opacity 0.35s ease;
    pointer-events:auto;z-index:9991;
  ">
    <!-- AVATAR VIDEO AREA -->
    <div style="position:relative;width:100%;aspect-ratio:16/9;background:#000;overflow:hidden;">
      <!-- Silent video (idle) -->
      <video id="avatar-idle" autoplay muted loop playsinline
        style="position:absolute;inset:0;width:100%;height:100%;object-fit:cover;transition:opacity 0.3s">
      </video>
      <!-- Talking video (while AI speaks / user speaks) -->
      <video id="avatar-talk" muted loop playsinline
        style="position:absolute;inset:0;width:100%;height:100%;object-fit:cover;opacity:0;transition:opacity 0.3s">
      </video>
      <!-- Placeholder when no videos uploaded -->
      <div id="avatar-placeholder" style="position:absolute;inset:0;background:#0d0a07;">
        <div class="ph-box" style="border-radius:0;background:linear-gradient(135deg,#1a100a,#0d0807)">
          <div class="ph-icon" style="font-size:3.5rem">🤖</div>
          <div class="ph-label" style="color:rgba(196,149,85,0.6)">AiDoBot AI</div>
        </div>
      </div>
      <!-- Live badge -->
      <div style="position:absolute;top:12px;left:12px;display:flex;align-items:center;gap:6px;
        background:rgba(0,0,0,0.6);backdrop-filter:blur(8px);padding:5px 10px;border-radius:20px">
        <div id="avatar-status-dot" style="width:7px;height:7px;border-radius:50%;background:#4ade80"></div>
        <span style="font-size:0.65rem;font-family:Space Mono,monospace;color:white;letter-spacing:0.05em" id="avatar-status-text">AiDoBot AI</span>
      </div>
      <!-- Speaking bars (shown when AI is talking) -->
      <div id="avatar-speak-bars" style="display:none;position:absolute;bottom:14px;left:50%;transform:translateX(-50%);
        gap:4px;align-items:flex-end;height:22px;background:rgba(0,0,0,0.5);
        padding:4px 10px;border-radius:12px;backdrop-filter:blur(4px);">
        <span class="speak-bar" style="width:3px;background:var(--wood-300);border-radius:2px;animation:speakBar 0.7s ease-in-out infinite 0s;display:inline-block"></span>
        <span class="speak-bar" style="width:3px;background:var(--wood-300);border-radius:2px;animation:speakBar 0.7s ease-in-out infinite 0.12s;display:inline-block"></span>
        <span class="speak-bar" style="width:3px;background:var(--wood-300);border-radius:2px;animation:speakBar 0.7s ease-in-out infinite 0.24s;display:inline-block"></span>
        <span class="speak-bar" style="width:3px;background:var(--wood-300);border-radius:2px;animation:speakBar 0.7s ease-in-out infinite 0.36s;display:inline-block"></span>
        <span class="speak-bar" style="width:3px;background:var(--wood-300);border-radius:2px;animation:speakBar 0.7s ease-in-out infinite 0.48s;display:inline-block"></span>
      </div>
      <!-- Close button -->
      <button onclick="dismissAIPopup()" style="
        position:absolute;top:10px;right:10px;
        background:rgba(0,0,0,0.65);border:1px solid rgba(255,255,255,0.15);
        color:white;width:30px;height:30px;border-radius:50%;
        cursor:pointer;font-size:1rem;line-height:1;
        transition:background 0.2s;
      " onmouseover="this.style.background='rgba(180,60,60,0.8)'" onmouseout="this.style.background='rgba(0,0,0,0.65)'">✕</button>
    </div>

    <!-- CHAT AREA -->
    <div style="padding:16px 18px 14px;">
      <!-- AI text response bubble -->
      <div id="avatar-response" style="
        font-size:0.88rem;color:var(--wood-100);line-height:1.6;
        min-height:44px;margin-bottom:14px;
        background:rgba(255,255,255,0.05);border-radius:12px;
        padding:10px 14px;border:1px solid rgba(255,255,255,0.08);
        font-family:'DM Sans',sans-serif;
      "></div>

      <!-- Voice + text input row -->
      <div style="display:flex;gap:8px;align-items:center;">
        <!-- Mic button -->
        <button id="avatar-mic-btn" onclick="toggleAvatarMic()" style="
          width:44px;height:44px;border-radius:50%;flex-shrink:0;
          background:rgba(255,255,255,0.08);border:1.5px solid rgba(255,255,255,0.2);
          color:white;font-size:1.2rem;cursor:pointer;transition:all 0.2s;
        " title="Hold to speak">🎤</button>
        <!-- Text input -->
        <input id="avatar-text-input" type="text" placeholder="Type or speak to AiDoBot…"
          style="
            flex:1;background:rgba(255,255,255,0.07);border:1.5px solid rgba(255,255,255,0.15);
            border-radius:22px;padding:10px 16px;color:white;font-size:0.85rem;
            font-family:'DM Sans',sans-serif;outline:none;
          "
          onkeydown="if(event.key==='Enter') sendAvatarMessage()"
          onfocus="this.style.borderColor='var(--wood-400)'"
          onblur="this.style.borderColor='rgba(255,255,255,0.15)'"/>
        <!-- Send button -->
        <button onclick="sendAvatarMessage()" style="
          width:44px;height:44px;border-radius:50%;flex-shrink:0;
          background:linear-gradient(135deg,var(--wood-600),var(--wood-400));
          border:none;color:white;font-size:1.1rem;cursor:pointer;transition:transform 0.2s;
        " onmouseover="this.style.transform='scale(1.08)'" onmouseout="this.style.transform='scale(1)'">➤</button>
      </div>
    </div>
  </div>
</div>

<!-- ── AI CHATBOT BUBBLE ────────────────────────────── -->
<div id="chatbot-container" style="position:fixed;bottom:32px;right:92px;z-index:10000">
  <!-- Trigger button -->
  <button id="chatbot-trigger" onclick="toggleChatbot()" style="
    width:58px;height:58px;border-radius:50%;
    background:linear-gradient(135deg,var(--wood-600),var(--wood-400));
    border:2px solid var(--wood-300);
    display:flex;align-items:center;justify-content:center;
    font-size:1.5rem;cursor:pointer;
    box-shadow:0 4px 20px rgba(61,36,8,0.4);
    transition:transform 0.3s,box-shadow 0.3s;
    position:relative;
  " title="Chat with AiDoBot AI" onmouseover="this.style.transform='scale(1.08)'" onmouseout="this.style.transform='scale(1)'">
    💬
    <span id="chat-unread" style="
      display:none;position:absolute;top:-4px;right:-4px;
      background:#e74c3c;color:white;font-size:0.65rem;
      width:18px;height:18px;border-radius:50%;
      font-family:'Space Mono',monospace;line-height:18px;text-align:center;
    ">1</span>
  </button>

  <!-- Chat window -->
  <div id="chatbot-window" style="
    display:none;
    position:absolute;bottom:72px;right:0;
    width:340px;height:480px;
    background:white;border-radius:20px;
    box-shadow:0 16px 60px rgba(61,36,8,0.25);
    border:1px solid var(--wood-200);
    flex-direction:column;overflow:hidden;
  ">
    <!-- Header -->
    <div style="
      background:linear-gradient(135deg,var(--wood-dark),var(--wood-700));
      padding:16px 18px;display:flex;align-items:center;gap:12px;
    ">
      <div style="width:38px;height:38px;border-radius:50%;background:var(--wood-500);display:flex;align-items:center;justify-content:center;font-size:1.3rem" id="cb-avatar-display">🤖</div>
      <div style="flex:1">
        <div style="color:var(--wood-100);font-weight:700;font-size:0.92rem" id="cb-name-display">AiDoBot Assistant</div>
        <div style="color:var(--wood-400);font-size:0.72rem;font-family:'Space Mono',monospace;display:flex;align-items:center;gap:6px">
          <span style="width:6px;height:6px;border-radius:50%;background:#4ade80;display:inline-block"></span>Online · Powered by Groq AI
        </div>
      </div>
      <button onclick="toggleChatbot()" style="background:none;border:none;color:var(--wood-400);cursor:pointer;font-size:1.1rem">✕</button>
    </div>

    <!-- Messages area -->
    <div id="chat-messages" style="
      flex:1;overflow-y:auto;padding:16px;
      display:flex;flex-direction:column;gap:10px;
      background:var(--wood-50);
    "></div>

    <!-- Typing indicator -->
    <div id="chat-typing" style="display:none;padding:0 16px 8px;background:var(--wood-50)">
      <div style="
        display:inline-flex;align-items:center;gap:6px;
        background:white;border:1px solid var(--wood-200);
        padding:8px 14px;border-radius:18px 18px 18px 4px;
      ">
        <span style="width:6px;height:6px;border-radius:50%;background:var(--wood-400);animation:speakBar 0.8s ease-in-out infinite 0s;display:block"></span>
        <span style="width:6px;height:6px;border-radius:50%;background:var(--wood-400);animation:speakBar 0.8s ease-in-out infinite 0.2s;display:block"></span>
        <span style="width:6px;height:6px;border-radius:50%;background:var(--wood-400);animation:speakBar 0.8s ease-in-out infinite 0.4s;display:block"></span>
      </div>
    </div>

    <!-- Input area -->
    <div style="padding:12px 14px;border-top:1px solid var(--wood-200);background:white;display:flex;gap:8px;align-items:flex-end">
      <textarea id="chat-input" placeholder="Ask me about AiDoBot..." rows="1"
        style="
          flex:1;border:1.5px solid var(--wood-200);border-radius:14px;
          padding:10px 14px;font-family:'DM Sans',sans-serif;font-size:0.88rem;
          resize:none;outline:none;transition:border-color 0.2s;
          max-height:90px;overflow-y:auto;line-height:1.4;
        "
        onkeydown="if(event.key==='Enter'&&!event.shiftKey){event.preventDefault();sendChatMessage()}"
        oninput="this.style.height='auto';this.style.height=this.scrollHeight+'px'"
        onfocus="this.style.borderColor='var(--wood-400)'"
        onblur="this.style.borderColor='var(--wood-200)'">
      </textarea>
      <button onclick="sendChatMessage()" style="
        width:40px;height:40px;border-radius:12px;flex-shrink:0;
        background:linear-gradient(135deg,var(--wood-600),var(--wood-400));
        border:none;color:white;cursor:pointer;font-size:1.1rem;
        transition:transform 0.2s;display:flex;align-items:center;justify-content:center;
      " onmouseover="this.style.transform='scale(1.08)'" onmouseout="this.style.transform='scale(1)'">➤</button>
    </div>
  </div>
</div>

<!-- ── ADMIN TRIGGER ───────────────────────────────── -->
<button id="admin-trigger" title="Admin Panel" onclick="openAdmin()">⚙️</button>

<!-- ── ADMIN PANEL ─────────────────────────────────── -->
<div id="admin-overlay">
  <div class="admin-modal">
    <div class="admin-header">
      <h2>🛠 AiDoBot Admin Panel</h2>
      <button class="admin-close" onclick="closeAdmin()">✕</button>
    </div>
    <!-- Login -->
    <div class="admin-login" id="admin-login">
      <h3>Admin Login</h3>
      <p style="font-size:0.85rem;color:var(--text-light)">Enter your admin password to continue</p>
      <input type="password" id="admin-pw" placeholder="Password" onkeydown="if(event.key==='Enter')doLogin()"/>
      <button class="btn btn-primary" onclick="doLogin()">Login</button>
      <div class="err" id="login-err"></div>
    </div>
    <!-- Body -->
    <div class="admin-body" id="admin-body">
      <div class="admin-sidebar">
        <div class="admin-tab active" data-tab="hero" onclick="switchTab('hero')">🏠 Hero Images</div>
        <div class="admin-tab" data-tab="about-img" onclick="switchTab('about-img')">🏥 About Images</div>
        <div class="admin-tab" data-tab="gallery" onclick="switchTab('gallery')">🖼 Gallery</div>
        <div class="admin-tab" data-tab="shorts" onclick="switchTab('shorts')">📱 Short Reviews</div>
        <div class="admin-tab" data-tab="vreviews" onclick="switchTab('vreviews')">🎬 Video Reviews</div>
        <div class="admin-tab" data-tab="journey" onclick="switchTab('journey')">🚶 Journey Videos</div>
        <div class="admin-tab" data-tab="team" onclick="switchTab('team')">👥 Team</div>
        <div class="admin-tab" data-tab="events" onclick="switchTab('events')">📅 Events</div>
        <div class="admin-tab" data-tab="social" onclick="switchTab('social')">📲 Social</div>
        <div class="admin-tab" data-tab="stats" onclick="switchTab('stats')">📊 Stats</div>
        <div class="admin-tab" data-tab="partners-admin" onclick="switchTab('partners-admin')">🤝 Partners</div>
        <div class="admin-tab" data-tab="inbox" onclick="switchTab('inbox')">📩 Inbox</div>
        <div class="admin-tab" data-tab="orders" onclick="switchTab('orders')">🛒 Orders</div>
        <div class="admin-tab" data-tab="product-images" onclick="switchTab('product-images')">🖼 Product Images</div>
        <div class="admin-tab" data-tab="contact-info" onclick="switchTab('contact-info')">📞 Contact Info</div>
        <div class="admin-tab" data-tab="aibot" onclick="switchTab('aibot')">🤖 AI Robot Popup</div>
        <div class="admin-tab" data-tab="aichat" onclick="switchTab('aichat')">💬 AI Chatbot</div>
      </div>
      <div class="admin-content">
        <!-- HERO -->
        <div class="admin-section active" id="tab-hero">
          <h3>Hero Slideshow Images</h3>
          <p style="font-size:0.82rem;color:var(--text-mid);margin-bottom:16px">Upload multiple robot / product images. They will auto-slide in the hero section with dot navigation.</p>
          <div class="upload-zone">
            <input type="file" accept="image/*" multiple onchange="uploadHeroImages(this)"/>
            <div class="upload-icon">🤖</div>
            <p>Click to upload one or more images (PNG transparent background recommended)</p>
          </div>
          <div class="progress-bar" id="pb-hero"><div class="fill"></div></div>
          <div class="admin-msg" id="msg-hero">✓ Hero images updated!</div>
          <div style="margin-top:16px;display:grid;grid-template-columns:repeat(3,1fr);gap:10px" id="hero-img-grid"></div>
        </div>

        <!-- GALLERY -->
        <!-- ABOUT IMAGES TAB -->
        <div class="admin-section" id="tab-about-img">
          <h3>🏥 About Section Images</h3>
          <p style="font-size:0.82rem;color:var(--text-mid);margin-bottom:20px">Upload the 3 images shown in the "Revolutionising Healthcare Access" section.</p>

          <div style="display:grid;grid-template-columns:1fr 1fr 1fr;gap:16px;margin-bottom:16px">
            <div>
              <label class="admin-label">① AiDoBot in Action (main)</label>
              <div id="about-img-slot-0" style="margin-bottom:8px"><div style="height:80px;display:flex;align-items:center;justify-content:center;background:var(--wood-100);border-radius:8px;font-size:0.75rem;color:var(--text-light)">Not uploaded</div></div>
              <label style="display:block;background:var(--wood-500);color:white;text-align:center;padding:7px;border-radius:8px;cursor:pointer;font-size:0.78rem">Upload
                <input type="file" accept="image/*" style="display:none" onchange="uploadAboutImage(this,0)"/>
              </label>
            </div>
            <div>
              <label class="admin-label">② Temperature Check</label>
              <div id="about-img-slot-1" style="margin-bottom:8px"><div style="height:80px;display:flex;align-items:center;justify-content:center;background:var(--wood-100);border-radius:8px;font-size:0.75rem;color:var(--text-light)">Not uploaded</div></div>
              <label style="display:block;background:var(--wood-500);color:white;text-align:center;padding:7px;border-radius:8px;cursor:pointer;font-size:0.78rem">Upload
                <input type="file" accept="image/*" style="display:none" onchange="uploadAboutImage(this,1)"/>
              </label>
            </div>
            <div>
              <label class="admin-label">③ Weight Measurement</label>
              <div id="about-img-slot-2" style="margin-bottom:8px"><div style="height:80px;display:flex;align-items:center;justify-content:center;background:var(--wood-100);border-radius:8px;font-size:0.75rem;color:var(--text-light)">Not uploaded</div></div>
              <label style="display:block;background:var(--wood-500);color:white;text-align:center;padding:7px;border-radius:8px;cursor:pointer;font-size:0.78rem">Upload
                <input type="file" accept="image/*" style="display:none" onchange="uploadAboutImage(this,2)"/>
              </label>
            </div>
          </div>
          <div class="progress-bar" id="pb-about-img"><div class="fill"></div></div>
          <div class="admin-msg" id="msg-about-img">✓ About image updated!</div>
        </div>

        <div class="admin-section" id="tab-gallery">
          <h3>Gallery Images</h3>
          <div class="upload-zone">
            <input type="file" accept="image/*,video/*" multiple onchange="uploadMultiple(this,'gallery')"/>
            <div class="upload-icon">📷</div>
            <p>Click to upload images or videos for the gallery</p>
          </div>
          <div class="progress-bar" id="pb-gallery"><div class="fill"></div></div>
          <div class="media-grid" id="media-gallery"></div>
          <div class="admin-msg" id="msg-gallery">✓ Gallery updated!</div>
        </div>

        <!-- SHORTS -->
        <div class="admin-section" id="tab-shorts">
          <h3>📱 Short Review Videos</h3>
          <p style="font-size:0.82rem;color:var(--text-mid);margin-bottom:14px">Upload vertical videos or add YouTube Shorts links. All items are listed below with a delete button.</p>

          <div class="upload-zone">
            <input type="file" accept="video/*" multiple onchange="uploadMultiple(this,'shorts','video')"/>
            <div class="upload-icon">📱</div>
            <p>Click to upload vertical/short videos</p>
          </div>
          <div class="progress-bar" id="pb-shorts"><div class="fill"></div></div>

          <label class="admin-label" style="margin-top:16px">Add YouTube Shorts / Reels URL</label>
          <div style="display:flex;gap:8px;margin-bottom:20px">
            <input class="admin-input" id="short-url-input" placeholder="https://youtube.com/shorts/..." style="margin:0;flex:1"/>
            <button class="admin-save" onclick="addShortUrl()">+ Add</button>
          </div>

          <div class="admin-label" style="margin-bottom:10px">All Short Videos <span id="shorts-count" style="color:var(--wood-500);font-weight:normal"></span></div>
          <div id="shorts-list" style="display:flex;flex-direction:column;gap:10px"></div>
          <div class="admin-msg" id="msg-shorts">✓ Shorts updated!</div>
        </div>

        <!-- VIDEO REVIEWS -->
        <div class="admin-section" id="tab-vreviews">
          <h3>Video Reviews</h3>
          <p style="font-size:0.82rem;color:var(--text-mid);margin-bottom:16px">Add YouTube links for patient, doctor, and community reviews.</p>
          <div id="vreview-inputs"></div>
          <button class="admin-save" style="margin-bottom:12px" onclick="addVReviewInput()">+ Add Review</button>
          <button class="admin-save" onclick="saveVReviews()">Save Reviews</button>
          <div class="admin-msg" id="msg-vreviews">✓ Video reviews saved!</div>
        </div>

        <!-- JOURNEY -->
        <div class="admin-section" id="tab-journey">
          <h3>Journey Step Videos</h3>
          <p style="font-size:0.82rem;color:var(--text-mid);margin-bottom:16px">Add YouTube URLs for each of the 6 journey steps.</p>
          <div id="journey-inputs"></div>
          <button class="admin-save" onclick="saveJourneyVideos()">Save Journey Videos</button>
          <div class="admin-msg" id="msg-journey">✓ Journey videos saved!</div>
        </div>

        <!-- TEAM -->
        <div class="admin-section" id="tab-team">
          <h3>Team Members</h3>
          <p style="font-size:0.82rem;color:var(--text-mid);margin-bottom:16px">Add, edit photos, or delete team members.</p>
          <button class="admin-save" onclick="addTeamMemberForm()" style="margin-bottom:16px">+ Add New Member</button>
          <div id="team-upload-list"></div>
          <div id="new-team-form" style="display:none;background:var(--wood-50);border:1px solid var(--wood-200);border-radius:14px;padding:18px;margin-top:16px">
            <h4 style="margin-bottom:12px;color:var(--wood-700)">New Team Member</h4>
            <label class="admin-label">Full Name</label>
            <input class="admin-input" id="nt-name" placeholder="Dr. Jane Smith"/>
            <label class="admin-label">Role</label>
            <input class="admin-input" id="nt-role" placeholder="Chief Medical Officer"/>
            <label class="admin-label">Bio</label>
            <input class="admin-input" id="nt-bio" placeholder="Brief description..."/>
            <label class="admin-label">Emoji (avatar placeholder)</label>
            <input class="admin-input" id="nt-emoji" placeholder="👨‍⚕️" style="width:80px"/>
            <div style="display:flex;gap:10px;margin-top:4px">
              <button class="admin-save" onclick="saveNewTeamMember()">✓ Add Member</button>
              <button class="admin-save" style="background:var(--wood-300)" onclick="document.getElementById('new-team-form').style.display='none'">Cancel</button>
            </div>
          </div>
          <div class="admin-msg" id="msg-team">✓ Team updated!</div>
        </div>

        <!-- EVENTS -->
        <div class="admin-section" id="tab-events">
          <h3>Events</h3>
          <p style="font-size:0.82rem;color:var(--text-mid);margin-bottom:16px">Add, update images, or delete events.</p>
          <button class="admin-save" onclick="showAddEventForm()" style="margin-bottom:16px">+ Add New Event</button>
          <div id="event-upload-list"></div>
          <div id="new-event-form" style="display:none;background:var(--wood-50);border:1px solid var(--wood-200);border-radius:14px;padding:18px;margin-top:16px">
            <h4 style="margin-bottom:12px;color:var(--wood-700)">New Event</h4>
            <label class="admin-label">Event Title</label>
            <input class="admin-input" id="ne-title" placeholder="Healthcare Summit 2026"/>
            <label class="admin-label">Date</label>
            <input class="admin-input" id="ne-date" placeholder="Jun 2026"/>
            <label class="admin-label">Location</label>
            <input class="admin-input" id="ne-loc" placeholder="Lagos, Nigeria"/>
            <label class="admin-label">Description</label>
            <input class="admin-input" id="ne-desc" placeholder="Brief event description..."/>
            <label class="admin-label">Icon (emoji)</label>
            <input class="admin-input" id="ne-icon" placeholder="🏥" style="width:80px"/>
            <div style="display:flex;gap:10px;margin-top:4px">
              <button class="admin-save" onclick="saveNewEvent()">✓ Add Event</button>
              <button class="admin-save" style="background:var(--wood-300)" onclick="document.getElementById('new-event-form').style.display='none'">Cancel</button>
            </div>
          </div>
          <div class="admin-msg" id="msg-events">✓ Events updated!</div>
        </div>

        <!-- SOCIAL -->
        <div class="admin-section" id="tab-social">
          <h3>Social Media Links</h3>
          <label class="admin-label">YouTube Channel URL</label>
          <input class="admin-input" id="soc-yt" placeholder="https://youtube.com/@aidoBot"/>
          <label class="admin-label">Latest YouTube Video URL (to embed on site)</label>
          <input class="admin-input" id="soc-yt-latest" placeholder="https://www.youtube.com/watch?v=..."/>
          <label class="admin-label">Facebook URL</label>
          <input class="admin-input" id="soc-fb" placeholder="https://facebook.com/aidoBot"/>
          <label class="admin-label">Instagram URL</label>
          <input class="admin-input" id="soc-ig" placeholder="https://instagram.com/aidoBot"/>
          <label class="admin-label">WhatsApp Link</label>
          <input class="admin-input" id="soc-wa" placeholder="https://wa.me/918800510790"/>
          <label class="admin-label">TikTok URL</label>
          <input class="admin-input" id="soc-tk" placeholder="https://tiktok.com/@aidoBot"/>
          <label class="admin-label">LinkedIn URL</label>
          <input class="admin-input" id="soc-li" placeholder="https://linkedin.com/company/aidoBot"/>
          <button class="admin-save" onclick="saveSocial()">Save Social Links</button>
          <div class="admin-msg" id="msg-social">✓ Social links saved!</div>

          <hr style="border:none;border-top:1px solid var(--wood-200);margin:24px 0"/>
          <h3>Announcements / News</h3>
          <p style="font-size:0.82rem;color:var(--text-mid);margin-bottom:12px">Add or delete news announcements shown on the site.</p>
          <button class="admin-save" onclick="showAddAnnouncementForm()" style="margin-bottom:12px">+ Add Announcement</button>
          <div id="announce-admin-list"></div>
          <div id="new-announce-form" style="display:none;background:var(--wood-50);border:1px solid var(--wood-200);border-radius:14px;padding:18px;margin-top:12px">
            <label class="admin-label">Icon (emoji)</label>
            <input class="admin-input" id="na-icon" placeholder="🚀" style="width:80px"/>
            <label class="admin-label">Date</label>
            <input class="admin-input" id="na-date" placeholder="Mar 1, 2026"/>
            <label class="admin-label">Title</label>
            <input class="admin-input" id="na-title" placeholder="Big announcement title"/>
            <label class="admin-label">Body Text</label>
            <input class="admin-input" id="na-body" placeholder="Description of the announcement..."/>
            <div style="display:flex;gap:10px;margin-top:4px">
              <button class="admin-save" onclick="saveNewAnnouncement()">✓ Add</button>
              <button class="admin-save" style="background:var(--wood-300)" onclick="document.getElementById('new-announce-form').style.display='none'">Cancel</button>
            </div>
          </div>
          <div class="admin-msg" id="msg-announce">✓ Announcements updated!</div>
        </div>

        <!-- STATS -->
        <div class="admin-section" id="tab-stats">
          <h3>Homepage Stats</h3>
          <label class="admin-label">Accuracy Rate (%)</label>
          <input class="admin-input" id="stat-acc-input" type="number" placeholder="98"/>
          <label class="admin-label">Time Saved per Patient (%)</label>
          <input class="admin-input" id="stat-ts-input" type="number" placeholder="70"/>
          <label class="admin-label">Daily Screenings (+)</label>
          <input class="admin-input" id="stat-sc-input" type="number" placeholder="500"/>
          <button class="admin-save" onclick="saveStats()">Save Stats</button>
          <div class="admin-msg" id="msg-stats">✓ Stats saved!</div>
        </div>

        <div class="admin-section" id="tab-inbox">
          <h3>📩 Contact Form Inbox</h3>
          <p style="font-size:0.82rem;color:var(--text-mid);margin-bottom:16px">Messages sent through the website contact form appear here.</p>
          <button class="admin-save" onclick="loadInbox()" style="margin-bottom:16px">🔄 Refresh Inbox</button>
          <div id="inbox-list">
            <div style="text-align:center;padding:32px;color:var(--text-light);font-size:0.85rem">Click Refresh Inbox to load messages.</div>
          </div>
        </div>

        <!-- PARTNERS ADMIN TAB -->
        <div class="admin-section" id="tab-partners-admin">
          <h3>🤝 Partners & Network</h3>
          <p style="font-size:0.82rem;color:var(--text-mid);margin-bottom:20px">Add, edit, and remove partners shown on your website. Each partner can have a logo image, emoji icon, name, type, and description.</p>

          <!-- Add new partner form -->
          <div style="background:var(--wood-100);border-radius:14px;padding:18px;margin-bottom:20px;border:1px solid var(--wood-200)">
            <div class="admin-label" style="margin-bottom:12px;font-size:0.9rem;color:var(--wood-700)">➕ Add New Partner</div>
            <div style="display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:10px">
              <div>
                <label class="admin-label">Partner Name</label>
                <input class="admin-input" id="new-partner-name" placeholder="e.g. Regional Health Ministry" style="margin:0"/>
              </div>
              <div>
                <label class="admin-label">Type / Category</label>
                <input class="admin-input" id="new-partner-type" placeholder="e.g. Government, NGO, Academic" style="margin:0"/>
              </div>
            </div>
            <div style="display:grid;grid-template-columns:80px 1fr;gap:10px;margin-bottom:10px">
              <div>
                <label class="admin-label">Emoji Icon</label>
                <input class="admin-input" id="new-partner-icon" placeholder="🏥" style="margin:0;text-align:center;font-size:1.3rem"/>
              </div>
              <div>
                <label class="admin-label">Description</label>
                <input class="admin-input" id="new-partner-desc" placeholder="Short description of the partnership" style="margin:0"/>
              </div>
            </div>
            <div style="margin-bottom:12px">
              <label class="admin-label">Partner Logo (optional — replaces emoji on card)</label>
              <div class="upload-zone" style="padding:12px;margin:0">
                <input type="file" accept="image/*" id="new-partner-logo-input" onchange="previewPartnerLogo(this)"/>
                <div class="upload-icon" style="font-size:1.4rem">🖼️</div>
                <p style="font-size:0.75rem">Upload partner logo (PNG/JPG, transparent works great)</p>
              </div>
              <div id="new-partner-logo-preview" style="margin-top:8px"></div>
            </div>
            <div class="progress-bar" id="pb-partner-logo"><div class="fill"></div></div>
            <button class="admin-save" onclick="addPartner()" style="margin-top:8px;width:100%">➕ Add Partner</button>
            <div class="admin-msg" id="msg-partner-add">✓ Partner added!</div>
          </div>

          <!-- Partners list -->
          <div class="admin-label" style="margin-bottom:10px">All Partners <span id="partners-count" style="color:var(--wood-500);font-weight:normal"></span></div>
          <div id="partners-admin-list" style="display:flex;flex-direction:column;gap:10px"></div>
          <div class="admin-msg" id="msg-partner-delete">✓ Partner removed!</div>
        </div>

        <!-- ORDERS TAB -->
        <div class="admin-section" id="tab-orders">
          <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:16px;flex-wrap:wrap;gap:10px">
            <h3 style="margin:0">🛒 Customer Orders</h3>
            <div style="display:flex;gap:8px;align-items:center">
              <span id="orders-count" style="font-size:0.78rem;color:var(--wood-500);font-family:Space Mono,monospace"></span>
              <button onclick="exportOrdersCSV()" style="font-size:0.75rem;padding:6px 12px;border-radius:8px;background:rgba(255,255,255,0.07);border:1px solid var(--wood-200);color:var(--wood-600);cursor:pointer">⬇ Export CSV</button>
            </div>
          </div>
          <!-- Filter bar -->
          <div style="display:flex;gap:8px;margin-bottom:16px;flex-wrap:wrap">
            <button class="order-filter-btn active" onclick="filterOrders('all',this)">All</button>
            <button class="order-filter-btn" onclick="filterOrders('New',this)">🆕 New</button>
            <button class="order-filter-btn" onclick="filterOrders('Confirmed',this)">✅ Confirmed</button>
            <button class="order-filter-btn" onclick="filterOrders('Shipped',this)">📦 Shipped</button>
            <button class="order-filter-btn" onclick="filterOrders('Delivered',this)">🏁 Delivered</button>
          </div>
          <div id="orders-admin-list" style="display:flex;flex-direction:column;gap:12px"></div>
        </div>

        <!-- PRODUCT IMAGES TAB -->
        <div class="admin-section" id="tab-product-images">
          <h3>🖼 Product Images</h3>
          <p style="font-size:0.82rem;color:var(--text-mid);margin-bottom:20px">Upload one image per product. These appear at the top of each pricing card on the website.</p>

          <div style="display:grid;grid-template-columns:1fr 1fr;gap:18px">

            <div>
              <label class="admin-label">🏠 Home Edition</label>
              <div id="pi-home-preview" style="margin-bottom:8px">
                <div style="height:90px;display:flex;align-items:center;justify-content:center;background:var(--wood-100);border-radius:10px;font-size:0.75rem;color:var(--text-light)">No image yet</div>
              </div>
              <label style="display:block;background:var(--wood-500);color:white;text-align:center;padding:8px;border-radius:8px;cursor:pointer;font-size:0.8rem;font-weight:600">
                Upload Image
                <input type="file" accept="image/*" style="display:none" onchange="uploadProductImage(this,'home')"/>
              </label>
              <div class="progress-bar" id="pb-pi-home" style="margin-top:6px"><div class="fill"></div></div>
            </div>

            <div>
              <label class="admin-label">🏘️ Community Edition</label>
              <div id="pi-community-preview" style="margin-bottom:8px">
                <div style="height:90px;display:flex;align-items:center;justify-content:center;background:var(--wood-100);border-radius:10px;font-size:0.75rem;color:var(--text-light)">No image yet</div>
              </div>
              <label style="display:block;background:var(--wood-500);color:white;text-align:center;padding:8px;border-radius:8px;cursor:pointer;font-size:0.8rem;font-weight:600">
                Upload Image
                <input type="file" accept="image/*" style="display:none" onchange="uploadProductImage(this,'community')"/>
              </label>
              <div class="progress-bar" id="pb-pi-community" style="margin-top:6px"><div class="fill"></div></div>
            </div>

            <div>
              <label class="admin-label">🏛️ Government Edition</label>
              <div id="pi-gov-preview" style="margin-bottom:8px">
                <div style="height:90px;display:flex;align-items:center;justify-content:center;background:var(--wood-100);border-radius:10px;font-size:0.75rem;color:var(--text-light)">No image yet</div>
              </div>
              <label style="display:block;background:var(--wood-500);color:white;text-align:center;padding:8px;border-radius:8px;cursor:pointer;font-size:0.8rem;font-weight:600">
                Upload Image
                <input type="file" accept="image/*" style="display:none" onchange="uploadProductImage(this,'gov')"/>
              </label>
              <div class="progress-bar" id="pb-pi-gov" style="margin-top:6px"><div class="fill"></div></div>
            </div>

            <div>
              <label class="admin-label">🚀 Next Generation</label>
              <div id="pi-future-preview" style="margin-bottom:8px">
                <div style="height:90px;display:flex;align-items:center;justify-content:center;background:var(--wood-100);border-radius:10px;font-size:0.75rem;color:var(--text-light)">No image yet</div>
              </div>
              <label style="display:block;background:var(--wood-500);color:white;text-align:center;padding:8px;border-radius:8px;cursor:pointer;font-size:0.8rem;font-weight:600">
                Upload Image
                <input type="file" accept="image/*" style="display:none" onchange="uploadProductImage(this,'future')"/>
              </label>
              <div class="progress-bar" id="pb-pi-future" style="margin-top:6px"><div class="fill"></div></div>
            </div>

          </div>
          <div class="admin-msg" id="msg-product-image" style="margin-top:12px">✓ Product image updated!</div>
        </div>

        <!-- CONTACT INFO TAB -->
        <div class="admin-section" id="tab-contact-info">
          <h3>📞 Contact Information</h3>
          <p style="font-size:0.82rem;color:var(--text-mid);margin-bottom:16px">Edit the contact details shown on your website.</p>
          <label class="admin-label">Primary Email</label>
          <input class="admin-input" id="ci-email1-input" placeholder="hello@aidoBot.com"/>
          <label class="admin-label">Secondary Email</label>
          <input class="admin-input" id="ci-email2-input" placeholder="info@aidoBot.com"/>
          <label class="admin-label">WhatsApp Number</label>
          <input class="admin-input" id="ci-whatsapp-input" placeholder="+91 8800 510 790"/>
          <label class="admin-label">Deployment Info</label>
          <input class="admin-input" id="ci-deployment-input" placeholder="Available worldwide..."/>
          <label class="admin-label">Partnerships Info</label>
          <input class="admin-input" id="ci-partnerships-input" placeholder="Ministries of Health, hospitals..."/>
          <button class="admin-save" onclick="saveContactInfo()">Save Contact Info</button>
          <div class="admin-msg" id="msg-contact-info">✓ Contact info updated!</div>
        </div>

        <!-- AI ROBOT POPUP TAB -->
        <div class="admin-section" id="tab-aibot">
          <h3>🤖 AI Avatar Popup</h3>
          <p style="font-size:0.82rem;color:var(--text-mid);margin-bottom:16px">Upload two avatar videos. The <strong>idle</strong> video plays when the robot is waiting/listening. The <strong>talking</strong> video plays while the AI is speaking.</p>

          <label class="admin-label">🔇 Idle Video (robot silent / listening)</label>
          <div class="upload-zone" style="margin-bottom:8px">
            <input type="file" accept="video/*" onchange="uploadAvatarVideo(this,'idle')"/>
            <div class="upload-icon">😶</div>
            <p>Upload the silent/idle avatar video (MP4 recommended)</p>
          </div>
          <div class="progress-bar" id="pb-avatar-idle"><div class="fill"></div></div>
          <div id="avatar-idle-preview" style="margin-top:8px;margin-bottom:16px"></div>

          <label class="admin-label">🗣 Talking Video (robot speaking)</label>
          <div class="upload-zone" style="margin-bottom:8px">
            <input type="file" accept="video/*" onchange="uploadAvatarVideo(this,'talk')"/>
            <div class="upload-icon">🤖</div>
            <p>Upload the talking avatar video (MP4 recommended)</p>
          </div>
          <div class="progress-bar" id="pb-avatar-talk"><div class="fill"></div></div>
          <div id="avatar-talk-preview" style="margin-top:8px;margin-bottom:16px"></div>
          <div class="admin-msg" id="msg-robotvid">✓ Avatar videos updated!</div>

          <hr style="border:none;border-top:1px solid var(--wood-200);margin:20px 0"/>
          <h4 style="color:var(--wood-700);margin-bottom:8px">🎤 AI Opening Greeting</h4>
          <p style="font-size:0.82rem;color:var(--text-mid);margin-bottom:10px">What the AI says (and speaks aloud) when the popup first appears.</p>
          <textarea class="admin-input" id="popup-greeting-script" rows="3" placeholder="Hello! I am AiDoBot, your AI healthcare companion. How can I help you today?"></textarea>
          <button class="admin-save" onclick="savePopupGreeting()" style="margin-top:6px">Save Greeting</button>
          <div class="admin-msg" id="msg-popup-greeting">✓ Greeting saved!</div>
        </div>

        <!-- AI CHATBOT TAB -->
        <div class="admin-section" id="tab-aichat">
          <h3>💬 AI Chatbot Settings</h3>
          <p style="font-size:0.82rem;color:var(--text-mid);margin-bottom:16px">The chatbot uses Groq AI and answers questions about AiDoBot based on your knowledge base below.</p>

          <label class="admin-label">Chatbot Name</label>
          <input class="admin-input" id="cb-name" placeholder="AiDoBot Assistant"/>
          <label class="admin-label">Chatbot Greeting Message</label>
          <input class="admin-input" id="cb-greeting" placeholder="Hi! I'm AiDoBot's AI assistant. Ask me anything about AiDoBot!"/>
          <label class="admin-label">Chatbot Avatar Emoji</label>
          <input class="admin-input" id="cb-emoji" placeholder="🤖" style="width:80px"/>
          <button class="admin-save" onclick="saveChatbotSettings()">Save Chatbot Settings</button>
          <div class="admin-msg" id="msg-cbsettings">✓ Chatbot settings saved!</div>

          <hr style="border:none;border-top:1px solid var(--wood-200);margin:20px 0"/>
          <h4 style="color:var(--wood-700);margin-bottom:8px">📚 AI Knowledge Base</h4>
          <p style="font-size:0.82rem;color:var(--text-mid);margin-bottom:10px">Add everything about your company, products, team, pricing, and services here. The AI will use this to answer visitor questions accurately. Be as detailed as possible.</p>
          <textarea class="admin-input" id="ai-knowledge-base" rows="14" placeholder="Company Name: AiDoBot
What we do: AiDoBot is an AI-powered medical robot that checks vitals, speaks multiple languages, connects patients to doctors, and delivers medicine.

Products/Features:
- Heart rate monitoring
- Blood oxygen (SpO2) detection
- Temperature measurement
- Blood pressure monitoring
- Weight and height measurement
- AI face analysis (emotion, pallor, fatigue)
- Live video doctor consultation
- Digital prescriptions
- Medicine home delivery
- Multi-language support
- 24/7 availability

Pricing: Contact us for pricing.
Website: aidoBot.com
Email: hello@aidoBot.com
WhatsApp: +91 8800 510 790

Team: Abdoukadir Jabbi (Inventor), Anushka (AI Design), Isatou Jallow (Finance), Nuna (Communications)...

Add more details here..."></textarea>
          <div style="display:flex;gap:10px;margin-top:8px;align-items:center">
            <button class="admin-save" onclick="saveKnowledgeBase()">💾 Save Knowledge Base</button>
            <span style="font-size:0.78rem;color:var(--text-light)" id="kb-char-count"></span>
          </div>
          <div class="admin-msg" id="msg-kb">✓ Knowledge base saved! AI will use this in all conversations.</div>
        </div>

      </div>
    </div>
  </div>
</div>

<!-- ── SCRIPTS ─────────────────────────────────────── -->
<script>
// ─── CONFIG ─────────────────────────────────────────
// ✅ Points to your live Render backend
const API = 'https://webback-end.onrender.com';
let adminToken = localStorage.getItem('aidoAdminToken') || '';
let siteData = {};

// ─── DEFAULT DATA ────────────────────────────────────
const DEFAULT = {
  hero: { robot_image: '' },
  stats: { accuracy: 98, time_saved: 70, daily_screenings: 500 },
  gallery: [],
  reviews_video: [],
  reviews_text: [],
  journey_steps: [
    { title: 'Patient Interaction & Face Detection', desc: 'AiDoBot greets the patient, detects their face, and begins a natural voice conversation in their preferred language.', video: '' },
    { title: 'Health Data Collection', desc: 'The robot guides the patient through each measurement — weight, temperature, blood oxygen, heart rate, and blood pressure.', video: '' },
    { title: 'AI Face Analysis', desc: 'The camera captures the patient\'s face. AI analyses emotion, pallor, fatigue, and age — all added automatically to the patient report.', video: '' },
    { title: 'Doctor Consultation', desc: 'Live video call with a verified doctor. The doctor reviews the robot-generated report before speaking — making every consultation faster.', video: '' },
    { title: 'Digital Prescription & Medicine Delivery', desc: 'The doctor issues a digital prescription. Patient orders medicine by voice — delivered to their home.', video: '' },
    { title: 'Lifetime Health Record', desc: 'Every visit is stored securely. Patients access their full health history and prescriptions from any phone, at any time.', video: '' }
  ],
  team: [
    { name: 'Abdoukadir Jabbi', role: 'Inventor & Lead Developer', bio: 'B.Sc. Computer Science. Technical lead responsible for system architecture, AI integration, and hardware design of AiDoBot.', photo: '', emoji: '👨‍💻' },
    { name: 'Anushka', role: 'AI & Systems Design', bio: 'Leads AI modelling and intelligent interaction design, ensuring AiDoBot responds naturally and accurately in every situation.', photo: '', emoji: '👩‍🔬' },
    { name: 'Isatou I Jallow', role: 'Accountant & Finance', bio: 'Manages financial planning, budgeting, and compliance for sustainable and responsible growth.', photo: '', emoji: '👩‍💼' },
    { name: 'Nuna', role: 'Social Media & Communications', bio: 'Oversees brand communication, digital presence, and strategic messaging to share AiDoBot\'s mission worldwide.', photo: '', emoji: '📣' },
    { name: 'Dr. Shiv Kumar Verma', role: 'Mentor & Advisor', bio: 'Professor providing expert guidance on AI development, system architecture, and academic rigor behind AiDoBot\'s intelligence.', photo: '', emoji: '🎓' },
    { name: 'Dr. Sanjay Kumar', role: 'Mentor & Advisor', bio: 'Associate Professor advising on medical applications, healthcare integration, and clinical accuracy of the robot\'s assessments.', photo: '', emoji: '⚕️' }
  ],
  events: [
    { title: 'Healthcare Innovation Summit', date: 'Mar 2026', location: 'Banjul, The Gambia', desc: 'AiDoBot will be demonstrating live patient screening and telemedicine capabilities.', icon: '🏥', image: '' },
    { title: 'University Tech Expo', date: 'Apr 2026', location: 'New Delhi, India', desc: 'Join us at the national university technology fair showcasing AI face analysis and multilingual health screening.', icon: '🏫', image: '' },
    { title: 'Community Health Outreach', date: 'May 2026', location: 'Rural Communities, West Africa', desc: 'Free health screening drive — bringing AiDoBot directly to underserved rural communities.', icon: '🌍', image: '' }
  ],
  announcements: [
    { icon: '🚀', date: 'Feb 28, 2026', title: 'AiDoBot Version 2.0 Launched', body: 'AiDoBot V2.0 now features enhanced AI face analysis, improved multilingual support for 12 new languages, and screening under 4 minutes.' },
    { icon: '🤝', date: 'Feb 15, 2026', title: 'New Partnership with Regional Health Ministry', body: 'AiDoBot has entered a formal partnership agreement to deploy robots across 20 public health centres. Rollout begins in March 2026.' },
    { icon: '🏆', date: 'Jan 30, 2026', title: 'AiDoBot Wins Best Health Innovation Award', body: 'We are honoured to have received the Best Health Innovation Award at the Africa Tech Summit 2026.' }
  ],
  partners: [
    { icon: '🏥', name: 'Regional Health Ministry', type: 'Government', desc: 'Official ministry partner supporting nationwide deployment.' },
    { icon: '🎓', name: 'University Research Lab', type: 'Academic', desc: 'Research partnership advancing AI diagnostic capabilities.' },
    { icon: '🌐', name: 'Global Health NGO', type: 'NGO', desc: 'Funding and deploying AiDoBot in underserved communities.' },
    { icon: '💊', name: 'PharmaCare Network', type: 'Healthcare', desc: 'Pharmacy network enabling home medicine delivery.' }
  ],
  social: { youtube: '#', facebook: '#', instagram: '#', whatsapp: 'https://wa.me/918800510790' },
  contact_info: {
    email1: 'hello@aidoBot.com',
    email2: 'info@aidoBot.com',
    whatsapp: '+91 8800 510 790',
    deployment: 'Available worldwide — hospitals, clinics, communities, homes.',
    partnerships: 'Ministries of Health, hospitals, NGOs — let\'s build together.'
  },
  latest_youtube: ''
};

// ─── INIT ────────────────────────────────────────────
window.addEventListener('DOMContentLoaded', () => {

  // CSS auto-dismisses loader after 2.2s — no JS needed for that
  // JS also dismisses it for speed, but if JS crashes CSS still saves us
  const loader = document.getElementById('loader');
  if(loader) {
    setTimeout(() => loader.classList.add('done'), 2000);
    // Hard-remove after 3s no matter what — belt AND suspenders
    setTimeout(() => {
      loader.style.cssText = 'display:none!important';
    }, 3000);
  }

  // Render page immediately with defaults
  try {
    siteData = {};
    mergeDefaults();
    renderAll();
    setupObserver();
    setupNavScroll();
    buildMarquee();
    animateStats();
    initAIFeatures();
  } catch(e) {
    console.error('Render error:', e);
    // Even if JS crashes, loader is gone by 3s via the hard-remove above
  }

  // ── SMART BACKGROUND FETCH WITH AUTO-RETRY ──────────────
  // Render free tier sleeps after inactivity and takes ~30-60s to wake up.
  // We keep retrying every 5s (up to 90s total) until data arrives.
  // Once data arrives the page auto-updates — no manual refresh needed.

  let dataLoaded   = false;
  let retryCount   = 0;
  const MAX_RETRY  = 18;   // 18 × 5s = 90 seconds max wait
  const RETRY_MS   = 5000; // retry every 5 seconds

  function fetchSiteData() {
    if(dataLoaded || retryCount >= MAX_RETRY) return;
    retryCount++;

    const ctrl = new AbortController();
    setTimeout(() => ctrl.abort(), 8000); // 8s per attempt

    fetch(`${API}/api/data`, { signal: ctrl.signal })
      .then(res => res.ok ? res.json() : Promise.reject('bad response'))
      .then(freshData => {
        if(freshData && typeof freshData === 'object' && Object.keys(freshData).length > 2) {
          dataLoaded = true;
          siteData = freshData;
          mergeDefaults();
          renderAll();
          updateChatbotUI();
          document.querySelectorAll('.reveal').forEach(el => el.classList.add('visible'));
          console.log('✅ Data loaded from Render after', retryCount, 'attempt(s)');
        } else {
          // Got a response but data looks empty — retry
          setTimeout(fetchSiteData, RETRY_MS);
        }
      })
      .catch(() => {
        // Render still waking up — retry silently
        if(retryCount < MAX_RETRY) setTimeout(fetchSiteData, RETRY_MS);
      });
  }

  fetchSiteData(); // First attempt immediately

  // Nuclear fallback: always show content visually after 4s
  setTimeout(() => {
    document.querySelectorAll('.reveal').forEach(el => el.classList.add('visible'));
  }, 4000);

  // ── KEEP RENDER AWAKE (ping every 9 minutes) ──────────────
  // Pings /api/health which returns instantly with NO database call.
  // This keeps the Flask server alive without touching Neon at all.
  // Render free tier sleeps after 15 minutes of inactivity.
  // 9-minute ping = server stays awake indefinitely while page is open.

  setInterval(() => {
    fetch(`${API}/api/health`, { method:'GET', cache:'no-store' })
      .then(() => console.log('🟢 Render keepalive ping sent'))
      .catch(() => {}); // silent — don't disturb user if it fails
  }, 9 * 60 * 1000); // 9 minutes
});

function mergeDefaults() {
  Object.keys(DEFAULT).forEach(k => {
    if(siteData[k] === undefined) siteData[k] = DEFAULT[k];
  });
  if(!siteData.hero_images)       siteData.hero_images = [];
  if(!siteData.announcements)     siteData.announcements = DEFAULT.announcements;
  if(!siteData.vreviews)          siteData.vreviews = [];
  if(!siteData.ai_knowledge_base) siteData.ai_knowledge_base = '';
  if(!siteData.popup_greeting)    siteData.popup_greeting = '';
  if(!siteData.ai_robot_video)    siteData.ai_robot_video = '';
  if(!siteData.chatbot_name)      siteData.chatbot_name = 'AiDoBot Assistant';
  if(!siteData.chatbot_greeting)  siteData.chatbot_greeting = "Hi! I'm AiDoBot's AI assistant. Ask me anything!";
  if(!siteData.chatbot_emoji)       siteData.chatbot_emoji = '🤖';
  if(!siteData.contact_info)        siteData.contact_info = DEFAULT.contact_info;
  if(!siteData.avatar_idle_video)   siteData.avatar_idle_video = '';
  if(!siteData.avatar_talk_video)   siteData.avatar_talk_video = '';
  if(!siteData.about_images)        siteData.about_images = ['','',''];
  if(!siteData.orders)             siteData.orders = [];
  if(!siteData.product_images)     siteData.product_images = {};
}

// ─── RENDER ALL ──────────────────────────────────────
function renderAll() {
  renderHero();
  renderShorts();
  renderStats();
  renderJourney();
  renderGallery();
  renderVideoReviews();
  renderTeam();
  renderEvents();
  renderAnnouncements();
  renderPartners();
  renderSocial();
  renderContact();
  renderAboutImages();
  renderProductImages();
}

// ─── HERO SLIDESHOW ──────────────────────────────────
let heroSlideIndex = 0;
let heroSlideTimer = null;

function renderHero() {
  // hero_images might come back as a string if DB returned JSON-encoded string
  let images = siteData.hero_images || [];
  if(typeof images === 'string') { try { images = JSON.parse(images); } catch(e) { images = []; } }
  if(!Array.isArray(images)) images = [];
  console.log('renderHero: images count =', images.length, images);
  const slidesEl = document.getElementById('hero-slides');
  const dotsEl   = document.getElementById('hero-dots');
  if(!slidesEl) return;

  if(!images.length) {
    slidesEl.innerHTML = `<div class="hero-slide active"><div class="ph-box hero-robot-placeholder"><div class="ph-icon">🤖</div><div class="ph-label">Coming soon</div></div></div>`;
    dotsEl.innerHTML = '<span class="hero-dot active"></span>';
    return;
  }

  slidesEl.innerHTML = images.map((url, i) => `
    <div class="hero-slide${i===0?' active':''}">
      <img src="${url}" alt="AiDoBot Robot ${i+1}"/>
    </div>`).join('');

  dotsEl.innerHTML = images.map((_, i) =>
    `<button class="hero-dot${i===0?' active':''}" onclick="goToSlide(${i})"></button>`
  ).join('');

  clearInterval(heroSlideTimer);
  if(images.length > 1) {
    heroSlideTimer = setInterval(() => goToSlide((heroSlideIndex + 1) % images.length), 3500);
  }
  heroSlideIndex = 0;
}

function goToSlide(idx) {
  const slides = document.querySelectorAll('.hero-slide');
  const dots   = document.querySelectorAll('.hero-dot');
  slides.forEach((s,i) => s.classList.toggle('active', i === idx));
  dots.forEach((d,i)   => d.classList.toggle('active', i === idx));
  heroSlideIndex = idx;
}

// ─── HERO IMAGES: refresh admin grid ─────────────────
function refreshHeroImgGrid() {
  const images = siteData.hero_images || [];
  const grid = document.getElementById('hero-img-grid');
  if(!grid) return;
  if(!images.length) {
    grid.innerHTML = '<p style="font-size:0.82rem;color:var(--text-light)">No images yet. Upload above.</p>';
    return;
  }
  grid.innerHTML = images.map((url, i) => `
    <div style="position:relative;border-radius:12px;overflow:hidden;aspect-ratio:1;background:var(--wood-100)">
      <img src="${url}" style="width:100%;height:100%;object-fit:cover"/>
      <button onclick="deleteHeroImage(${i})" style="
        position:absolute;top:6px;right:6px;
        background:rgba(200,50,50,0.85);color:white;
        border:none;border-radius:50%;width:26px;height:26px;
        font-size:0.8rem;cursor:pointer;line-height:1
      ">✕</button>
      ${i===0 ? '<div style="position:absolute;bottom:6px;left:6px;background:var(--wood-600);color:white;font-size:0.65rem;padding:2px 8px;border-radius:4px;font-family:Space Mono,monospace">MAIN</div>' : ''}
    </div>`).join('');
}

async function uploadHeroImages(input) {
  const files = Array.from(input.files);
  if(!files.length) return;
  showProgress('pb-hero');
  siteData.hero_images = siteData.hero_images || [];
  for(const file of files) {
    try {
      const url = await uploadToCloudinary(file, 'hero', 'image');
      siteData.hero_images.push(url);
    } catch(e) { console.error(e); }
  }
  hideProgress('pb-hero');
  const saved = await apiSave('hero_images', siteData.hero_images);
  if(saved) { renderHero(); refreshHeroImgGrid(); showMsg('msg-hero'); }
}

async function deleteHeroImage(idx) {
  if(!confirm('Delete this hero image?')) return;
  siteData.hero_images.splice(idx, 1);
  const saved = await apiSave('hero_images', siteData.hero_images);
  if(saved) { renderHero(); refreshHeroImgGrid(); showMsg('msg-hero'); }
}

function renderShorts() {
  const c = document.getElementById('shorts-container');
  if(!c) return;
  const items = siteData.reviews_video || [];
  if(!items.length) {
    c.innerHTML = [0,1,2,3,4].map(() => `<div class="short-card"><div class="ph-box" style="border-radius:20px"><div class="ph-icon">▶</div><div class="ph-label">Review coming soon</div></div></div>`).join('');
    return;
  }
  // Videos play INLINE — no lightbox popup
  // YouTube: embed with autoplay on click via iframe
  // Uploaded video: plays directly inside card with controls
  c.innerHTML = items.map((v, i) => {
    if(v.type === 'youtube') {
      // Use lazy-load: show thumbnail, swap to iframe on click
      const embedUrl = ytEmbed(v.url) + '&autoplay=1&rel=0&modestbranding=1';
      const thumbId = v.url.includes('shorts/') ? v.url.split('shorts/')[1].split('?')[0]
                    : (v.url.includes('v=') ? v.url.split('v=')[1].split('&')[0] : '');
      const thumb = thumbId ? `https://img.youtube.com/vi/${thumbId}/hqdefault.jpg` : '';
      return `<div class="short-card" id="sc-${i}">
        ${thumb ? `<img src="${thumb}" style="width:100%;height:100%;object-fit:cover;position:absolute;inset:0"/>` : ''}
        <div class="overlay"><div class="play-btn" onclick="playShort(${i},'${embedUrl}')">▶</div></div>
      </div>`;
    } else {
      return `<div class="short-card">
        <video src="${v.url}" playsinline controls style="width:100%;height:100%;object-fit:cover;position:absolute;inset:0;border-radius:0"></video>
      </div>`;
    }
  }).join('');
}

function playShort(idx, embedUrl) {
  const card = document.getElementById('sc-' + idx);
  if(!card) return;
  card.innerHTML = `<iframe src="${embedUrl}" frameborder="0" allowfullscreen
    style="position:absolute;inset:0;width:100%;height:100%;border-radius:20px"></iframe>`;
}

function renderStats() {
  const s = siteData.stats || DEFAULT.stats;
  setCounter('stat-accuracy', s.accuracy, '%');
  setCounter('stat-timesaved', s.time_saved, '%');
  setCounter('stat-screenings', s.daily_screenings, '+');
}

function setCounter(id, val, suffix) {
  const el = document.getElementById(id);
  if(!el) return;
  el.innerHTML = `${val}<sup>${suffix}</sup>`;
}

function renderJourney() {
  const c = document.getElementById('journey-grid');
  if(!c) return;
  const steps = siteData.journey_steps || DEFAULT.journey_steps;
  c.innerHTML = steps.map((s,i) => `
    <div class="journey-card reveal">
      <div class="journey-num">${String(i+1).padStart(2,'0')}</div>
      <h3>${s.title}</h3>
      <p style="font-size:0.88rem;color:var(--text-mid);line-height:1.6;margin-top:8px">${s.desc}</p>
      <div class="journey-video-wrap">
        ${s.video ? `<iframe src="${ytEmbed(s.video)}" frameborder="0" allowfullscreen></iframe>` : `<div class="ph-box" style="border-radius:12px"><div class="ph-icon">🎬</div><div class="ph-label">Video coming soon</div></div>`}
      </div>
    </div>`).join('');
}

function renderGallery() {
  const gallery = siteData.gallery || [];
  const grid = document.getElementById('gallery-grid');
  if(!gallery.length) return;
  const classes = ['g1','g2','g3','g4','g5'];
  const labels = ['Body Temperature Measurement','Blood Oxygen & Heart Rate','Weight & Height Measurement','Doctor Consultation','AI Face Analysis'];
  grid.innerHTML = gallery.slice(0,5).map((g,i) => `
    <div class="gal-item ${classes[i]}" onclick="openLightbox('${g.url}','${g.type||'image'}')">
      ${g.type==='video' ? `<video src="${g.url}" muted loop playsinline autoplay></video>` : `<img src="${g.url}" alt="Gallery"/>`}
      <div class="gal-label">${labels[i]||''}</div>
    </div>`).join('');
}

function renderVideoReviews() {
  const c = document.getElementById('video-reviews-grid');
  const items = (siteData.vreviews || [
    { url:'', title:'Patient Review', role:'First-time user experience', quote:'The robot spoke to me in my own language, checked my vitals, and connected me to a doctor in minutes.' },
    { url:'', title:'Doctor Review', role:'Medical professional perspective', quote:'Receiving a full patient report before the video call means I can focus entirely on diagnosis and treatment.' },
    { url:'', title:'Community Leader Review', role:'Community impact', quote:'Our community had no health post. Now we have AiDoBot. Everything changed for our people.' }
  ]);
  c.innerHTML = items.map(v => `
    <div class="vreview-card reveal">
      <div class="vreview-video">
        ${v.url ? `<iframe src="${ytEmbed(v.url)}" frameborder="0" allowfullscreen></iframe>` : `<div class="ph-box" style="border-radius:12px"><div class="ph-icon">🎬</div><div class="ph-label">Video coming soon</div></div>`}
      </div>
      <div class="vreview-body">
        <h3>${v.title||'Review'}</h3>
        <div class="vreview-role">${v.role||''}</div>
        <div class="vreview-quote">${v.quote||''}</div>
      </div>
    </div>`).join('');
}

function renderTeam() {
  const c = document.getElementById('team-grid');
  if(!c) return;
  const team = siteData.team || DEFAULT.team;
  c.innerHTML = team.map(m => `
    <div class="team-card reveal">
      <div class="team-avatar">${m.photo ? `<img src="${m.photo}" alt="${m.name}"/>` : m.emoji||'👤'}</div>
      <h3>${m.name}</h3>
      <div class="team-role">${m.role}</div>
      <p class="team-bio">${m.bio}</p>
    </div>`).join('');
}

function renderEvents() {
  const c = document.getElementById('events-grid');
  if(!c) return;
  const events = siteData.events || DEFAULT.events;
  c.innerHTML = events.map(e => `
    <div class="event-card reveal">
      <div class="event-img">${e.image ? `<img src="${e.image}" alt="${e.title}"/>` : e.icon}</div>
      <div class="event-body">
        <div class="event-date">${e.icon} ${e.date}</div>
        <h3>${e.title}</h3>
        <div class="event-loc">📍 ${e.location}</div>
        <p style="font-size:0.85rem;color:var(--text-mid);margin-top:8px;line-height:1.6">${e.desc}</p>
      </div>
    </div>`).join('');
}

function renderAnnouncements() {
  const c = document.getElementById('announce-list');
  if(!c) return;
  const items = siteData.announcements || DEFAULT.announcements;
  c.innerHTML = items.map(a => `
    <div class="announce-item reveal">
      <div class="announce-icon">${a.icon}</div>
      <div>
        <div class="announce-date">${a.date}</div>
        <h3>${a.title}</h3>
        <p>${a.body}</p>
      </div>
    </div>`).join('');
}

function renderPartners() {
  const c = document.getElementById('partners-grid');
  if(!c) return;
  const partners = siteData.partners || DEFAULT.partners;
  c.innerHTML = partners.map(p => `
    <div class="partner-chip reveal">
      ${p.logo
        ? `<img src="${p.logo}" class="partner-logo" alt="${p.name}"/>`
        : `<div class="icon">${p.icon||'🤝'}</div>`}
      <div>
        <div class="pname">${p.name}</div>
        <div class="ptype">${p.type}</div>
        ${p.desc ? `<div class="pdesc">${p.desc}</div>` : ''}
      </div>
    </div>`).join('');
}

function renderContact() {
  const ci = siteData.contact_info || DEFAULT.contact_info;
  const e1 = document.getElementById('ci-email1');
  const wa = document.getElementById('ci-whatsapp');
  const dp = document.getElementById('ci-deployment');
  const pt = document.getElementById('ci-partnerships');
  if(e1) e1.textContent = [ci.email1, ci.email2].filter(Boolean).join('\n');
  if(e1) e1.innerHTML  = [ci.email1, ci.email2].filter(Boolean).join('<br/>');
  if(wa) wa.textContent = ci.whatsapp || '';
  if(dp) dp.textContent = ci.deployment || '';
  if(pt) pt.textContent = ci.partnerships || '';
}

function renderSocial() {
  const s = siteData.social || DEFAULT.social;
  document.getElementById('yt-link').href = s.youtube||'#';
  document.getElementById('fb-link').href = s.facebook||'#';
  document.getElementById('ig-link').href = s.instagram||'#';
  document.getElementById('wa-link').href = s.whatsapp||'#';
  const yt = siteData.latest_youtube || '';
  const embed = document.getElementById('yt-embed');
  if(yt) {
    embed.innerHTML = `<iframe src="${ytEmbed(yt)}" frameborder="0" allowfullscreen style="width:100%;height:100%;border:none"></iframe>`;
  }
}

// ─── UTILITIES ───────────────────────────────────────
function ytEmbed(url) {
  if(!url) return '';
  let id = '';
  const m1 = url.match(/[?&]v=([^&]+)/);
  const m2 = url.match(/youtu\.be\/([^?]+)/);
  const m3 = url.match(/shorts\/([^?]+)/);
  if(m1) id = m1[1];
  else if(m2) id = m2[1];
  else if(m3) id = m3[1];
  if(id) return `https://www.youtube.com/embed/${id}?autoplay=0&rel=0`;
  return url;
}

function buildMarquee() {
  const items = ['Heart Rate Monitoring','Blood Oxygen Detection','Temperature Measurement','Face Analysis AI','Blood Pressure','Weight & Height','Video Doctor Call','Digital Prescription','Home Medicine Delivery','Multi-Language Support','24/7 Availability','AI Risk Assessment'];
  const html = items.map(i => `<div class="marquee-item"><span class="marquee-dot">✦</span>${i}</div>`).join('');
  const t = document.getElementById('marquee-track');
  t.innerHTML = html+html;
}

function animateStats() {
  const observer = new IntersectionObserver(entries => {
    entries.forEach(e => {
      if(e.isIntersecting) {
        const s = siteData.stats || DEFAULT.stats;
        countUp('stat-accuracy', s.accuracy, '%');
        countUp('stat-timesaved', s.time_saved, '%');
        countUp('stat-screenings', s.daily_screenings, '+');
        observer.disconnect();
      }
    });
  }, { threshold: 0.3 });
  const sec = document.getElementById('stats');
  if(sec) observer.observe(sec);
}

function countUp(id, target, suffix) {
  const el = document.getElementById(id);
  if(!el) return;
  let start = 0;
  const dur = 1800;
  const step = target / (dur / 16);
  const t = setInterval(() => {
    start = Math.min(start + step, target);
    el.innerHTML = `${Math.round(start)}<sup>${suffix}</sup>`;
    if(start >= target) clearInterval(t);
  }, 16);
}

// ─── SCROLL ──────────────────────────────────────────
function setupNavScroll() {
  window.addEventListener('scroll', () => {
    document.getElementById('navbar').classList.toggle('scrolled', window.scrollY > 60);
  });
}

function setupObserver() {
  // Reveal everything immediately on first load — no scroll needed
  // This prevents opacity:0 getting stuck if observer misfires
  function revealAll() {
    document.querySelectorAll('.reveal').forEach(el => el.classList.add('visible'));
  }

  // Reveal things already in viewport right now
  revealAll();

  // Also keep observing for scroll-triggered reveals (nice effect when scrolling)
  const obs = new IntersectionObserver(entries => {
    entries.forEach(e => { if(e.isIntersecting) e.target.classList.add('visible'); });
  }, { threshold: 0.05, rootMargin: '0px 0px -50px 0px' });

  document.querySelectorAll('.reveal').forEach(el => obs.observe(el));

  // Re-observe dynamically added elements (rendered by JS after page load)
  const bodyObs = new MutationObserver(() => {
    document.querySelectorAll('.reveal:not(.observed)').forEach(el => {
      el.classList.add('observed');
      el.classList.add('visible'); // make immediately visible
      obs.observe(el);
    });
  });
  bodyObs.observe(document.body, { childList: true, subtree: true });
}

// ─── LIGHTBOX ────────────────────────────────────────
function openLightbox(src, type) {
  const lb = document.getElementById('lightbox');
  const content = document.getElementById('lightbox-content');
  if(type === 'image') content.innerHTML = `<img src="${src}" alt=""/>`;
  else content.innerHTML = `<video src="${src}" controls autoplay style="max-width:90vw;max-height:85vh;border-radius:12px"></video>`;
  lb.classList.add('open');
}
document.getElementById('lightbox-close').onclick = () => document.getElementById('lightbox').classList.remove('open');
document.getElementById('lightbox').onclick = function(e) { if(e.target === this) this.classList.remove('open'); };

// ─── CONTACT ─────────────────────────────────────────
async function submitContact() {
  const body = {
    first: document.getElementById('cf-first').value,
    last: document.getElementById('cf-last').value,
    email: document.getElementById('cf-email').value,
    org: document.getElementById('cf-org').value,
    message: document.getElementById('cf-msg').value
  };
  try {
    await fetch(`${API}/api/contact`, { method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify(body) });
  } catch(e) {}
  document.getElementById('cf-success').style.display = 'block';
}

// ─── MOBILE MENU ─────────────────────────────────────
function toggleMenu() {
  const links = document.querySelector('.nav-links');
  if(!links) return;
  if(links.style.display === 'flex') { links.style.display = ''; }
  else { links.style.cssText = 'display:flex;flex-direction:column;position:fixed;top:70px;left:0;right:0;background:rgba(253,249,245,0.98);backdrop-filter:blur(20px);padding:24px;gap:20px;z-index:999;border-bottom:1px solid var(--wood-200)'; }
}

// ─── ADMIN ───────────────────────────────────────────
function openAdmin() { document.getElementById('admin-overlay').classList.add('open'); }
function closeAdmin() { document.getElementById('admin-overlay').classList.remove('open'); }

async function doLogin() {
  const pw = document.getElementById('admin-pw').value;
  const errEl = document.getElementById('login-err');
  errEl.textContent = 'Connecting to server...';

  try {
    const res = await fetch(`${API}/api/admin/login`, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ password: pw })
    });
    const d = await res.json();
    if(d.ok) {
      adminToken = d.token;
      localStorage.setItem('aidoAdminToken', adminToken);
      errEl.textContent = '';
      document.getElementById('admin-login').style.display = 'none';
      document.getElementById('admin-body').classList.add('visible');
      buildAdminForms();
    } else {
      errEl.textContent = '❌ Wrong password.';
    }
  } catch(e) {
    errEl.textContent = `❌ Cannot reach server at ${API}. Is the backend running?`;
  }
}

function switchTab(name) {
  document.querySelectorAll('.admin-tab').forEach(t => t.classList.toggle('active', t.dataset.tab === name));
  document.querySelectorAll('.admin-section').forEach(s => s.classList.toggle('active', s.id === `tab-${name}`));
}

function buildAdminForms() {
  buildJourneyInputs();
  buildVReviewInputs();
  buildTeamUploads();
  buildEventUploads();
  fillSocialInputs();
  fillStatsInputs();
  refreshHeroImgGrid();
  buildAnnounceAdminList();
  fillAIAdminFields();
  fillContactInputs();
  refreshAboutAdminGrid();
  refreshShortsList();
  refreshPartnersAdminList();
  refreshOrdersAdmin();
  refreshProductImagePreviews();
}

function buildJourneyInputs() {
  const steps = siteData.journey_steps || DEFAULT.journey_steps;
  document.getElementById('journey-inputs').innerHTML = steps.map((s,i) => `
    <div style="margin-bottom:14px">
      <label class="admin-label">Step ${i+1}: ${s.title}</label>
      <input class="admin-input" id="ji-${i}" value="${s.video||''}" placeholder="YouTube URL for this step"/>
    </div>`).join('');
}

function saveJourneyVideos() {
  const steps = siteData.journey_steps || DEFAULT.journey_steps;
  steps.forEach((s,i) => { s.video = document.getElementById(`ji-${i}`)?.value || ''; });
  siteData.journey_steps = steps;
  apiSave('journey_steps', steps);
  renderJourney();
  showMsg('msg-journey');
}

function buildVReviewInputs() {
  const vr = siteData.vreviews || [];
  const c = document.getElementById('vreview-inputs');
  c.innerHTML = vr.map((v,i) => vReviewRow(i, v)).join('');
  if(!vr.length) addVReviewInput();
}

function vReviewRow(i, v) {
  return `<div style="background:var(--wood-50);border:1px solid var(--wood-200);border-radius:12px;padding:16px;margin-bottom:12px">
    <label class="admin-label">YouTube URL</label>
    <input class="admin-input" id="vr-url-${i}" value="${v?.url||''}" placeholder="https://youtube.com/watch?v=..."/>
    <label class="admin-label">Title</label>
    <input class="admin-input" id="vr-title-${i}" value="${v?.title||''}" placeholder="Patient Review"/>
    <label class="admin-label">Role</label>
    <input class="admin-input" id="vr-role-${i}" value="${v?.role||''}" placeholder="First-time user experience"/>
    <label class="admin-label">Quote</label>
    <input class="admin-input" id="vr-quote-${i}" value="${v?.quote||''}" placeholder="What they said..."/>
  </div>`;
}

let vrCount = 0;
function addVReviewInput() {
  const c = document.getElementById('vreview-inputs');
  const d = document.createElement('div');
  d.innerHTML = vReviewRow(vrCount++, {});
  c.appendChild(d.firstElementChild);
}

function saveVReviews() {
  const items = [];
  let i = 0;
  while(document.getElementById(`vr-url-${i}`)) {
    items.push({
      url: document.getElementById(`vr-url-${i}`)?.value || '',
      title: document.getElementById(`vr-title-${i}`)?.value || '',
      role: document.getElementById(`vr-role-${i}`)?.value || '',
      quote: document.getElementById(`vr-quote-${i}`)?.value || ''
    });
    i++;
  }
  siteData.vreviews = items;
  apiSave('vreviews', items);
  renderVideoReviews();
  showMsg('msg-vreviews');
}

function buildTeamUploads() {
  const team = siteData.team || DEFAULT.team;
  document.getElementById('team-upload-list').innerHTML = team.map((m,i) => `
    <div style="display:flex;align-items:center;gap:14px;margin-bottom:12px;padding:12px;background:var(--wood-50);border-radius:12px;border:1px solid var(--wood-200)">
      <div style="width:52px;height:52px;border-radius:50%;background:var(--wood-100);display:flex;align-items:center;justify-content:center;font-size:1.5rem;overflow:hidden;flex-shrink:0">
        ${m.photo ? `<img src="${m.photo}" style="width:100%;height:100%;object-fit:cover;border-radius:50%"/>` : m.emoji||'👤'}
      </div>
      <div style="flex:1">
        <div style="font-weight:600;font-size:0.9rem">${m.name}</div>
        <div style="font-size:0.75rem;color:var(--wood-500)">${m.role}</div>
      </div>
      <label style="cursor:pointer;background:var(--wood-600);color:white;padding:8px 10px;border-radius:8px;font-size:0.78rem;white-space:nowrap">
        📷 Photo
        <input type="file" accept="image/*" style="display:none" onchange="uploadTeamPhoto(this,${i})"/>
      </label>
      <button onclick="deleteTeamMember(${i})" style="background:#c0392b;color:white;border:none;border-radius:8px;padding:8px 10px;cursor:pointer;font-size:0.78rem;flex-shrink:0">
        🗑 Delete
      </button>
    </div>`).join('');
}

function addTeamMemberForm() {
  document.getElementById('new-team-form').style.display = 'block';
  document.getElementById('new-team-form').scrollIntoView({behavior:'smooth'});
}

async function saveNewTeamMember() {
  const name  = document.getElementById('nt-name').value.trim();
  const role  = document.getElementById('nt-role').value.trim();
  const bio   = document.getElementById('nt-bio').value.trim();
  const emoji = document.getElementById('nt-emoji').value.trim() || '👤';
  if(!name || !role) { alert('Name and role are required.'); return; }
  siteData.team = siteData.team || DEFAULT.team;
  siteData.team.push({ name, role, bio, emoji, photo: '' });
  const saved = await apiSave('team', siteData.team);
  if(saved) {
    renderTeam();
    buildTeamUploads();
    showMsg('msg-team');
    document.getElementById('new-team-form').style.display = 'none';
    ['nt-name','nt-role','nt-bio','nt-emoji'].forEach(id => document.getElementById(id).value = '');
  }
}

async function deleteTeamMember(idx) {
  if(!confirm(`Delete "${(siteData.team||DEFAULT.team)[idx]?.name}"?`)) return;
  siteData.team = siteData.team || DEFAULT.team;
  siteData.team.splice(idx, 1);
  const saved = await apiSave('team', siteData.team);
  if(saved) { renderTeam(); buildTeamUploads(); showMsg('msg-team'); }
}

async function uploadTeamPhoto(input, idx) {
  const file = input.files[0];
  if(!file) return;
  try {
    const url = await uploadToCloudinary(file, 'team', 'image');
    siteData.team[idx].photo = url;
    const saved = await apiSave('team', siteData.team);
    if(saved) { renderTeam(); buildTeamUploads(); showMsg('msg-team'); }
  } catch(e) { console.error('Team photo failed:', e); }
}

function buildEventUploads() {
  const events = siteData.events || DEFAULT.events;
  document.getElementById('event-upload-list').innerHTML = events.map((e,i) => `
    <div style="margin-bottom:12px;padding:12px;background:var(--wood-50);border-radius:12px;border:1px solid var(--wood-200)">
      <div style="display:flex;align-items:center;gap:12px;margin-bottom:10px">
        <span style="font-size:1.4rem">${e.icon}</span>
        <div style="flex:1">
          <div style="font-weight:600;font-size:0.9rem">${e.title}</div>
          <div style="font-size:0.75rem;color:var(--wood-500)">${e.date} · ${e.location}</div>
        </div>
        <button onclick="deleteEvent(${i})" style="background:#c0392b;color:white;border:none;border-radius:8px;padding:6px 10px;cursor:pointer;font-size:0.78rem;flex-shrink:0">
          🗑 Delete
        </button>
      </div>
      <label style="cursor:pointer;background:var(--wood-600);color:white;padding:7px 12px;border-radius:8px;font-size:0.78rem;display:inline-block">
        📷 Upload Image
        <input type="file" accept="image/*" style="display:none" onchange="uploadEventImg(this,${i})"/>
      </label>
      ${e.image ? `<img src="${e.image}" style="margin-top:8px;border-radius:10px;max-height:80px"/>` : ''}
    </div>`).join('');
}

function showAddEventForm() {
  document.getElementById('new-event-form').style.display = 'block';
  document.getElementById('new-event-form').scrollIntoView({behavior:'smooth'});
}

async function saveNewEvent() {
  const title = document.getElementById('ne-title').value.trim();
  const date  = document.getElementById('ne-date').value.trim();
  const loc   = document.getElementById('ne-loc').value.trim();
  const desc  = document.getElementById('ne-desc').value.trim();
  const icon  = document.getElementById('ne-icon').value.trim() || '📅';
  if(!title) { alert('Event title is required.'); return; }
  siteData.events = siteData.events || DEFAULT.events;
  siteData.events.push({ title, date, location: loc, desc, icon, image: '' });
  const saved = await apiSave('events', siteData.events);
  if(saved) {
    renderEvents();
    buildEventUploads();
    showMsg('msg-events');
    document.getElementById('new-event-form').style.display = 'none';
    ['ne-title','ne-date','ne-loc','ne-desc','ne-icon'].forEach(id => document.getElementById(id).value = '');
  }
}

async function deleteEvent(idx) {
  if(!confirm(`Delete "${(siteData.events||DEFAULT.events)[idx]?.title}"?`)) return;
  siteData.events = siteData.events || DEFAULT.events;
  siteData.events.splice(idx, 1);
  const saved = await apiSave('events', siteData.events);
  if(saved) { renderEvents(); buildEventUploads(); showMsg('msg-events'); }
}

async function uploadEventImg(input, idx) {
  const file = input.files[0];
  if(!file) return;
  try {
    const url = await uploadToCloudinary(file, 'events', 'image');
    siteData.events[idx].image = url;
    const saved = await apiSave('events', siteData.events);
    if(saved) { renderEvents(); buildEventUploads(); showMsg('msg-events'); }
  } catch(e) { console.error('Event image failed:', e); }
}

function fillSocialInputs() {
  const s = siteData.social || DEFAULT.social;
  document.getElementById('soc-yt').value = s.youtube||'';
  document.getElementById('soc-yt-latest').value = siteData.latest_youtube||'';
  document.getElementById('soc-fb').value = s.facebook||'';
  document.getElementById('soc-ig').value = s.instagram||'';
  document.getElementById('soc-wa').value = s.whatsapp||'';
}

async function saveSocial() {
  const social = {
    youtube: document.getElementById('soc-yt').value,
    facebook: document.getElementById('soc-fb').value,
    instagram: document.getElementById('soc-ig').value,
    whatsapp: document.getElementById('soc-wa').value
  };
  siteData.social = social;
  siteData.latest_youtube = document.getElementById('soc-yt-latest').value;
  const s1 = await apiSave('social', social);
  const s2 = await apiSave('latest_youtube', siteData.latest_youtube);
  if(s1 && s2) { renderSocial(); showMsg('msg-social'); }
}

function fillStatsInputs() {
  const s = siteData.stats || DEFAULT.stats;
  document.getElementById('stat-acc-input').value = s.accuracy||98;
  document.getElementById('stat-ts-input').value = s.time_saved||70;
  document.getElementById('stat-sc-input').value = s.daily_screenings||500;
}

// ─── SOCIAL: add TikTok + LinkedIn to fill/save ──────
function fillSocialInputs() {
  const s = siteData.social || DEFAULT.social;
  document.getElementById('soc-yt').value = s.youtube||'';
  document.getElementById('soc-yt-latest').value = siteData.latest_youtube||'';
  document.getElementById('soc-fb').value = s.facebook||'';
  document.getElementById('soc-ig').value = s.instagram||'';
  document.getElementById('soc-wa').value = s.whatsapp||'';
  const tk = document.getElementById('soc-tk');
  const li = document.getElementById('soc-li');
  if(tk) tk.value = s.tiktok||'';
  if(li) li.value = s.linkedin||'';
}

// ─── ANNOUNCEMENTS ADMIN ──────────────────────────────
function buildAnnounceAdminList() {
  const list = document.getElementById('announce-admin-list');
  if(!list) return;
  const items = siteData.announcements || DEFAULT.announcements;
  if(!items.length) {
    list.innerHTML = '<p style="font-size:0.82rem;color:var(--text-light)">No announcements yet.</p>';
    return;
  }
  list.innerHTML = items.map((a,i) => `
    <div style="display:flex;align-items:center;gap:12px;padding:12px;background:var(--wood-50);border-radius:10px;border:1px solid var(--wood-200);margin-bottom:8px">
      <span style="font-size:1.4rem">${a.icon}</span>
      <div style="flex:1">
        <div style="font-weight:600;font-size:0.88rem">${a.title}</div>
        <div style="font-size:0.75rem;color:var(--wood-500)">${a.date}</div>
      </div>
      <button onclick="deleteAnnouncement(${i})" style="background:#c0392b;color:white;border:none;border-radius:8px;padding:6px 10px;cursor:pointer;font-size:0.78rem">
        🗑 Delete
      </button>
    </div>`).join('');
}

function showAddAnnouncementForm() {
  document.getElementById('new-announce-form').style.display = 'block';
  document.getElementById('new-announce-form').scrollIntoView({behavior:'smooth'});
}

async function saveNewAnnouncement() {
  const icon  = document.getElementById('na-icon').value.trim() || '📢';
  const date  = document.getElementById('na-date').value.trim();
  const title = document.getElementById('na-title').value.trim();
  const body  = document.getElementById('na-body').value.trim();
  if(!title) { alert('Title is required.'); return; }
  siteData.announcements = siteData.announcements || DEFAULT.announcements;
  siteData.announcements.unshift({ icon, date, title, body });
  const saved = await apiSave('announcements', siteData.announcements);
  if(saved) {
    renderAnnouncements();
    buildAnnounceAdminList();
    showMsg('msg-announce');
    document.getElementById('new-announce-form').style.display = 'none';
    ['na-icon','na-date','na-title','na-body'].forEach(id => document.getElementById(id).value = '');
  }
}

async function deleteAnnouncement(idx) {
  if(!confirm('Delete this announcement?')) return;
  siteData.announcements = siteData.announcements || DEFAULT.announcements;
  siteData.announcements.splice(idx, 1);
  const saved = await apiSave('announcements', siteData.announcements);
  if(saved) { renderAnnouncements(); buildAnnounceAdminList(); showMsg('msg-announce'); }
}

// ─── INBOX: load contact messages from backend ────────
async function loadInbox() {
  const box = document.getElementById('inbox-list');
  if(!box) return;
  box.innerHTML = '<div style="text-align:center;padding:20px;color:var(--text-light)">Loading...</div>';
  try {
    const res = await fetch(`${API}/api/admin/inbox`, {
      headers: { 'Authorization': `Bearer ${adminToken}` }
    });
    if(!res.ok) throw new Error('Failed');
    const messages = await res.json();
    if(!messages.length) {
      box.innerHTML = '<div style="text-align:center;padding:32px;color:var(--text-light);font-size:0.85rem">No messages yet. They will appear here when people fill the contact form.</div>';
      return;
    }
    box.innerHTML = messages.map((m,i) => `
      <div style="padding:16px;background:var(--wood-50);border:1px solid var(--wood-200);border-radius:12px;margin-bottom:12px">
        <div style="display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:8px">
          <div>
            <div style="font-weight:700;font-size:0.95rem">${m.first||''} ${m.last||''}</div>
            <div style="font-size:0.78rem;color:var(--wood-500)">${m.email||''} · ${m.org||''}</div>
          </div>
          <div style="display:flex;gap:8px;align-items:center">
            <span style="font-size:0.72rem;font-family:Space Mono,monospace;color:var(--text-light)">${m.created_at ? new Date(m.created_at).toLocaleDateString() : ''}</span>
            <button onclick="deleteMessage(${m.id})" style="background:#c0392b;color:white;border:none;border-radius:6px;padding:4px 8px;cursor:pointer;font-size:0.72rem">🗑</button>
          </div>
        </div>
        <div style="font-size:0.88rem;color:var(--text-mid);line-height:1.6;background:white;padding:10px 12px;border-radius:8px;border:1px solid var(--wood-100)">${m.message||''}</div>
      </div>`).join('');
  } catch(e) {
    box.innerHTML = `<div style="text-align:center;padding:20px;color:#c0392b;font-size:0.85rem">❌ Error loading inbox: ${e.message}</div>`;
  }
}

async function deleteMessage(id) {
  if(!confirm('Delete this message?')) return;
  try {
    await fetch(`${API}/api/admin/inbox/${id}`, {
      method: 'DELETE',
      headers: { 'Authorization': `Bearer ${adminToken}` }
    });
    loadInbox();
  } catch(e) { alert('Delete failed: ' + e.message); }
}

async function saveStats() {
  const stats = {
    accuracy: parseInt(document.getElementById('stat-acc-input').value)||98,
    time_saved: parseInt(document.getElementById('stat-ts-input').value)||70,
    daily_screenings: parseInt(document.getElementById('stat-sc-input').value)||500
  };
  siteData.stats = stats;
  const saved = await apiSave('stats', stats);
  if(saved) { animateStats(); showMsg('msg-stats'); }
}

// ─── FILE UPLOADS ────────────────────────────────────
async function uploadFile(input, section, resourceType, key) {
  const file = input.files[0];
  if(!file) return;
  showProgress(`pb-${section}`);
  try {
    const url = await uploadToCloudinary(file, section, resourceType);
    hideProgress(`pb-${section}`);

    if(key === 'hero-robot') {
      siteData.hero = siteData.hero || {};
      siteData.hero.robot_image = url;
      const saved = await apiSave('hero', siteData.hero);
      if(saved) {
        renderHero();
        showMsg('msg-hero');
      }
    }
  } catch(e) {
    hideProgress(`pb-${section}`);
    console.error('Upload error:', e);
  }
}

async function uploadMultiple(input, section, resourceType='image') {
  const files = Array.from(input.files);
  if(!files.length) return;
  showProgress(`pb-${section}`);

  for(const file of files) {
    try {
      const rtype = file.type.startsWith('video') ? 'video' : 'image';
      const url = await uploadToCloudinary(file, section, rtype);
      if(section === 'shorts') {
        siteData.reviews_video = siteData.reviews_video || [];
        siteData.reviews_video.push({ url, type: rtype });
      } else {
        siteData.gallery = siteData.gallery || [];
        siteData.gallery.push({ url, type: rtype });
      }
    } catch(e) {
      console.error('Upload error for file:', file.name, e);
    }
  }

  hideProgress(`pb-${section}`);

  if(section === 'gallery') {
    const saved = await apiSave('gallery', siteData.gallery);
    if(saved) { renderGallery(); showMsg('msg-gallery'); }
  }
  if(section === 'shorts') {
    const saved = await apiSave('reviews_video', siteData.reviews_video);
    if(saved) { renderShorts(); showMsg('msg-shorts'); }
  }
  refreshMediaGrid(section);
}

async function addShortUrl() {
  const url = document.getElementById('short-url-input').value.trim();
  if(!url) return;
  siteData.reviews_video = siteData.reviews_video || [];
  siteData.reviews_video.push({ url, type:'youtube' });
  const saved = await apiSave('reviews_video', siteData.reviews_video);
  if(saved) {
    renderShorts();
    refreshMediaGrid('shorts');
    document.getElementById('short-url-input').value = '';
    showMsg('msg-shorts');
  }
}

function refreshMediaGrid(section) {
  if(section === 'shorts') {
    refreshShortsList();
    return;
  }
  // Gallery grid
  const arr = siteData.gallery || [];
  const c = document.getElementById('media-gallery');
  if(!c) return;
  c.innerHTML = arr.map((item,i) => `
    <div class="media-thumb">
      ${item.type==='video' ? `<video src="${item.url}" muted style="background:#333;width:100%;height:100%;object-fit:cover"></video>` : `<img src="${item.url}" alt=""/>`}
      <button class="del-btn" onclick="deleteMedia('gallery',${i})">✕</button>
    </div>`).join('');
}

function refreshShortsList() {
  const items = siteData.reviews_video || [];
  const list  = document.getElementById('shorts-list');
  const count = document.getElementById('shorts-count');
  if(!list) return;
  if(count) count.textContent = items.length ? `(${items.length} item${items.length>1?'s':''})` : '(none yet)';

  if(!items.length) {
    list.innerHTML = '<div style="padding:16px;text-align:center;color:var(--text-light);font-size:0.83rem;background:var(--wood-100);border-radius:10px">No short videos yet. Upload above or add a YouTube URL.</div>';
    return;
  }

  list.innerHTML = items.map((item, i) => {
    // Get thumbnail for YouTube
    let thumb = '';
    let label = '';
    if(item.type === 'youtube') {
      const m = item.url.match(/shorts\/([^?]+)/) || item.url.match(/v=([^&]+)/) || item.url.match(/youtu\.be\/([^?]+)/);
      const vid = m ? m[1] : '';
      thumb = vid ? `https://img.youtube.com/vi/${vid}/mqdefault.jpg` : '';
      label = 'YouTube Short';
    } else {
      label = 'Uploaded Video';
    }
    return `
    <div style="display:flex;align-items:center;gap:12px;background:var(--wood-100);border-radius:12px;padding:10px 14px;border:1px solid var(--wood-200)">
      <div style="width:54px;height:54px;border-radius:8px;overflow:hidden;flex-shrink:0;background:#222">
        ${thumb
          ? `<img src="${thumb}" style="width:100%;height:100%;object-fit:cover"/>`
          : item.type === 'youtube'
            ? `<div style="width:100%;height:100%;display:flex;align-items:center;justify-content:center;font-size:1.4rem">▶</div>`
            : `<video src="${item.url}" muted style="width:100%;height:100%;object-fit:cover"></video>`
        }
      </div>
      <div style="flex:1;min-width:0">
        <div style="font-size:0.78rem;font-weight:600;color:var(--wood-700)">${label} #${i+1}</div>
        <div style="font-size:0.68rem;color:var(--text-light);word-break:break-all;margin-top:2px">${item.url.slice(0,55)}${item.url.length>55?'…':''}</div>
      </div>
      <button onclick="deleteShort(${i})" style="
        flex-shrink:0;background:rgba(200,50,50,0.12);border:1px solid rgba(200,50,50,0.3);
        color:#c33;padding:6px 12px;border-radius:8px;cursor:pointer;
        font-size:0.78rem;font-family:'DM Sans',sans-serif;font-weight:600;
        transition:background 0.2s
      " onmouseover="this.style.background='rgba(200,50,50,0.25)'" onmouseout="this.style.background='rgba(200,50,50,0.12)'">
        🗑 Delete
      </button>
    </div>`;
  }).join('');
}

function deleteMedia(section, idx) {
  const arr = section === 'gallery' ? siteData.gallery : siteData.reviews_video;
  if(!arr) return;
  arr.splice(idx, 1);
  if(section === 'gallery') { apiSave('gallery', siteData.gallery); renderGallery(); refreshMediaGrid('gallery'); }
}

async function deleteShort(idx) {
  if(!confirm('Delete this short video?')) return;
  siteData.reviews_video = siteData.reviews_video || [];
  siteData.reviews_video.splice(idx, 1);
  const saved = await apiSave('reviews_video', siteData.reviews_video);
  if(saved) { renderShorts(); refreshShortsList(); showMsg('msg-shorts'); }
}

// ─── UPLOAD TO CLOUDINARY VIA BACKEND ───────────────
async function uploadToCloudinary(file, section, resourceType) {
  const fd = new FormData();
  fd.append('file', file);
  fd.append('section', section);
  fd.append('resource_type', resourceType);

  showAdminStatus(`⏳ Uploading ${file.name} to Cloudinary...`);

  const res = await fetch(`${API}/api/admin/upload`, {
    method: 'POST',
    headers: { 'Authorization': `Bearer ${adminToken}` },
    body: fd
  });

  if (!res.ok) {
    const err = await res.text();
    showAdminStatus(`❌ Upload failed: ${err}`, true);
    throw new Error(`Upload failed: ${err}`);
  }

  const d = await res.json();
  showAdminStatus(`✅ Uploaded successfully to Cloudinary!`);
  return d.url; // permanent Cloudinary URL — never expires
}

// ─── SAVE SECTION TO NEON DB VIA BACKEND ─────────────
// ════════════════════════════════════════════════════
// ─── PARTNERS ADMIN ──────────────────────────────────
// ════════════════════════════════════════════════════

let pendingPartnerLogoFile = null;

function previewPartnerLogo(input) {
  const file = input.files[0];
  if(!file) return;
  pendingPartnerLogoFile = file;
  const prev = document.getElementById('new-partner-logo-preview');
  if(prev) {
    const url = URL.createObjectURL(file);
    prev.innerHTML = `<img src="${url}" style="height:60px;border-radius:8px;border:1px solid var(--wood-200);padding:4px;background:rgba(255,255,255,0.05)"/>`;
  }
}

async function addPartner() {
  const name = document.getElementById('new-partner-name')?.value.trim();
  const type = document.getElementById('new-partner-type')?.value.trim();
  const icon = document.getElementById('new-partner-icon')?.value.trim() || '🤝';
  const desc = document.getElementById('new-partner-desc')?.value.trim() || '';

  if(!name) { alert('Please enter a partner name.'); return; }

  let logo = '';
  if(pendingPartnerLogoFile) {
    showProgress('pb-partner-logo');
    try {
      logo = await uploadToCloudinary(pendingPartnerLogoFile, 'partners', 'image');
    } catch(e) {
      showAdminStatus('Logo upload failed: ' + e.message, true);
    }
    hideProgress('pb-partner-logo');
    pendingPartnerLogoFile = null;
  }

  siteData.partners = siteData.partners || [];
  siteData.partners.push({ name, type, icon, desc, logo });

  const saved = await apiSave('partners', siteData.partners);
  if(saved) {
    renderPartners();
    refreshPartnersAdminList();
    showMsg('msg-partner-add');
    // Clear form
    ['new-partner-name','new-partner-type','new-partner-icon','new-partner-desc'].forEach(id => {
      const el = document.getElementById(id);
      if(el) el.value = '';
    });
    const prev = document.getElementById('new-partner-logo-preview');
    if(prev) prev.innerHTML = '';
    const inp = document.getElementById('new-partner-logo-input');
    if(inp) inp.value = '';
  }
}

async function deletePartner(idx) {
  if(!confirm('Remove this partner?')) return;
  siteData.partners = siteData.partners || [];
  siteData.partners.splice(idx, 1);
  const saved = await apiSave('partners', siteData.partners);
  if(saved) {
    renderPartners();
    refreshPartnersAdminList();
    showMsg('msg-partner-delete');
  }
}

function refreshPartnersAdminList() {
  const list  = document.getElementById('partners-admin-list');
  const count = document.getElementById('partners-count');
  if(!list) return;
  const partners = siteData.partners || DEFAULT.partners;
  if(count) count.textContent = partners.length ? `(${partners.length})` : '(none)';

  if(!partners.length) {
    list.innerHTML = '<div style="padding:16px;text-align:center;color:var(--text-light);font-size:0.83rem;background:var(--wood-100);border-radius:10px">No partners yet. Add one above.</div>';
    return;
  }

  list.innerHTML = partners.map((p, i) => `
    <div style="display:flex;align-items:center;gap:12px;background:var(--wood-100);border-radius:12px;padding:12px 14px;border:1px solid var(--wood-200)">
      <div style="width:48px;height:48px;border-radius:10px;overflow:hidden;flex-shrink:0;background:rgba(255,255,255,0.06);display:flex;align-items:center;justify-content:center;">
        ${p.logo
          ? `<img src="${p.logo}" style="width:100%;height:100%;object-fit:contain;padding:3px"/>`
          : `<span style="font-size:1.6rem">${p.icon||'🤝'}</span>`}
      </div>
      <div style="flex:1;min-width:0">
        <div style="font-size:0.88rem;font-weight:600;color:var(--wood-700)">${p.name}</div>
        <div style="font-size:0.7rem;font-family:Space Mono,monospace;color:var(--wood-500);margin-top:2px">${p.type}</div>
        ${p.desc ? `<div style="font-size:0.75rem;color:var(--text-light);margin-top:3px">${p.desc}</div>` : ''}
      </div>
      <button onclick="deletePartner(${i})" style="
        flex-shrink:0;background:rgba(200,50,50,0.12);border:1px solid rgba(200,50,50,0.3);
        color:#c33;padding:6px 12px;border-radius:8px;cursor:pointer;
        font-size:0.78rem;font-weight:600;transition:background 0.2s;
      " onmouseover="this.style.background='rgba(200,50,50,0.25)'" onmouseout="this.style.background='rgba(200,50,50,0.12)'">
        🗑 Delete
      </button>
    </div>`).join('');
}

async function saveContactInfo() {
  const g = id => document.getElementById(id)?.value.trim() || '';
  const ci = {
    email1:       g('ci-email1-input'),
    email2:       g('ci-email2-input'),
    whatsapp:     g('ci-whatsapp-input'),
    deployment:   g('ci-deployment-input'),
    partnerships: g('ci-partnerships-input'),
  };
  siteData.contact_info = ci;
  const saved = await apiSave('contact_info', ci);
  if(saved) { renderContact(); showMsg('msg-contact-info'); }
}

async function apiSave(section, data) {
  showAdminStatus(`💾 Saving ${section}...`);
  try {
    const res = await fetch(`${API}/api/admin/update`, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'Authorization': `Bearer ${adminToken}`
      },
      body: JSON.stringify({ section, data })
    });
    if (!res.ok) {
      const err = await res.text();
      showAdminStatus(`❌ Save failed: ${err}`, true);
      return false;
    }
    showAdminStatus(`✅ ${section} saved to database!`);
    return true;
  } catch(e) {
    showAdminStatus(`❌ Network error: ${e.message}`, true);
    return false;
  }
}

// ─── ADMIN STATUS BAR ────────────────────────────────
function showAdminStatus(msg, isError = false) {
  let bar = document.getElementById('admin-status-bar');
  if (!bar) {
    bar = document.createElement('div');
    bar.id = 'admin-status-bar';
    bar.style.cssText = `
      position:fixed; bottom:90px; right:28px; z-index:10001;
      background:${isError ? '#c0392b' : '#2d6a4f'};
      color:white; padding:12px 18px; border-radius:12px;
      font-size:0.85rem; font-family:'Space Mono',monospace;
      box-shadow:0 4px 20px rgba(0,0,0,0.3);
      max-width:320px; line-height:1.4;
      transition: opacity 0.3s;
    `;
    document.body.appendChild(bar);
  } else {
    bar.style.background = isError ? '#c0392b' : '#2d6a4f';
  }
  bar.textContent = msg;
  bar.style.opacity = '1';
  clearTimeout(bar._timer);
  bar._timer = setTimeout(() => { bar.style.opacity = '0'; }, 4000);
}

// ─── UI HELPERS ──────────────────────────────────────
function showProgress(id) {
  const el = document.getElementById(id);
  if(!el) return;
  el.style.display = 'block';
  el.querySelector('.fill').style.width = '80%';
}
function hideProgress(id) {
  const el = document.getElementById(id);
  if(!el) return;
  el.querySelector('.fill').style.width = '100%';
  setTimeout(() => { el.style.display = 'none'; el.querySelector('.fill').style.width='0'; }, 600);
}
function showMsg(id) {
  const el = document.getElementById(id);
  if(!el) return;
  el.style.display = 'block';
  setTimeout(() => { el.style.display = 'none'; }, 3000);
}

// ════════════════════════════════════════════════════
// ─── AI AVATAR POPUP ─────────────────────────────────
// ════════════════════════════════════════════════════

let avatarOpen     = false;
let avatarTalking  = false;
let avatarMicOn    = false;
let avatarRecog    = null;   // SpeechRecognition instance
let avatarHistory  = [];     // conversation history

// ── Init: show popup after 5s ────────────────────────
function initAIPopup() {
  // Remove old session flag so popup shows each page load
  sessionStorage.removeItem('avatarShown');
  setTimeout(showAIPopup, 5000);
}

function showAIPopup() {
  if(sessionStorage.getItem('avatarShown')) return;
  const overlay = document.getElementById('ai-popup-overlay');
  const card    = document.getElementById('ai-popup-card');
  if(!overlay || !card) return;

  avatarOpen = true;
  overlay.style.display = 'block';
  requestAnimationFrame(() => {
    card.style.transform = 'translate(-50%,-50%) scale(1)';
    card.style.opacity   = '1';
  });

  // Load avatar videos
  loadAvatarVideos();

  // Speak opening greeting after short delay
  setTimeout(() => {
    const greeting = siteData.popup_greeting || "Hello! I am AiDoBot, your AI healthcare companion. How can I help you today?";
    setAvatarResponse(greeting);
    avatarSpeak(greeting);
  }, 600);
}

function dismissAIPopup() {
  const overlay = document.getElementById('ai-popup-overlay');
  const card    = document.getElementById('ai-popup-card');
  if(!overlay || !card) return;
  window.speechSynthesis && window.speechSynthesis.cancel();
  stopAvatarMic();
  card.style.transform = 'translate(-50%,-50%) scale(0.85)';
  card.style.opacity   = '0';
  setTimeout(() => {
    overlay.style.display = 'none';
    avatarOpen = false;
  }, 400);
  sessionStorage.setItem('avatarShown', '1');
}

// ── Load the two avatar videos ───────────────────────
function loadAvatarVideos() {
  const idleVid  = document.getElementById('avatar-idle');
  const talkVid  = document.getElementById('avatar-talk');
  const ph       = document.getElementById('avatar-placeholder');

  const idleSrc  = siteData.avatar_idle_video || '';
  const talkSrc  = siteData.avatar_talk_video || '';

  if(idleSrc) {
    idleVid.src = idleSrc;
    idleVid.style.opacity = '1';
    idleVid.play().catch(()=>{});
    if(ph) ph.style.display = 'none';
  }
  if(talkSrc) {
    talkVid.src = talkSrc;
    talkVid.load();
  }
}

// ── Switch between idle ↔ talking video ──────────────
function setAvatarTalking(isTalking) {
  avatarTalking = isTalking;
  const idleVid  = document.getElementById('avatar-idle');
  const talkVid  = document.getElementById('avatar-talk');
  const bars     = document.getElementById('avatar-speak-bars');
  const statusTx = document.getElementById('avatar-status-text');

  if(isTalking && siteData.avatar_talk_video) {
    idleVid.style.opacity = '0';
    talkVid.style.opacity = '1';
    talkVid.play().catch(()=>{});
    if(bars)     { bars.style.display = 'flex'; }
    if(statusTx) statusTx.textContent = 'AiDoBot is speaking…';
  } else {
    idleVid.style.opacity = '1';
    talkVid.style.opacity = '0';
    talkVid.pause();
    if(bars)     { bars.style.display = 'none'; }
    if(statusTx) statusTx.textContent = avatarMicOn ? '🎤 Listening…' : 'AiDoBot AI';
  }
}

// ── Display text response in bubble ──────────────────
function setAvatarResponse(text) {
  const el = document.getElementById('avatar-response');
  if(el) el.textContent = text;
}

// ── Speak text with TTS + switch to talking video ────
function avatarSpeak(text) {
  if(!window.speechSynthesis) return;
  window.speechSynthesis.cancel();

  const utt    = new SpeechSynthesisUtterance(text);
  utt.rate     = 0.92;
  utt.pitch    = 1.05;
  utt.volume   = 1;

  // Pick a good English voice if available
  const voices = window.speechSynthesis.getVoices();
  const nice   = voices.find(v => v.lang.startsWith('en') &&
    (v.name.includes('Samantha') || v.name.includes('Google UK') || v.name.includes('Female')));
  if(nice) utt.voice = nice;

  utt.onstart = () => setAvatarTalking(true);
  utt.onend   = () => setAvatarTalking(false);
  utt.onerror = () => setAvatarTalking(false);

  window.speechSynthesis.speak(utt);
}

// ── Send typed/spoken message to Groq AI ─────────────
async function sendAvatarMessage() {
  const input = document.getElementById('avatar-text-input');
  if(!input) return;
  const text = input.value.trim();
  if(!text) return;
  input.value = '';

  // Show user's message briefly then clear for AI response
  setAvatarResponse('You: ' + text);
  setAvatarTalking(false);

  // Update status
  const statusEl = document.getElementById('avatar-status-text');
  if(statusEl) statusEl.textContent = 'Thinking…';

  avatarHistory.push({ role: 'user', content: text });
  if(avatarHistory.length > 10) avatarHistory = avatarHistory.slice(-10);

  try {
    const reply = await callGroqAI(text, avatarHistory);
    avatarHistory.push({ role: 'assistant', content: reply });
    setAvatarResponse(reply);
    avatarSpeak(reply);
  } catch(e) {
    const errMsg = "Sorry, I had trouble connecting. Please try again!";
    setAvatarResponse(errMsg);
    avatarSpeak(errMsg);
    if(statusEl) statusEl.textContent = 'AiDoBot AI';
  }
}

// ── Mic: speech-to-text ───────────────────────────────
function toggleAvatarMic() {
  if(avatarMicOn) {
    stopAvatarMic();
  } else {
    startAvatarMic();
  }
}

function startAvatarMic() {
  const SpeechRecog = window.SpeechRecognition || window.webkitSpeechRecognition;
  if(!SpeechRecog) {
    alert('Speech recognition is not supported in your browser. Please use Chrome.');
    return;
  }

  window.speechSynthesis && window.speechSynthesis.cancel();
  setAvatarTalking(false);

  avatarRecog = new SpeechRecog();
  avatarRecog.lang        = 'en-US';
  avatarRecog.continuous  = false;
  avatarRecog.interimResults = false;

  avatarRecog.onstart = () => {
    avatarMicOn = true;
    const btn = document.getElementById('avatar-mic-btn');
    if(btn) { btn.textContent = '🔴'; btn.style.background = 'rgba(220,50,50,0.4)'; btn.style.borderColor = 'rgba(220,50,50,0.8)'; }
    const statusEl = document.getElementById('avatar-status-text');
    if(statusEl) statusEl.textContent = '🎤 Listening…';
  };

  avatarRecog.onresult = (e) => {
    const transcript = e.results[0][0].transcript;
    const input = document.getElementById('avatar-text-input');
    if(input) input.value = transcript;
    stopAvatarMic();
    sendAvatarMessage();
  };

  avatarRecog.onerror = (e) => {
    console.warn('Mic error:', e.error);
    stopAvatarMic();
  };

  avatarRecog.onend = () => stopAvatarMic();

  avatarRecog.start();
}

function stopAvatarMic() {
  avatarMicOn = false;
  if(avatarRecog) { try { avatarRecog.stop(); } catch(e){} avatarRecog = null; }
  const btn = document.getElementById('avatar-mic-btn');
  if(btn) { btn.textContent = '🎤'; btn.style.background = 'rgba(255,255,255,0.08)'; btn.style.borderColor = 'rgba(255,255,255,0.2)'; }
  const statusEl = document.getElementById('avatar-status-text');
  if(statusEl && !avatarTalking) statusEl.textContent = 'AiDoBot AI';
}

// ── Admin: upload avatar videos ───────────────────────
async function uploadAvatarVideo(input, type) {
  const file = input.files[0];
  if(!file) return;
  const pbId   = type === 'idle' ? 'pb-avatar-idle' : 'pb-avatar-talk';
  const prevId = type === 'idle' ? 'avatar-idle-preview' : 'avatar-talk-preview';
  const key    = type === 'idle' ? 'avatar_idle_video' : 'avatar_talk_video';

  showProgress(pbId);
  try {
    const url = await uploadToCloudinary(file, 'ai_avatar', 'video');
    hideProgress(pbId);
    siteData[key] = url;
    await apiSave(key, url);
    const prev = document.getElementById(prevId);
    if(prev) prev.innerHTML = `<video src="${url}" controls muted style="width:100%;border-radius:10px;max-height:140px;margin-top:4px"></video>`;
    showMsg('msg-robotvid');
  } catch(e) {
    hideProgress(pbId);
    showAdminStatus('Upload failed: ' + e.message, true);
  }
}

// ── Admin: save popup greeting ────────────────────────
async function savePopupGreeting() {
  const text = document.getElementById('popup-greeting-script')?.value.trim();
  if(!text) return;
  siteData.popup_greeting = text;
  const saved = await apiSave('popup_greeting', text);
  if(saved) showMsg('msg-popup-greeting');
}

// ── Admin: fill AI fields on admin open ──────────────
function fillAIAdminFields() {
  const pg = document.getElementById('popup-greeting-script');
  if(pg) pg.value = siteData.popup_greeting || '';
  const cbn = document.getElementById('cb-name');
  if(cbn) cbn.value = siteData.chatbot_name || '';
  const cbg = document.getElementById('cb-greeting');
  if(cbg) cbg.value = siteData.chatbot_greeting || '';
  const cbe = document.getElementById('cb-emoji');
  if(cbe) cbe.value = siteData.chatbot_emoji || '🤖';
  const kb = document.getElementById('ai-knowledge-base');
  if(kb) {
    kb.value = siteData.ai_knowledge_base || '';
    updateKbCount();
    kb.addEventListener('input', updateKbCount);
  }
  // Show existing video previews
  const idlePrev = document.getElementById('avatar-idle-preview');
  const talkPrev = document.getElementById('avatar-talk-preview');
  if(idlePrev && siteData.avatar_idle_video) {
    idlePrev.innerHTML = `<video src="${siteData.avatar_idle_video}" controls muted style="width:100%;border-radius:10px;max-height:140px;margin-top:4px"></video>`;
  }
  if(talkPrev && siteData.avatar_talk_video) {
    talkPrev.innerHTML = `<video src="${siteData.avatar_talk_video}" controls muted style="width:100%;border-radius:10px;max-height:140px;margin-top:4px"></video>`;
  }
}

// ════════════════════════════════════════════════════
// ─── CHATBOT (BOTTOM RIGHT BUBBLE) ───────────────────
// ════════════════════════════════════════════════════
const GROQ_API_KEY = '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';
const GROQ_MODEL   = 'llama-3.3-70b-versatile';
let chatbotOpen  = false;
let chatHistory  = [];

function toggleChatbot() {
  chatbotOpen = !chatbotOpen;
  const win = document.getElementById('chatbot-window');
  const btn = document.getElementById('chatbot-trigger');
  const u   = document.getElementById('chat-unread');
  if(win) win.style.display = chatbotOpen ? 'flex' : 'none';
  if(btn) btn.textContent  = chatbotOpen ? '✕' : (siteData.chatbot_emoji || '💬');
  if(u && chatbotOpen) u.style.display = 'none';
  if(chatbotOpen && document.getElementById('chat-messages')?.children.length === 0) {
    const greeting = siteData.chatbot_greeting || "Hi! I'm AiDoBot's AI assistant. Ask me anything!";
    addChatMessage('bot', greeting);
  }
}

function addChatMessage(role, text) {
  const msgs  = document.getElementById('chat-messages');
  if(!msgs) return;
  const emoji = siteData.chatbot_emoji || '🤖';
  const isBot = role === 'bot';
  const div   = document.createElement('div');
  div.className = 'chat-msg ' + role;
  div.innerHTML = `
    ${isBot ? `<div class="chat-avatar">${emoji}</div>` : ''}
    <div class="chat-bubble ${role}">${text.replace(/\n/g,'<br/>')}</div>
    ${!isBot ? '<div class="chat-avatar" style="background:var(--wood-400);color:white">👤</div>' : ''}
  `;
  msgs.appendChild(div);
  msgs.scrollTop = msgs.scrollHeight;
}

function showTyping() {
  const msgs = document.getElementById('chat-messages');
  if(!msgs) return;
  const div = document.createElement('div');
  div.id = 'typing-indicator';
  div.className = 'chat-msg bot';
  div.innerHTML = `<div class="chat-avatar">${siteData.chatbot_emoji||'🤖'}</div>
    <div class="chat-bubble bot" style="padding:10px 14px">
      <span style="display:inline-flex;gap:4px;align-items:center">
        <span style="width:7px;height:7px;border-radius:50%;background:var(--wood-400);animation:speakBar 0.8s infinite 0s;display:inline-block"></span>
        <span style="width:7px;height:7px;border-radius:50%;background:var(--wood-400);animation:speakBar 0.8s infinite 0.2s;display:inline-block"></span>
        <span style="width:7px;height:7px;border-radius:50%;background:var(--wood-400);animation:speakBar 0.8s infinite 0.4s;display:inline-block"></span>
      </span>
    </div>`;
  msgs.appendChild(div);
  msgs.scrollTop = msgs.scrollHeight;
}

function hideTyping() {
  const t = document.getElementById('typing-indicator');
  if(t) t.remove();
}

async function sendChatMessage() {
  const input = document.getElementById('chat-input');
  if(!input) return;
  const text = input.value.trim();
  if(!text) return;
  addChatMessage('user', text);
  chatHistory.push({ role:'user', content:text });
  input.value = '';
  showTyping();
  try {
    const reply = await callGroqAI(text);
    hideTyping();
    addChatMessage('bot', reply);
    chatHistory.push({ role:'assistant', content:reply });
    if(chatHistory.length > 12) chatHistory = chatHistory.slice(-12);
  } catch(e) {
    hideTyping();
    console.error('Groq full error:', e);
    addChatMessage('bot', `⚠️ Error: ${e.message}`);
  }
}

async function callGroqAI(userMessage) {
  const kb = siteData.ai_knowledge_base || 'AiDoBot is an AI-powered medical robot. Features: vitals checking, multilingual support, video doctor consultations, digital prescriptions, medicine delivery. Contact: hello@aidoBot.com';
  const systemPrompt = `You are AiDoBot's friendly AI assistant. Only answer questions about AiDoBot and related healthcare topics. Be warm, concise, under 120 words. Knowledge base:\n\n${kb}`;
  const messages = [
    { role:'system', content:systemPrompt },
    ...chatHistory.slice(-10),
    { role:'user', content:userMessage }
  ];
  let res;
  try {
    res = await fetch('https://api.groq.com/openai/v1/chat/completions', {
      method:'POST',
      headers:{ 'Content-Type':'application/json', 'Authorization':`Bearer ${GROQ_API_KEY}` },
      body: JSON.stringify({ model:GROQ_MODEL, messages, max_tokens:300, temperature:0.65, stream:false })
    });
  } catch(e) { throw new Error('Network failed: ' + e.message); }
  if(!res.ok) { const err = await res.text(); throw new Error(`Groq ${res.status}: ${err}`); }
  const data = await res.json();
  const reply = data?.choices?.[0]?.message?.content?.trim();
  if(!reply) throw new Error('Empty response from Groq');
  return reply;
}

function updateChatbotUI() {
  const btn   = document.getElementById('chatbot-trigger');
  const name  = document.getElementById('chatbot-name-display');
  const emoji = siteData.chatbot_emoji || '💬';
  if(btn && !chatbotOpen) btn.textContent = emoji;
  if(name) name.textContent = siteData.chatbot_name || 'AiDoBot Assistant';
}

function updateKbCount() {
  const kb = document.getElementById('ai-knowledge-base');
  const ct = document.getElementById('kb-char-count');
  if(kb && ct) ct.textContent = kb.value.length + ' chars';
}

async function saveChatbotSettings() {
  siteData.chatbot_name     = document.getElementById('cb-name')?.value.trim() || '';
  siteData.chatbot_greeting = document.getElementById('cb-greeting')?.value.trim() || '';
  siteData.chatbot_emoji    = document.getElementById('cb-emoji')?.value.trim() || '🤖';
  await apiSave('chatbot_name',     siteData.chatbot_name);
  await apiSave('chatbot_greeting', siteData.chatbot_greeting);
  await apiSave('chatbot_emoji',    siteData.chatbot_emoji);
  updateChatbotUI();
  showMsg('msg-cbsettings');
}

async function saveKnowledgeBase() {
  const kb = document.getElementById('ai-knowledge-base')?.value.trim() || '';
  siteData.ai_knowledge_base = kb;
  const saved = await apiSave('ai_knowledge_base', kb);
  if(saved) showMsg('msg-kb');
}

// ── About section images (3 slots) ───────────────────
function renderAboutImages() {
  const imgs = siteData.about_images || [];
  const labels = ['AiDoBot in action','Temperature check','Weight measurement'];
  const icons  = ['🖼️','🌡️','⚖️'];
  const classes = ['big','',''];
  const c = document.getElementById('about-images');
  if(!c) return;
  c.innerHTML = [0,1,2].map(i => {
    const url = imgs[i] || '';
    return url
      ? `<div class="about-img-card ${classes[i]}" style="padding:0;overflow:hidden">
           <img src="${url}" alt="${labels[i]}" style="width:100%;height:100%;object-fit:cover"/>
         </div>`
      : `<div class="about-img-card ${classes[i]}" data-slot="${i}"><span>${icons[i]}</span><p>${labels[i]}</p></div>`;
  }).join('');
}

async function uploadAboutImage(input, slot) {
  const file = input.files[0];
  if(!file) return;
  showProgress('pb-about-img');
  try {
    const url = await uploadToCloudinary(file, 'about', 'image');
    hideProgress('pb-about-img');
    if(!siteData.about_images) siteData.about_images = ['','',''];
    siteData.about_images[slot] = url;
    await apiSave('about_images', siteData.about_images);
    renderAboutImages();
    refreshAboutAdminGrid();
    showMsg('msg-about-img');
  } catch(e) {
    hideProgress('pb-about-img');
    showAdminStatus('Upload failed: ' + e.message, true);
  }
}

function refreshAboutAdminGrid() {
  const imgs   = siteData.about_images || ['','',''];
  const labels = ['AiDoBot in action','Temperature check','Weight measurement'];
  ['about-img-slot-0','about-img-slot-1','about-img-slot-2'].forEach((id, i) => {
    const el = document.getElementById(id);
    if(!el) return;
    el.innerHTML = imgs[i]
      ? `<img src="${imgs[i]}" style="width:100%;height:80px;object-fit:cover;border-radius:8px"/>
         <button onclick="deleteAboutImage(${i})" style="margin-top:4px;font-size:0.7rem;background:rgba(200,50,50,0.2);border:1px solid rgba(200,50,50,0.4);color:#c33;padding:2px 8px;border-radius:4px;cursor:pointer">Remove</button>`
      : `<div style="height:80px;display:flex;align-items:center;justify-content:center;background:var(--wood-100);border-radius:8px;color:var(--text-light);font-size:0.75rem">${labels[i]}</div>`;
  });
}

async function deleteAboutImage(slot) {
  if(!confirm('Remove this image?')) return;
  if(!siteData.about_images) return;
  siteData.about_images[slot] = '';
  await apiSave('about_images', siteData.about_images);
  renderAboutImages();
  refreshAboutAdminGrid();
  refreshShortsList();
  refreshPartnersAdminList();
  refreshOrdersAdmin();
  refreshProductImagePreviews();
}

// ── Hook AI init into page load ───────────────────────
function initAIFeatures() {
  updateChatbotUI();
  initAIPopup();
  setTimeout(() => {
    if(!chatbotOpen) {
      const u = document.getElementById('chat-unread');
      if(u) u.style.display = 'block';
    }
  }, 8000);
}

// ════════════════════════════════════════════════════
// ─── PRICING & ORDERS ────────────────────────────────
// ════════════════════════════════════════════════════

const PRICES = {
  home:      { USD: [999,   '$'],  INR: [83917,  '₹'], GMD: [71928,  'D'],  GBP: [788,   '£'] },
  community: { USD: [1999,  '$'],  INR: [167917, '₹'], GMD: [143928, 'D'],  GBP: [1578,  '£'] },
  gov:       { USD: [3999,  '$'],  INR: [335917, '₹'], GMD: [287928, 'D'],  GBP: [3158,  '£'] },
};

let activeCurrency = 'USD';
let activeOrderProduct = '';
let activeOrderKey = '';

function setCurrency(code, sym) {
  activeCurrency = code;
  // Update switcher buttons
  document.querySelectorAll('.currency-btn').forEach(b => {
    b.classList.toggle('active', b.textContent.includes(code));
  });
  // Update all price displays
  ['home','community','gov'].forEach(key => {
    const [amount] = PRICES[key][code];
    const symEl = document.getElementById('sym-' + key);
    const valEl = document.getElementById('price-' + key);
    if(symEl) symEl.textContent = sym;
    if(valEl) valEl.textContent = Number(amount).toLocaleString();
  });
}

function openOrderModal(productName, productKey) {
  activeOrderProduct = productName;
  activeOrderKey     = productKey;
  const [amount, sym] = PRICES[productKey]
    ? PRICES[productKey][activeCurrency]
    : [null, ''];
  const priceStr = amount ? `${sym}${Number(amount).toLocaleString()} ${activeCurrency}` : '';
  document.getElementById('order-product-info').textContent =
    productName + (priceStr ? ' — ' + priceStr : '');
  // Reset form & success
  document.getElementById('order-form-wrap').style.display = 'block';
  document.getElementById('order-success').style.display = 'none';
  ['ord-name','ord-email','ord-phone','ord-org','ord-country','ord-address','ord-notes'].forEach(id => {
    const el = document.getElementById(id);
    if(el) el.value = '';
  });
  const qty = document.getElementById('ord-qty');
  if(qty) qty.selectedIndex = 0;
  document.getElementById('order-modal-overlay').classList.add('open');
  document.body.style.overflow = 'hidden';
}

function closeOrderModal() {
  document.getElementById('order-modal-overlay').classList.remove('open');
  document.body.style.overflow = '';
}

async function submitOrder() {
  const name    = document.getElementById('ord-name')?.value.trim();
  const email   = document.getElementById('ord-email')?.value.trim();
  const phone   = document.getElementById('ord-phone')?.value.trim();
  const country = document.getElementById('ord-country')?.value.trim();
  const address = document.getElementById('ord-address')?.value.trim();

  if(!name || !email || !phone || !country || !address) {
    alert('Please fill in all required fields (Name, Email, Phone, Country, Address).');
    return;
  }

  const [amount, sym] = PRICES[activeOrderKey]
    ? PRICES[activeOrderKey][activeCurrency]
    : [null, ''];

  const order = {
    id:        'ORD-' + Date.now(),
    product:   activeOrderProduct,
    price:     amount ? `${sym}${Number(amount).toLocaleString()} ${activeCurrency}` : 'TBD',
    currency:  activeCurrency,
    name,
    email,
    phone,
    org:       document.getElementById('ord-org')?.value.trim() || '',
    country,
    address,
    qty:       document.getElementById('ord-qty')?.value || '1',
    notes:     document.getElementById('ord-notes')?.value.trim() || '',
    status:    'New',
    placed_at: new Date().toLocaleString(),
  };

  // Save to siteData orders and persist
  if(!siteData.orders) siteData.orders = [];
  siteData.orders.unshift(order); // newest first
  await apiSave('orders', siteData.orders);

  // Show success
  document.getElementById('order-form-wrap').style.display = 'none';
  document.getElementById('order-success').style.display = 'block';

  // Refresh admin list if open
  refreshOrdersAdmin();
  refreshProductImagePreviews();
}


// ════════════════════════════════════════════════════
// ─── ORDERS ADMIN ────────────────────────────────────
// ════════════════════════════════════════════════════

let ordersFilter = 'all';

function filterOrders(status, btn) {
  ordersFilter = status;
  document.querySelectorAll('.order-filter-btn').forEach(b => b.classList.remove('active'));
  if(btn) btn.classList.add('active');
  refreshOrdersAdmin();
  refreshProductImagePreviews();
}

function refreshOrdersAdmin() {
  const all  = siteData.orders || [];
  const list = document.getElementById('orders-admin-list');
  const countEl = document.getElementById('orders-count');
  if(!list) return;

  const filtered = ordersFilter === 'all' ? all : all.filter(o => o.status === ordersFilter);
  if(countEl) countEl.textContent = `${all.length} total · ${filtered.length} shown`;

  if(!filtered.length) {
    list.innerHTML = `<div style="padding:20px;text-align:center;color:var(--text-light);font-size:0.83rem;background:var(--wood-100);border-radius:10px">
      ${all.length ? 'No orders match this filter.' : 'No orders yet. Orders will appear here when customers place them.'}
    </div>`;
    return;
  }

  list.innerHTML = filtered.map((o, i) => {
    const realIdx = all.indexOf(o);
    return `
    <div class="order-card">
      <div class="order-card-header">
        <div>
          <div style="font-size:0.7rem;font-family:Space Mono,monospace;color:var(--wood-500);margin-bottom:3px">${o.id} · ${o.placed_at}</div>
          <div style="font-size:1rem;font-weight:700;color:var(--wood-700)">${o.name}</div>
          <div style="font-size:0.82rem;color:var(--wood-600);margin-top:2px">${o.product}</div>
          <div style="font-size:0.88rem;font-weight:600;color:var(--wood-500);margin-top:4px">${o.price} × ${o.qty}</div>
        </div>
        <div style="display:flex;flex-direction:column;align-items:flex-end;gap:8px">
          <span class="order-status-badge status-${o.status}">${o.status}</span>
          <select onchange="updateOrderStatus(${realIdx}, this.value)" style="font-size:0.72rem;padding:4px 8px;border-radius:6px;border:1px solid var(--wood-200);background:white;color:var(--wood-700);cursor:pointer">
            ${['New','Confirmed','Shipped','Delivered'].map(s =>
              `<option${s===o.status?' selected':''}>${s}</option>`
            ).join('')}
          </select>
        </div>
      </div>
      <div style="display:grid;grid-template-columns:1fr 1fr;gap:8px;font-size:0.78rem;color:var(--wood-600);margin-bottom:10px">
        <div>📧 ${o.email}</div>
        <div>📞 ${o.phone}</div>
        <div>🌍 ${o.country}</div>
        ${o.org ? `<div>🏥 ${o.org}</div>` : '<div></div>'}
      </div>
      <div style="font-size:0.78rem;color:var(--wood-600);background:rgba(255,255,255,0.6);border-radius:8px;padding:8px 10px;margin-bottom:10px">
        📍 <strong>Address:</strong> ${o.address}
      </div>
      ${o.notes ? `<div style="font-size:0.78rem;color:var(--wood-500);font-style:italic;margin-bottom:10px">💬 Note: ${o.notes}</div>` : ''}
      <div style="display:flex;justify-content:flex-end">
        <button onclick="deleteOrder(${realIdx})" style="font-size:0.72rem;padding:5px 12px;border-radius:6px;background:rgba(200,50,50,0.1);border:1px solid rgba(200,50,50,0.25);color:#c33;cursor:pointer">🗑 Remove</button>
      </div>
    </div>`;
  }).join('');
}

async function updateOrderStatus(idx, newStatus) {
  if(!siteData.orders || !siteData.orders[idx]) return;
  siteData.orders[idx].status = newStatus;
  await apiSave('orders', siteData.orders);
  refreshOrdersAdmin();
  refreshProductImagePreviews();
}

async function deleteOrder(idx) {
  if(!confirm('Remove this order from records?')) return;
  siteData.orders.splice(idx, 1);
  await apiSave('orders', siteData.orders);
  refreshOrdersAdmin();
  refreshProductImagePreviews();
}

function exportOrdersCSV() {
  const orders = siteData.orders || [];
  if(!orders.length) { alert('No orders to export.'); return; }
  const headers = ['Order ID','Date','Product','Price','Qty','Status','Name','Email','Phone','Organisation','Country','Address','Notes'];
  const rows = orders.map(o => [
    o.id, o.placed_at, o.product, o.price, o.qty, o.status,
    o.name, o.email, o.phone, o.org||'', o.country, `"${(o.address||'').replace(/"/g,'""')}"`, `"${(o.notes||'').replace(/"/g,'""')}"`
  ]);
  const csv = [headers, ...rows].map(r => r.join(',')).join('\n');
  const blob = new Blob([csv], { type:'text/csv' });
  const url  = URL.createObjectURL(blob);
  const a    = document.createElement('a');
  a.href = url; a.download = 'aidoBot_orders.csv';
  a.click(); URL.revokeObjectURL(url);
}


// ════════════════════════════════════════════════════
// ─── PRODUCT IMAGES ──────────────────────────────────
// ════════════════════════════════════════════════════

function renderProductImages() {
  const keys = ['home','community','gov','future'];
  keys.forEach(key => {
    const url = siteData.product_images?.[key] || '';
    const img = document.getElementById('pimg-' + key);
    const ph  = document.getElementById('pimg-' + key + '-ph');
    if(!img) return;
    if(url) {
      img.src = url;
      img.style.display = 'block';
      img.style.width  = '100%';
      img.style.height = '100%';
      img.style.objectFit = 'cover';
      if(ph) ph.style.display = 'none';
    } else {
      img.style.display = 'none';
      if(ph) ph.style.display = 'flex';
    }
  });
}

async function uploadProductImage(input, key) {
  const file = input.files[0];
  if(!file) return;
  const pbId   = 'pb-pi-' + key;
  const prevId = 'pi-' + key + '-preview';
  showProgress(pbId);
  try {
    const url = await uploadToCloudinary(file, 'products', 'image');
    hideProgress(pbId);
    if(!siteData.product_images) siteData.product_images = {};
    siteData.product_images[key] = url;
    await apiSave('product_images', siteData.product_images);
    renderProductImages();
    refreshProductImagePreviews();
    showMsg('msg-product-image');
  } catch(e) {
    hideProgress(pbId);
    showAdminStatus('Upload failed: ' + e.message, true);
  }
}

function refreshProductImagePreviews() {
  const keys   = ['home','community','gov','future'];
  const labels = { home:'Home Edition', community:'Community Edition', gov:'Government Edition', future:'Next Generation' };
  keys.forEach(key => {
    const url    = siteData.product_images?.[key] || '';
    const prevEl = document.getElementById('pi-' + key + '-preview');
    if(!prevEl) return;
    prevEl.innerHTML = url
      ? `<img src="${url}" style="width:100%;height:90px;object-fit:cover;border-radius:10px;display:block"/>`
      : `<div style="height:90px;display:flex;align-items:center;justify-content:center;background:var(--wood-100);border-radius:10px;font-size:0.75rem;color:var(--text-light)">${labels[key]} — no image yet</div>`;
  });
}

</script>
</body>
</html>
